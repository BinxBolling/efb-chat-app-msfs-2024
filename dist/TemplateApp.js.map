{
  "version": 3,
  "sources": ["global-externals:@microsoft/msfs-sdk", "../../efb_api/dist/index.js", "../src/TemplateApp.tsx", "../src/Components/SamplePage.tsx", "../src/Components/TwitchChatService.ts", "../src/Components/SamplePopup.tsx"],
  "sourcesContent": ["module.exports = msfssdk;", "var __defProp = Object.defineProperty;\r\nvar __defProps = Object.defineProperties;\r\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\r\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\r\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\r\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\r\nvar __defNormalProp = (obj, key, value2) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value: value2 }) : obj[key] = value2;\r\nvar __spreadValues = (a, b) => {\r\n  for (var prop in b || (b = {}))\r\n    if (__hasOwnProp.call(b, prop))\r\n      __defNormalProp(a, prop, b[prop]);\r\n  if (__getOwnPropSymbols)\r\n    for (var prop of __getOwnPropSymbols(b)) {\r\n      if (__propIsEnum.call(b, prop))\r\n        __defNormalProp(a, prop, b[prop]);\r\n    }\r\n  return a;\r\n};\r\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\r\nvar __objRest = (source, exclude) => {\r\n  var target = {};\r\n  for (var prop in source)\r\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\r\n      target[prop] = source[prop];\r\n  if (source != null && __getOwnPropSymbols)\r\n    for (var prop of __getOwnPropSymbols(source)) {\r\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\r\n        target[prop] = source[prop];\r\n    }\r\n  return target;\r\n};\r\nimport { Subject, FacilityUtils, FacilityType, AirportUtils, UnitType, ICAO, DmsFormatter, HandlerSubscription, UUID, NumberFormatter, UnitFamily, DisplayComponent, FSComponent, SubscribableUtils, ArrayUtils, SubscribableMapFunctions, MappedSubject, SubscribableArrayEventType, ArraySubject, Wait, ObjectSubject, AbstractNumberUnitDisplay, RunwayUtils, DebounceTimer, GeoPoint, FacilityLoader, FacilityRepository, FacilitySearchType, DataStore, DefaultUserSettingManager, BasicNavAngleUnit, UserSettingSaveManager, SetSubject } from \"@microsoft/msfs-sdk\";\r\nvar AppBootMode = /* @__PURE__ */ ((AppBootMode2) => {\r\n  AppBootMode2[AppBootMode2[\"COLD\"] = 0] = \"COLD\";\r\n  AppBootMode2[AppBootMode2[\"WARM\"] = 1] = \"WARM\";\r\n  AppBootMode2[AppBootMode2[\"HOT\"] = 2] = \"HOT\";\r\n  return AppBootMode2;\r\n})(AppBootMode || {});\r\nvar AppSuspendMode = /* @__PURE__ */ ((AppSuspendMode2) => {\r\n  AppSuspendMode2[AppSuspendMode2[\"SLEEP\"] = 0] = \"SLEEP\";\r\n  AppSuspendMode2[AppSuspendMode2[\"TERMINATE\"] = 1] = \"TERMINATE\";\r\n  return AppSuspendMode2;\r\n})(AppSuspendMode || {});\r\nclass App {\r\n  constructor() {\r\n    this._isInstalled = false;\r\n    this._isReady = false;\r\n    this._favoriteIndex = -1;\r\n    this.available = Subject.create(true);\r\n    this.BootMode = AppBootMode.COLD;\r\n    this.SuspendMode = AppSuspendMode.SLEEP;\r\n  }\r\n  /**\r\n   * @param props\r\n   * @internal\r\n   */\r\n  async _install(props) {\r\n    var _a;\r\n    if (this._isInstalled) {\r\n      return Promise.reject(\"App already installed.\");\r\n    }\r\n    this._isInstalled = true;\r\n    this.bus = props.bus;\r\n    this._unitsSettingsManager = props.unitsSettingManager;\r\n    this._efbSettingsManager = props.efbSettingsManager;\r\n    this._notificationManager = props.notificationManager;\r\n    this._onboardingManager = props.onboardingManager;\r\n    this._favoriteIndex = (_a = props.favoriteIndex) != null ? _a : -1;\r\n    this.options = props.options;\r\n    await this.install(props);\r\n    this._isReady = true;\r\n    Coherent.trigger(\"EFB_APP_INSTALLED\", this.name, this.internalName);\r\n    return Promise.resolve();\r\n  }\r\n  /**\r\n   * Install hook\r\n   * @param props\r\n   */\r\n  async install(props) {\r\n    return Promise.resolve();\r\n  }\r\n  /** Boolean to check if app is loaded and installed. */\r\n  get isReady() {\r\n    return this._isReady;\r\n  }\r\n  /**\r\n   * Internal app name\r\n   * @defaultValue > Class's name (`this.constructor.name`)\r\n   */\r\n  get internalName() {\r\n    return this.constructor.name;\r\n  }\r\n  /**\r\n   * EFB units settings manager\r\n   * @returns a unique unitsSettingsManager instance\r\n   */\r\n  get unitsSettingsManager() {\r\n    const unitsSettingsManager = this._unitsSettingsManager;\r\n    if (!unitsSettingsManager) {\r\n      throw new Error(\"Units settings manager is not defined\");\r\n    }\r\n    return unitsSettingsManager;\r\n  }\r\n  /**\r\n   * EFB settings manager\r\n   * @returns a unique efbSettingsManager instance\r\n   */\r\n  get efbSettingsManager() {\r\n    const efbSettingsManager = this._efbSettingsManager;\r\n    if (!efbSettingsManager) {\r\n      throw new Error(\"EFB settings manager is not defined\");\r\n    }\r\n    return efbSettingsManager;\r\n  }\r\n  /**\r\n   * EFB notification manager\r\n   * @returns a unique efbNotificationManager instance\r\n   */\r\n  get notificationManager() {\r\n    const notificationManager = this._notificationManager;\r\n    if (!notificationManager) {\r\n      throw new Error(\"Notification manager is not defined\");\r\n    }\r\n    return notificationManager;\r\n  }\r\n  /** Onboarding manager */\r\n  get onboardingManager() {\r\n    const onboardingManager = this._onboardingManager;\r\n    if (!onboardingManager) {\r\n      throw new Error(\"Onboarding manager is not defined\");\r\n    }\r\n    return onboardingManager;\r\n  }\r\n  /**\r\n   * Aircraft models list compatible with the App. If not defined, the App is compatible with all aircraft models.\r\n   * example: ['Cabri G2', 'H125']\r\n   * @returns a list of aircraft models compatible with the App or undefined\r\n   */\r\n  get compatibleAircraftModels() {\r\n    return void 0;\r\n  }\r\n  /** @internal */\r\n  get favoriteIndex() {\r\n    return this._favoriteIndex;\r\n  }\r\n  /** @internal */\r\n  set favoriteIndex(index2) {\r\n    this._favoriteIndex = index2;\r\n  }\r\n}\r\nfunction unique(collection) {\r\n  return collection.reduce((acc, item) => {\r\n    if (!acc.includes(item)) {\r\n      acc.push(item);\r\n    }\r\n    return acc;\r\n  }, []);\r\n}\r\nfunction groupBy(collection, iteratee) {\r\n  return collection.reduce((accumulator, value2) => {\r\n    let key = String(typeof iteratee === \"function\" ? iteratee(value2) : iteratee);\r\n    if (value2 && typeof value2 === \"object\" && key in value2) {\r\n      key = String(value2[key]);\r\n    }\r\n    if (Object.prototype.hasOwnProperty.call(accumulator, key)) {\r\n      accumulator[key].push(value2);\r\n    } else {\r\n      accumulator[key] = [value2];\r\n    }\r\n    return accumulator;\r\n  }, {});\r\n}\r\nfunction random(collection) {\r\n  const length = collection.length;\r\n  return length ? collection[Math.floor(Math.random() * length)] : void 0;\r\n}\r\nfunction isVNode(object) {\r\n  return \"instance\" in object && \"props\" in object && \"children\" in object;\r\n}\r\nfunction isIApp(object) {\r\n  return \"internalName\" in object && \"BootMode\" in object;\r\n}\r\nfunction isConstructor(func) {\r\n  return typeof func === \"function\" && !!func.prototype && func.prototype.constructor === func;\r\n}\r\nfunction isFunction(fn) {\r\n  return typeof fn === \"function\";\r\n}\r\nfunction toArray(list, start = 0) {\r\n  let i = list.length - start;\r\n  const ret = new Array(i);\r\n  while (i--) {\r\n    ret[i] = list[i + start];\r\n  }\r\n  return ret;\r\n}\r\nfunction toClassProp(classProp) {\r\n  if (classProp === void 0) {\r\n    return classProp;\r\n  }\r\n  if (Array.isArray(classProp)) {\r\n    return toClassProp(classProp.join(\" \"));\r\n  }\r\n  if (typeof classProp !== \"string\") {\r\n    return classProp;\r\n  }\r\n  return classProp.split(\" \").reduce(function(stack, el) {\r\n    return __spreadProps(__spreadValues({}, stack), { [el]: true });\r\n  }, {});\r\n}\r\nfunction mergeClassProp(baseProp, ...args) {\r\n  const mergedClassProp = Object.assign({}, toClassProp(baseProp));\r\n  for (const arg of args) {\r\n    Object.assign(mergedClassProp, toClassProp(arg));\r\n  }\r\n  return mergedClassProp;\r\n}\r\nconst dayKeys = [\r\n  \"@fs-base,TT:TIME.SUNDAY\",\r\n  \"@fs-base,TT:TIME.MONDAY\",\r\n  \"@fs-base,TT:TIME.TUESDAY\",\r\n  \"@fs-base,TT:TIME.WEDNESDAY\",\r\n  \"@fs-base,TT:TIME.THURSDAY\",\r\n  \"@fs-base,TT:TIME.FRIDAY\",\r\n  \"@fs-base,TT:TIME.SATURDAY\"\r\n];\r\nconst monthKeys = [\r\n  \"@fs-base,TT:TIME.JANUARY\",\r\n  \"@fs-base,TT:TIME.FEBRUARY\",\r\n  \"@fs-base,TT:TIME.MARCH\",\r\n  \"@fs-base,TT:TIME.APRIL\",\r\n  \"@fs-base,TT:TIME.MAY\",\r\n  \"@fs-base,TT:TIME.JUNE\",\r\n  \"@fs-base,TT:TIME.JULY\",\r\n  \"@fs-base,TT:TIME.AUGUST\",\r\n  \"@fs-base,TT:TIME.SEPTEMBER\",\r\n  \"@fs-base,TT:TIME.OCTOBER\",\r\n  \"@fs-base,TT:TIME.NOVEMBER\",\r\n  \"@fs-base,TT:TIME.DECEMBER\"\r\n];\r\nconst monthShortKeys = [\r\n  \"@fs-base,TT:TIME.monthShort1\",\r\n  \"@fs-base,TT:TIME.monthShort2\",\r\n  \"@fs-base,TT:TIME.monthShort3\",\r\n  \"@fs-base,TT:TIME.monthShort4\",\r\n  \"@fs-base,TT:TIME.monthShort5\",\r\n  \"@fs-base,TT:TIME.monthShort6\",\r\n  \"@fs-base,TT:TIME.monthShort7\",\r\n  \"@fs-base,TT:TIME.monthShort8\",\r\n  \"@fs-base,TT:TIME.monthShort9\",\r\n  \"@fs-base,TT:TIME.monthShort10\",\r\n  \"@fs-base,TT:TIME.monthShort11\",\r\n  \"@fs-base,TT:TIME.monthShort12\"\r\n];\r\nfunction getWeeksInMonth(year, month) {\r\n  const weeks = [];\r\n  const firstDate = new Date(year, month, 1);\r\n  const lastDate = new Date(year, month + 1, 0);\r\n  const numDays = lastDate.getDate();\r\n  let dayOfWeekCounter = firstDate.getDay();\r\n  for (let date = 1; date <= numDays; date++) {\r\n    if (dayOfWeekCounter === 0 || weeks.length === 0) {\r\n      weeks.push([]);\r\n    }\r\n    weeks[weeks.length - 1].push(date);\r\n    dayOfWeekCounter = (dayOfWeekCounter + 1) % 7;\r\n  }\r\n  return weeks.filter((w) => w.length > 0).map((w) => ({\r\n    startDay: w[0],\r\n    endDay: w[w.length - 1]\r\n  }));\r\n}\r\nfunction getStartOfWeek(year, month, day) {\r\n  const date = new Date(year, month, day);\r\n  date.setDate(date.getDate() - date.getDay());\r\n  return date;\r\n}\r\nfunction formatDay(day) {\r\n  if (day === 31) return \"st\";\r\n  switch (day % 20) {\r\n    case 1:\r\n      return \"st\";\r\n    case 2:\r\n      return \"nd\";\r\n    case 3:\r\n      return \"rd\";\r\n    default:\r\n      return \"th\";\r\n  }\r\n}\r\nfunction isSelectedAirportFacility(facility) {\r\n  return \"currentRunway\" in facility;\r\n}\r\nfunction isAirportFacility(facility) {\r\n  return FacilityUtils.isFacilityType(facility, FacilityType.Airport) && \"altitude\" in facility;\r\n}\r\nvar AirportSize = /* @__PURE__ */ ((AirportSize2) => {\r\n  AirportSize2[\"Large\"] = \"Large\";\r\n  AirportSize2[\"Medium\"] = \"Medium\";\r\n  AirportSize2[\"Small\"] = \"Small\";\r\n  return AirportSize2;\r\n})(AirportSize || {});\r\nconst LargeAirportThresholdFt = 8100;\r\nconst MediumAirportThresholdFt = 5e3;\r\nfunction getAirportSize(airport) {\r\n  const longestRunway = AirportUtils.getLongestRunway(airport);\r\n  if (!longestRunway) {\r\n    return \"Small\";\r\n  }\r\n  const longestRwyLengthFeet = UnitType.METER.convertTo(longestRunway.length, UnitType.FOOT);\r\n  return longestRwyLengthFeet >= LargeAirportThresholdFt ? \"Large\" : longestRwyLengthFeet >= MediumAirportThresholdFt || airport.towered ? \"Medium\" : \"Small\";\r\n}\r\nfunction getFacilityStrField(facility, propertyName, getter) {\r\n  return facility ? getter(facility[propertyName]) : \"\";\r\n}\r\nfunction getICAOIdent(facility) {\r\n  return getFacilityStrField(facility, \"icao\", ICAO.getIdent);\r\n}\r\nfunction getFacilityName(facility) {\r\n  return getFacilityStrField(facility, \"name\", Utils.Translate);\r\n}\r\nfunction getRunwayName(runway) {\r\n  return `runway ${runway.designation}`;\r\n}\r\nfunction getCurrentRunwayName(facility) {\r\n  return facility && isSelectedAirportFacility(facility) ? getRunwayName(facility.currentRunway) : \"\";\r\n}\r\nfunction getFacilityIconPath(facilityType) {\r\n  let svgName = \"\";\r\n  switch (facilityType) {\r\n    case FacilityType.Airport:\r\n    case FacilityType.RWY:\r\n      svgName = \"Airport\";\r\n      break;\r\n    case FacilityType.VOR:\r\n      svgName = \"VOR\";\r\n      break;\r\n    case FacilityType.NDB:\r\n      svgName = \"NDB\";\r\n      break;\r\n    case FacilityType.USR:\r\n      svgName = \"Intersection\";\r\n      break;\r\n    case FacilityType.Intersection:\r\n    default:\r\n      svgName = \"Waypoint\";\r\n  }\r\n  return `coui://html_ui/efb_ui/efb_os/Assets/icons/facilities/${svgName}.svg`;\r\n}\r\nfunction createCustomFacility(repository, lat, lon) {\r\n  const customIdent = getLatLonStr(lat, lon);\r\n  const icao = `U      ${customIdent}`;\r\n  const customFac = {\r\n    icao,\r\n    icaoStruct: ICAO.stringV1ToValue(icao),\r\n    city: \"none\",\r\n    lat,\r\n    lon,\r\n    name: \"Custom point\",\r\n    region: \"none\"\r\n  };\r\n  repository.add(customFac);\r\n  return customFac;\r\n}\r\nfunction getLatLonStr(lat, lon) {\r\n  const dmsFormatter = new DmsFormatter();\r\n  const partsLat = dmsFormatter.parseLat(lat);\r\n  let customName = partsLat.degrees.toFixed(0) + partsLat.minutes.toFixed(0) + partsLat.direction;\r\n  const partsLon = dmsFormatter.parseLon(lon);\r\n  customName += partsLon.degrees.toFixed(0) + partsLon.minutes.toFixed(0) + partsLon.direction;\r\n  return customName;\r\n}\r\nvar SubscribableMapEventType = /* @__PURE__ */ ((SubscribableMapEventType2) => {\r\n  SubscribableMapEventType2[SubscribableMapEventType2[\"Added\"] = 0] = \"Added\";\r\n  SubscribableMapEventType2[SubscribableMapEventType2[\"Updated\"] = 1] = \"Updated\";\r\n  SubscribableMapEventType2[SubscribableMapEventType2[\"Removed\"] = 2] = \"Removed\";\r\n  return SubscribableMapEventType2;\r\n})(SubscribableMapEventType || {});\r\nclass MapSubject {\r\n  constructor(entries) {\r\n    this.isSubscribable = true;\r\n    this.isMapSubscribable = true;\r\n    this.obj = /* @__PURE__ */ new Map();\r\n    this.subs = [];\r\n    this.notifyDepth = 0;\r\n    this.initialNotifyFunc = this.initialNotify.bind(this);\r\n    this.onSubDestroyedFunc = this.onSubDestroyed.bind(this);\r\n    if (entries) {\r\n      for (const [k, v] of entries) {\r\n        this.obj.set(k, v);\r\n      }\r\n    }\r\n  }\r\n  get length() {\r\n    return this.obj.size;\r\n  }\r\n  static create(entries) {\r\n    return new MapSubject(entries);\r\n  }\r\n  get(key) {\r\n    return this.obj.get(key);\r\n  }\r\n  set(key, value2) {\r\n    const oldValue = this.obj.get(key);\r\n    const exists = this.has(key);\r\n    this.obj.set(key, value2);\r\n    this.notify(key, exists ? 1 : 0, value2, oldValue);\r\n  }\r\n  has(key) {\r\n    return this.obj.has(key);\r\n  }\r\n  delete(key) {\r\n    const deleted = this.obj.delete(key);\r\n    if (deleted) {\r\n      this.notify(\r\n        key,\r\n        2\r\n        /* Removed */\r\n      );\r\n    }\r\n    return deleted;\r\n  }\r\n  sub(handler, initialNotify = false, paused = false) {\r\n    const sub = new HandlerSubscription(handler, this.initialNotifyFunc, this.onSubDestroyedFunc);\r\n    this.subs.push(sub);\r\n    if (paused) {\r\n      sub.pause();\r\n    } else if (initialNotify) {\r\n      sub.initialNotify();\r\n    }\r\n    return sub;\r\n  }\r\n  unsub(handler) {\r\n    const toDestroy = this.subs.find((sub) => sub.handler === handler);\r\n    toDestroy == null ? void 0 : toDestroy.destroy();\r\n  }\r\n  map(_fn, _equalityFunc, _mutateFunc, _initialVal) {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n  pipe(_to, _map, _paused) {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n  notify(key, type, modifiedItem, previousValue) {\r\n    let needCleanUpSubs = false;\r\n    this.notifyDepth++;\r\n    for (const sub of this.subs) {\r\n      try {\r\n        if (sub.isAlive && !sub.isPaused) {\r\n          sub.handler(key, type, modifiedItem, previousValue);\r\n        }\r\n        needCleanUpSubs || (needCleanUpSubs = !sub.isAlive);\r\n      } catch (error) {\r\n        console.error(`MapSubject: error in handler: ${error}`);\r\n      }\r\n    }\r\n    this.notifyDepth--;\r\n    if (needCleanUpSubs && this.notifyDepth === 0) {\r\n      this.subs = this.subs.filter((sub) => sub.isAlive);\r\n    }\r\n  }\r\n  initialNotify(sub) {\r\n    for (const key of this.obj.keys()) {\r\n      const v = this.obj.get(key);\r\n      try {\r\n        sub.handler(key, 0, v, void 0);\r\n      } catch (error) {\r\n        console.error(`MapSubject: error in handker: ${error}`);\r\n      }\r\n    }\r\n  }\r\n  onSubDestroyed(sub) {\r\n    if (this.notifyDepth === 0) {\r\n      this.subs.splice(this.subs.indexOf(sub), 1);\r\n    }\r\n  }\r\n}\r\nfunction where(value2) {\r\n  return (input) => value2 === input;\r\n}\r\nfunction toString() {\r\n  return (input) => input.toString();\r\n}\r\nvar FlightPhaseState = /* @__PURE__ */ ((FlightPhaseState2) => {\r\n  FlightPhaseState2[FlightPhaseState2[\"PREFLIGHT\"] = 0] = \"PREFLIGHT\";\r\n  FlightPhaseState2[FlightPhaseState2[\"STARTUP\"] = 1] = \"STARTUP\";\r\n  FlightPhaseState2[FlightPhaseState2[\"BEFORE_TAXI\"] = 2] = \"BEFORE_TAXI\";\r\n  FlightPhaseState2[FlightPhaseState2[\"TAXI\"] = 3] = \"TAXI\";\r\n  FlightPhaseState2[FlightPhaseState2[\"TAKEOFF\"] = 4] = \"TAKEOFF\";\r\n  FlightPhaseState2[FlightPhaseState2[\"CLIMB\"] = 5] = \"CLIMB\";\r\n  FlightPhaseState2[FlightPhaseState2[\"CRUISE\"] = 6] = \"CRUISE\";\r\n  FlightPhaseState2[FlightPhaseState2[\"DESCENT\"] = 7] = \"DESCENT\";\r\n  FlightPhaseState2[FlightPhaseState2[\"LANDING\"] = 8] = \"LANDING\";\r\n  FlightPhaseState2[FlightPhaseState2[\"TAXITOGATE\"] = 9] = \"TAXITOGATE\";\r\n  FlightPhaseState2[FlightPhaseState2[\"SHUTDOWN\"] = 10] = \"SHUTDOWN\";\r\n  FlightPhaseState2[FlightPhaseState2[\"FLIGHT_OVER\"] = 11] = \"FLIGHT_OVER\";\r\n  FlightPhaseState2[FlightPhaseState2[\"UNKNOWN\"] = 100] = \"UNKNOWN\";\r\n  return FlightPhaseState2;\r\n})(FlightPhaseState || {});\r\nclass _FlightPhaseManager {\r\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n  constructor() {\r\n    this._flightPhase = Subject.create(\r\n      100\r\n      /* UNKNOWN */\r\n    );\r\n    this.flightPhase = this._flightPhase;\r\n    this.isFlightOver = this._flightPhase.map(where(\r\n      11\r\n      /* FLIGHT_OVER */\r\n    ));\r\n    this.onFlightPhaseStateChangedSubscription = null;\r\n  }\r\n  /**\r\n   * Static singleton instance of the Flight Phase Manager\r\n   * @internal\r\n   */\r\n  static get instance() {\r\n    return window.FLIGHT_PHASE_MANAGER = _FlightPhaseManager._instance = window.FLIGHT_PHASE_MANAGER || _FlightPhaseManager._instance || new _FlightPhaseManager();\r\n  }\r\n  /**\r\n   * The bus is set once at EFB initialization from efb_ui.tsx\r\n   * @internal\r\n   */\r\n  setBus(bus) {\r\n    var _a;\r\n    (_a = this.onFlightPhaseStateChangedSubscription) == null ? void 0 : _a.destroy();\r\n    this.onFlightPhaseStateChangedSubscription = bus.on(\"FlightPhaseChanged\", (flightPhase) => {\r\n      switch (flightPhase) {\r\n        case \"PREFLIGHT_RTC\":\r\n        case \"PREFLIGHT\":\r\n        case \"SKIP_TRANSITION_PREFLIGHT\":\r\n          this._flightPhase.set(\r\n            0\r\n            /* PREFLIGHT */\r\n          );\r\n          break;\r\n        case \"STARTUP\":\r\n          this._flightPhase.set(\r\n            1\r\n            /* STARTUP */\r\n          );\r\n          break;\r\n        case \"BEFORE_TAXI\":\r\n        case \"TAXI\":\r\n        case \"SKIP_TRANSITION_TAXI\":\r\n          this._flightPhase.set(\r\n            3\r\n            /* TAXI */\r\n          );\r\n          break;\r\n        case \"TAKEOFF\":\r\n          this._flightPhase.set(\r\n            4\r\n            /* TAKEOFF */\r\n          );\r\n          break;\r\n        case \"CLIMB\":\r\n          this._flightPhase.set(\r\n            5\r\n            /* CLIMB */\r\n          );\r\n          break;\r\n        case \"CRUISE\":\r\n        case \"SKIP_TRANSITION_CRUISE\":\r\n          this._flightPhase.set(\r\n            6\r\n            /* CRUISE */\r\n          );\r\n          break;\r\n        case \"DESCENT\":\r\n          this._flightPhase.set(\r\n            7\r\n            /* DESCENT */\r\n          );\r\n          break;\r\n        case \"LANDING\":\r\n          this._flightPhase.set(\r\n            8\r\n            /* LANDING */\r\n          );\r\n          break;\r\n        case \"TAXITOGATE\":\r\n        case \"SKIP_TRANSITION_TAXITOGATE\":\r\n          this._flightPhase.set(\r\n            9\r\n            /* TAXITOGATE */\r\n          );\r\n          break;\r\n        case \"SHUTDOWN\":\r\n          this._flightPhase.set(\r\n            10\r\n            /* SHUTDOWN */\r\n          );\r\n          break;\r\n        case \"RTC\":\r\n          break;\r\n        case \"MISSIONSUCCESS\":\r\n        case \"MISSIONABORTED\":\r\n          this._flightPhase.set(\r\n            11\r\n            /* FLIGHT_OVER */\r\n          );\r\n          break;\r\n        case \"REACH BANNER APPROACH\":\r\n        case \"HOOKBANNER\":\r\n        case \"REACH PASS\":\r\n        case \"PASS\":\r\n        case \"CRUISEBACK\":\r\n        case \"REACH DROP\":\r\n        case \"DROP BANNER\":\r\n          break;\r\n        case \"WATERDROP\":\r\n          break;\r\n        default:\r\n          console.warn(`Received unknown flight phase '${flightPhase}'`);\r\n          this._flightPhase.set(\r\n            100\r\n            /* UNKNOWN */\r\n          );\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * @description This function is used in order to verify if a given flight phase has been reached.\r\n   * Always return true when the flight phase is unknown.\r\n   * @param flightPhase The flight phase that has been reached or not\r\n   * @returns A subscribable that returns whether the given flight phase has been reached\r\n   */\r\n  hasReachedFlightPhaseState(flightPhase) {\r\n    return this.flightPhase.map(\r\n      (currentFlightPhaseState) => currentFlightPhaseState >= flightPhase\r\n    );\r\n  }\r\n}\r\nconst FlightPhaseManager = _FlightPhaseManager.instance;\r\nvar GameMode = /* @__PURE__ */ ((GameMode2) => {\r\n  GameMode2[GameMode2[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\r\n  GameMode2[GameMode2[\"CAREER\"] = 1] = \"CAREER\";\r\n  GameMode2[GameMode2[\"CHALLENGE\"] = 2] = \"CHALLENGE\";\r\n  GameMode2[GameMode2[\"DISCOVERY\"] = 3] = \"DISCOVERY\";\r\n  GameMode2[GameMode2[\"FREEFLIGHT\"] = 4] = \"FREEFLIGHT\";\r\n  return GameMode2;\r\n})(GameMode || {});\r\nclass _GameModeManager {\r\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n  constructor() {\r\n    this._gameMode = Subject.create(\r\n      0\r\n      /* UNKNOWN */\r\n    );\r\n    this.gameMode = this._gameMode;\r\n    this.isCareer = this._gameMode.map(where(\r\n      1\r\n      /* CAREER */\r\n    ));\r\n    this.isChallenge = this._gameMode.map(where(\r\n      2\r\n      /* CHALLENGE */\r\n    ));\r\n    this.isDiscovery = this._gameMode.map(where(\r\n      3\r\n      /* DISCOVERY */\r\n    ));\r\n    this.isFreeflight = this._gameMode.map(where(\r\n      4\r\n      /* FREEFLIGHT */\r\n    ));\r\n    this.onGameModeChangedSubscription = null;\r\n  }\r\n  /**\r\n   * Static singleton instance of the Game mode manager\r\n   * @internal\r\n   */\r\n  static get instance() {\r\n    return window.GAME_MODE_MANAGER = _GameModeManager._instance = window.GAME_MODE_MANAGER || _GameModeManager._instance || new _GameModeManager();\r\n  }\r\n  /**\r\n   * The bus is set once at EFB initialization from efb_ui.tsx\r\n   * @internal\r\n   */\r\n  setBus(bus) {\r\n    var _a;\r\n    (_a = this.onGameModeChangedSubscription) == null ? void 0 : _a.destroy();\r\n    this.onGameModeChangedSubscription = bus.on(\"GameModeChanged\", (gameMode) => {\r\n      switch (gameMode) {\r\n        case \"\":\r\n          this._gameMode.set(\r\n            0\r\n            /* UNKNOWN */\r\n          );\r\n          break;\r\n        case \"CAREER GAMEMODE\":\r\n          this._gameMode.set(\r\n            1\r\n            /* CAREER */\r\n          );\r\n          break;\r\n        case \"CHALLENGE GAMEMODE\":\r\n          this._gameMode.set(\r\n            2\r\n            /* CHALLENGE */\r\n          );\r\n          break;\r\n        case \"DISCOVERY GAMEMODE\":\r\n          this._gameMode.set(\r\n            3\r\n            /* DISCOVERY */\r\n          );\r\n          break;\r\n        case \"FREEFLIGHT GAMEMODE\":\r\n          this._gameMode.set(\r\n            4\r\n            /* FREEFLIGHT */\r\n          );\r\n          break;\r\n        default:\r\n          console.error(`Unknown game mode '${gameMode}'`);\r\n          this._gameMode.set(\r\n            0\r\n            /* UNKNOWN */\r\n          );\r\n      }\r\n    });\r\n  }\r\n}\r\nconst GameModeManager = _GameModeManager.instance;\r\nfunction loadFileAsBlob(url) {\r\n  return new Promise((resolve, reject) => {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open(\"GET\", url, true);\r\n    xhr.responseType = \"blob\";\r\n    xhr.onload = function(e) {\r\n      if (this.status === 200) {\r\n        resolve(this.response);\r\n      } else {\r\n        reject(this.response);\r\n      }\r\n    };\r\n    xhr.send();\r\n  });\r\n}\r\nBlob.prototype.arrayBuffer = function() {\r\n  return new Promise((resolve, reject) => {\r\n    const fileReader = new FileReader();\r\n    fileReader.onload = function(event) {\r\n      var _a;\r\n      const arrayBuffer = (_a = event.target) == null ? void 0 : _a.result;\r\n      if (typeof arrayBuffer === \"string\" || arrayBuffer === null || arrayBuffer === void 0) {\r\n        reject(\"ArrayBuffer is null\");\r\n        return;\r\n      }\r\n      resolve(arrayBuffer);\r\n    };\r\n    fileReader.readAsArrayBuffer(this);\r\n    fileReader.result;\r\n  });\r\n};\r\nconst uint8 = new Uint8Array(4);\r\nconst uint32 = new Uint32Array(uint8.buffer);\r\nfunction extractChunks(data) {\r\n  if (data[0] !== 137) throw new Error(\"Invalid .png file header\");\r\n  if (data[1] !== 80) throw new Error(\"Invalid .png file header\");\r\n  if (data[2] !== 78) throw new Error(\"Invalid .png file header\");\r\n  if (data[3] !== 71) throw new Error(\"Invalid .png file header\");\r\n  if (data[4] !== 13)\r\n    throw new Error(\"Invalid .png file header: possibly caused by DOS-Unix line ending conversion?\");\r\n  if (data[5] !== 10)\r\n    throw new Error(\"Invalid .png file header: possibly caused by DOS-Unix line ending conversion?\");\r\n  if (data[6] !== 26) throw new Error(\"Invalid .png file header\");\r\n  if (data[7] !== 10)\r\n    throw new Error(\"Invalid .png file header: possibly caused by DOS-Unix line ending conversion?\");\r\n  let ended = false;\r\n  const chunks = [];\r\n  let idx = 8;\r\n  while (idx < data.length) {\r\n    uint8[3] = data[idx++];\r\n    uint8[2] = data[idx++];\r\n    uint8[1] = data[idx++];\r\n    uint8[0] = data[idx++];\r\n    const length = uint32[0] + 4;\r\n    const chunk = new Uint8Array(length);\r\n    chunk[0] = data[idx++];\r\n    chunk[1] = data[idx++];\r\n    chunk[2] = data[idx++];\r\n    chunk[3] = data[idx++];\r\n    const name = String.fromCharCode(chunk[0]) + String.fromCharCode(chunk[1]) + String.fromCharCode(chunk[2]) + String.fromCharCode(chunk[3]);\r\n    if (!chunks.length && name !== \"IHDR\") {\r\n      throw new Error(\"IHDR header missing\");\r\n    }\r\n    if (name === \"IEND\") {\r\n      ended = true;\r\n      chunks.push({\r\n        name,\r\n        data: new Uint8Array(0)\r\n      });\r\n      break;\r\n    }\r\n    for (let i = 4; i < length; i++) {\r\n      chunk[i] = data[idx++];\r\n    }\r\n    uint8[3] = data[idx++];\r\n    uint8[2] = data[idx++];\r\n    uint8[1] = data[idx++];\r\n    uint8[0] = data[idx++];\r\n    const chunkData = new Uint8Array(chunk.buffer.slice(4));\r\n    chunks.push({\r\n      name,\r\n      data: chunkData\r\n    });\r\n  }\r\n  if (!ended) {\r\n    throw new Error(\".png file ended prematurely: no IEND header was found\");\r\n  }\r\n  return chunks;\r\n}\r\nfunction textDecode(data) {\r\n  let naming = true;\r\n  let text = \"\";\r\n  let name = \"\";\r\n  for (const code of data) {\r\n    if (naming) {\r\n      if (code) {\r\n        name += String.fromCharCode(code);\r\n      } else {\r\n        naming = false;\r\n      }\r\n    } else {\r\n      if (code) {\r\n        text += String.fromCharCode(code);\r\n      } else {\r\n        throw new Error(\"Invalid NULL character found. 0x00 character is not permitted in tEXt content\");\r\n      }\r\n    }\r\n  }\r\n  return {\r\n    keyword: name,\r\n    text\r\n  };\r\n}\r\nfunction readUint32(uint8array, offset) {\r\n  const byte1 = uint8array[offset++];\r\n  const byte2 = uint8array[offset++];\r\n  const byte3 = uint8array[offset++];\r\n  const byte4 = uint8array[offset];\r\n  return 0 | byte1 << 24 | byte2 << 16 | byte3 << 8 | byte4;\r\n}\r\nfunction readMetadata(buffer) {\r\n  const result = {\r\n    tEXt: {\r\n      keyword: \"\"\r\n    },\r\n    pHYs: { x: 0, y: 0 }\r\n  };\r\n  const chunks = extractChunks(new Uint8Array(buffer));\r\n  chunks.forEach((chunk) => {\r\n    if (chunk.name === \"tExt\") {\r\n      const textChunk = textDecode(chunk.data);\r\n      result.tEXt[textChunk.keyword] = textChunk.text;\r\n    } else if (chunk.name === \"pHYs\") {\r\n      result.pHYs = {\r\n        x: readUint32(chunk.data, 0),\r\n        y: readUint32(chunk.data, 4)\r\n      };\r\n    } else {\r\n      result[chunk.name] = true;\r\n    }\r\n  });\r\n  return result;\r\n}\r\nfunction isNotificationPermanent(notif) {\r\n  return notif.type === \"permanent\";\r\n}\r\nfunction isNotifPermanent(notif) {\r\n  return isNotificationPermanent(notif);\r\n}\r\nconst DEFAULT_DISPLAY_TIME = 3e3;\r\nfunction createTemporaryNotification(description, displayTimeMs, style, descriptionArguments, icon) {\r\n  const notifStyle = style != null ? style : \"info\";\r\n  return {\r\n    uuid: UUID.GenerateUuid(),\r\n    type: \"temporary\",\r\n    createdAt: /* @__PURE__ */ new Date(),\r\n    hide: Subject.create(false),\r\n    delayMs: Utils.Clamp(displayTimeMs != null ? displayTimeMs : DEFAULT_DISPLAY_TIME, 0, 6e4),\r\n    description,\r\n    style: notifStyle,\r\n    descriptionArguments,\r\n    icon: icon != null ? icon : getNotifIconFromStyle(notifStyle)\r\n  };\r\n}\r\nfunction createTemporaryNotif(displayTimeMs, description, style, descriptionArguments, icon) {\r\n  return createTemporaryNotification(description, displayTimeMs, style, descriptionArguments, icon);\r\n}\r\nfunction createPermanentNotification(title, description, displayTimeMs, style, descriptionArguments, icon, color, action) {\r\n  const notifStyle = style != null ? style : \"info\";\r\n  return {\r\n    uuid: UUID.GenerateUuid(),\r\n    type: \"permanent\",\r\n    createdAt: /* @__PURE__ */ new Date(),\r\n    hide: Subject.create(false),\r\n    delayMs: Utils.Clamp(displayTimeMs != null ? displayTimeMs : DEFAULT_DISPLAY_TIME, 0, 6e4),\r\n    description,\r\n    style: notifStyle,\r\n    descriptionArguments,\r\n    icon: icon != null ? icon : getNotifIconFromStyle(notifStyle),\r\n    title,\r\n    color,\r\n    action,\r\n    viewed: Subject.create(false)\r\n  };\r\n}\r\nfunction createPermanentNotif(displayTimeMs, title, description, style, descriptionArguments, icon, color, action) {\r\n  return createPermanentNotification(\r\n    title,\r\n    description,\r\n    displayTimeMs,\r\n    style,\r\n    descriptionArguments,\r\n    icon,\r\n    color,\r\n    action\r\n  );\r\n}\r\nfunction getNotifIconFromStyle(style) {\r\n  switch (style) {\r\n    case \"warning\":\r\n      return \"coui://html_ui/efb_ui/efb_os/Assets/icons/NoMargin/Warning.svg\";\r\n    case \"success\":\r\n      return \"coui://html_ui/efb_ui/efb_os/Assets/icons/NoMargin/Check_Full.svg\";\r\n    case \"error\":\r\n      return \"coui://html_ui/efb_ui/efb_os/Assets/icons/NoMargin/Failure_Full.svg\";\r\n    default:\r\n      return \"coui://html_ui/efb_ui/efb_os/Assets/icons/NoMargin/Info_Full.svg\";\r\n  }\r\n}\r\nfunction isPromise(value2) {\r\n  return value2 instanceof Promise;\r\n}\r\nfunction toPromise(value2) {\r\n  return isPromise(value2) ? value2 : Promise.resolve(value2);\r\n}\r\nfunction checkUserSetting(setting, type) {\r\n  if (!Object.values(type).includes(setting.get())) {\r\n    setting.resetToDefault();\r\n  }\r\n}\r\nconst basicFormatter = NumberFormatter.create({\r\n  maxDigits: 0,\r\n  forceDecimalZeroes: false,\r\n  nanString: \"-\"\r\n});\r\nvar StopwatchState = /* @__PURE__ */ ((StopwatchState2) => {\r\n  StopwatchState2[StopwatchState2[\"READY\"] = 0] = \"READY\";\r\n  StopwatchState2[StopwatchState2[\"RUNNING\"] = 1] = \"RUNNING\";\r\n  StopwatchState2[StopwatchState2[\"PAUSED\"] = 2] = \"PAUSED\";\r\n  return StopwatchState2;\r\n})(StopwatchState || {});\r\nclass Stopwatch {\r\n  constructor() {\r\n    this._timerSeconds = Subject.create(0);\r\n    this.timerSeconds = this._timerSeconds;\r\n    this._state = Subject.create(\r\n      0\r\n      /* READY */\r\n    );\r\n    this.state = this._state;\r\n    this.initialTime = 0;\r\n  }\r\n  start() {\r\n    const offset = this._state.get() === 2 ? this._timerSeconds.get() : 0;\r\n    this.initialTime = SimVar.GetSimVarValue(\"E:SIMULATION TIME\", \"seconds\") - offset;\r\n    this.intervalObj = setInterval(this.callback.bind(this), 500);\r\n    this._state.set(\r\n      1\r\n      /* RUNNING */\r\n    );\r\n  }\r\n  pause() {\r\n    clearInterval(this.intervalObj);\r\n    this._state.set(\r\n      2\r\n      /* PAUSED */\r\n    );\r\n  }\r\n  reset() {\r\n    clearInterval(this.intervalObj);\r\n    this.initialTime = 0;\r\n    this._timerSeconds.set(0);\r\n    this._state.set(\r\n      0\r\n      /* READY */\r\n    );\r\n  }\r\n  callback() {\r\n    this._timerSeconds.set(SimVar.GetSimVarValue(\"E:SIMULATION TIME\", \"seconds\") - this.initialTime);\r\n  }\r\n}\r\nconst _UnitFormatter = class _UnitFormatter {\r\n  /**\r\n   * Creates a function which formats measurement units to strings representing their abbreviated names.\r\n   * @param defaultString The string to output when the input unit cannot be formatted. Defaults to the empty string.\r\n   * @param charCase The case to enforce on the output string. Defaults to `'normal'`.\r\n   * @returns A function which formats measurement units to strings representing their abbreviated names.\r\n   */\r\n  static create(defaultString = \"\", charCase = \"normal\") {\r\n    var _a, _b;\r\n    switch (charCase) {\r\n      case \"upper\":\r\n        (_a = _UnitFormatter.UNIT_TEXT_UPPER) != null ? _a : _UnitFormatter.UNIT_TEXT_UPPER = _UnitFormatter.createUpperCase();\r\n        return (unit) => {\r\n          var _a2, _b2;\r\n          return (\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            (_b2 = (_a2 = _UnitFormatter.UNIT_TEXT_UPPER[unit.family]) == null ? void 0 : _a2[unit.name]) != null ? _b2 : defaultString\r\n          );\r\n        };\r\n      case \"lower\":\r\n        (_b = _UnitFormatter.UNIT_TEXT_LOWER) != null ? _b : _UnitFormatter.UNIT_TEXT_LOWER = _UnitFormatter.createLowerCase();\r\n        return (unit) => {\r\n          var _a2, _b2;\r\n          return (\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            (_b2 = (_a2 = _UnitFormatter.UNIT_TEXT_LOWER[unit.family]) == null ? void 0 : _a2[unit.name]) != null ? _b2 : defaultString\r\n          );\r\n        };\r\n      default:\r\n        return (unit) => {\r\n          var _a2, _b2;\r\n          return (_b2 = (_a2 = _UnitFormatter.UNIT_TEXT[unit.family]) == null ? void 0 : _a2[unit.name]) != null ? _b2 : defaultString;\r\n        };\r\n    }\r\n  }\r\n  /**\r\n   * Creates a record of lowercase unit abbreviated names.\r\n   * @returns A record of lowercase unit abbreviated names.\r\n   */\r\n  static createLowerCase() {\r\n    const lower = {};\r\n    for (const family in _UnitFormatter.UNIT_TEXT) {\r\n      const familyText = _UnitFormatter.UNIT_TEXT[family];\r\n      lower[family] = {};\r\n      for (const unit in familyText) {\r\n        lower[family][unit] = familyText[unit].toLowerCase();\r\n      }\r\n    }\r\n    return lower;\r\n  }\r\n  /**\r\n   * Creates a record of uppercase unit abbreviated names.\r\n   * @returns A record of uppercase unit abbreviated names.\r\n   */\r\n  static createUpperCase() {\r\n    const upper = {};\r\n    for (const family in _UnitFormatter.UNIT_TEXT) {\r\n      const familyText = _UnitFormatter.UNIT_TEXT[family];\r\n      upper[family] = {};\r\n      for (const unit in familyText) {\r\n        upper[family][unit] = familyText[unit].toUpperCase();\r\n      }\r\n    }\r\n    return upper;\r\n  }\r\n  /**\r\n   * Gets a mapping of unit family and name to text used by UnitFormatter to format units. The returned object maps\r\n   * unit families to objects that map unit names within each family to formatted text.\r\n   * @returns A mapping of unit family and name to text used by UnitFormatter to format units.\r\n   */\r\n  static getUnitTextMap() {\r\n    return _UnitFormatter.UNIT_TEXT;\r\n  }\r\n};\r\n_UnitFormatter.UNIT_TEXT = {\r\n  [UnitFamily.Distance]: {\r\n    [UnitType.METER.name]: \"M\",\r\n    [UnitType.FOOT.name]: \"FT\",\r\n    [UnitType.KILOMETER.name]: \"KM\",\r\n    [UnitType.NMILE.name]: \"NM\",\r\n    [UnitType.MILE.name]: \"SM\"\r\n  },\r\n  [UnitFamily.Angle]: {\r\n    [UnitType.DEGREE.name]: \"\u00B0\",\r\n    [UnitType.RADIAN.name]: \"rad\"\r\n  },\r\n  [UnitFamily.Duration]: {\r\n    [UnitType.SECOND.name]: \"SEC\",\r\n    [UnitType.MINUTE.name]: \"MIN\",\r\n    [UnitType.HOUR.name]: \"HR\"\r\n  },\r\n  [UnitFamily.Weight]: {\r\n    [UnitType.KILOGRAM.name]: \"KG\",\r\n    [UnitType.POUND.name]: \"LBS\",\r\n    [UnitType.LITER_FUEL.name]: \"LT\",\r\n    [UnitType.GALLON_FUEL.name]: \"GAL\",\r\n    [UnitType.IMP_GALLON_FUEL.name]: \"IG\"\r\n  },\r\n  [UnitFamily.Volume]: {\r\n    [UnitType.LITER.name]: \"L\",\r\n    [UnitType.GALLON.name]: \"GAL\"\r\n  },\r\n  [UnitFamily.Pressure]: {\r\n    [UnitType.HPA.name]: \"HPA\",\r\n    [UnitType.IN_HG.name]: \"IN\"\r\n  },\r\n  [UnitFamily.Temperature]: {\r\n    [UnitType.CELSIUS.name]: \"\u00B0C\",\r\n    [UnitType.FAHRENHEIT.name]: \"\u00B0F\"\r\n  },\r\n  [UnitFamily.TemperatureDelta]: {\r\n    [UnitType.DELTA_CELSIUS.name]: \"\u00B0C\",\r\n    [UnitType.DELTA_FAHRENHEIT.name]: \"\u00B0F\"\r\n  },\r\n  [UnitFamily.Speed]: {\r\n    [UnitType.KNOT.name]: \"KT\",\r\n    [UnitType.KPH.name]: \"KM/H\",\r\n    [UnitType.MPM.name]: \"MPM\",\r\n    [UnitType.FPM.name]: \"FPM\"\r\n  },\r\n  [UnitFamily.WeightFlux]: {\r\n    [UnitType.KGH.name]: \"KG/HR\",\r\n    [UnitType.PPH.name]: \"LB/HR\",\r\n    [UnitType.LPH_FUEL.name]: \"LT/HR\",\r\n    [UnitType.GPH_FUEL.name]: \"GAL/HR\",\r\n    [UnitType.IGPH_FUEL.name]: \"IG/HR\"\r\n  }\r\n};\r\nlet UnitFormatter = _UnitFormatter;\r\nfunction value(arg) {\r\n  return typeof arg === \"function\" ? arg() : arg;\r\n}\r\nfunction offsetMousePosition(e, vec, element = null) {\r\n  const mousePosition = elementOffset(e.target, element);\r\n  vec[0] = mousePosition[0] + e.offsetX;\r\n  vec[1] = mousePosition[1] + e.offsetY;\r\n}\r\nfunction elementOffset(from, limit = null) {\r\n  let leftOffset = 0;\r\n  let topOffset = 0;\r\n  let currentElement = from;\r\n  do {\r\n    leftOffset += currentElement.offsetLeft;\r\n    topOffset += currentElement.offsetTop;\r\n    currentElement = currentElement.parentNode;\r\n  } while (currentElement !== null && currentElement !== limit);\r\n  return new Float64Array([leftOffset, topOffset]);\r\n}\r\nconst measure = (_target, propertyKey, descriptor) => {\r\n  const originalMethod = descriptor.value;\r\n  descriptor.value = function(...args) {\r\n    const start = performance.now();\r\n    const result = originalMethod.apply(this, args);\r\n    const finish = performance.now();\r\n    console.log(`Execution time of ${_target.constructor.name}.${propertyKey} took ${finish - start} ms`);\r\n    return result;\r\n  };\r\n  return descriptor;\r\n};\r\nclass AppContainer extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.appMainRef = FSComponent.createRef();\r\n    this.appStackRef = FSComponent.createRef();\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.props.appViewService.onAppContainerRendered(this.appStackRef.instance);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.appMainRef, class: `app-container` }, /* @__PURE__ */ FSComponent.buildComponent(DefaultAppViewStackContainer, { ref: this.appStackRef }));\r\n  }\r\n}\r\nclass DefaultAppViewStackContainer extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.rootRef = FSComponent.createRef();\r\n  }\r\n  renderView(view) {\r\n    FSComponent.render(view, this.rootRef.instance);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.rootRef, class: mergeClassProp(\"app-view-stack\", this.props.class) });\r\n  }\r\n}\r\nfunction Memoize(args) {\r\n  let hashFunction;\r\n  let duration;\r\n  let tags;\r\n  {\r\n    hashFunction = args;\r\n  }\r\n  return (target, propertyKey, descriptor) => {\r\n    if (descriptor.value != null) {\r\n      descriptor.value = getNewFunction(descriptor.value, hashFunction, duration, tags);\r\n    } else if (descriptor.get != null) {\r\n      descriptor.get = getNewFunction(descriptor.get, hashFunction, duration, tags);\r\n    } else {\r\n      throw \"Only put a Memoize() decorator on a method or get accessor.\";\r\n    }\r\n  };\r\n}\r\nconst clearCacheTagsMap = /* @__PURE__ */ new Map();\r\nfunction getNewFunction(originalMethod, hashFunction, duration = 0, tags) {\r\n  const propMapName = Symbol(`__memoized_map__`);\r\n  return function(...args) {\r\n    let returnedValue;\r\n    if (!this.hasOwnProperty(propMapName)) {\r\n      Object.defineProperty(this, propMapName, {\r\n        configurable: false,\r\n        enumerable: false,\r\n        writable: false,\r\n        value: /* @__PURE__ */ new Map()\r\n      });\r\n    }\r\n    let myMap = this[propMapName];\r\n    if (Array.isArray(tags)) {\r\n      for (const tag of tags) {\r\n        if (clearCacheTagsMap.has(tag)) {\r\n          clearCacheTagsMap.get(tag).push(myMap);\r\n        } else {\r\n          clearCacheTagsMap.set(tag, [myMap]);\r\n        }\r\n      }\r\n    }\r\n    if (hashFunction || args.length > 0 || duration > 0) {\r\n      let hashKey;\r\n      if (hashFunction === true) {\r\n        hashKey = args.map((a) => a.toString()).join(\"!\");\r\n      } else if (hashFunction) {\r\n        hashKey = hashFunction.apply(this, args);\r\n      } else {\r\n        hashKey = args[0];\r\n      }\r\n      const timestampKey = `${hashKey}__timestamp`;\r\n      let isExpired = false;\r\n      if (duration > 0) {\r\n        if (!myMap.has(timestampKey)) {\r\n          isExpired = true;\r\n        } else {\r\n          let timestamp = myMap.get(timestampKey);\r\n          isExpired = Date.now() - timestamp > duration;\r\n        }\r\n      }\r\n      if (myMap.has(hashKey) && !isExpired) {\r\n        returnedValue = myMap.get(hashKey);\r\n      } else {\r\n        returnedValue = originalMethod.apply(this, args);\r\n        myMap.set(hashKey, returnedValue);\r\n        if (duration > 0) {\r\n          myMap.set(timestampKey, Date.now());\r\n        }\r\n      }\r\n    } else {\r\n      const hashKey = this;\r\n      if (myMap.has(hashKey)) {\r\n        returnedValue = myMap.get(hashKey);\r\n      } else {\r\n        returnedValue = originalMethod.apply(this, args);\r\n        myMap.set(hashKey, returnedValue);\r\n      }\r\n    }\r\n    return returnedValue;\r\n  };\r\n}\r\nvar GamepadEvents = /* @__PURE__ */ ((GamepadEvents2) => {\r\n  GamepadEvents2[\"JOYSTICK_LEFT_X_AXIS\"] = \"JOYSTICK_LEFT_X_AXIS\";\r\n  GamepadEvents2[\"JOYSTICK_LEFT_Y_AXIS\"] = \"JOYSTICK_LEFT_Y_AXIS\";\r\n  GamepadEvents2[\"JOYSTICK_RIGHT_X_AXIS\"] = \"JOYSTICK_RIGHT_X_AXIS\";\r\n  GamepadEvents2[\"JOYSTICK_RIGHT_Y_AXIS\"] = \"JOYSTICK_RIGH_Y_AXIS\";\r\n  GamepadEvents2[\"BUTTON_A\"] = \"BUTTON_A\";\r\n  GamepadEvents2[\"BUTTON_B\"] = \"BUTTON_B\";\r\n  GamepadEvents2[\"BUTTON_Y\"] = \"BUTTON_Y\";\r\n  GamepadEvents2[\"BUTTON_X\"] = \"BUTTON_X\";\r\n  GamepadEvents2[\"JOYDIR_LEFT\"] = \"JOYDIR_LEFT\";\r\n  GamepadEvents2[\"JOYDIR_RIGHT\"] = \"JOYDIR_RIGHT\";\r\n  GamepadEvents2[\"JOYDIR_UP\"] = \"JOYDIR_UP\";\r\n  GamepadEvents2[\"JOYDIR_DOWN\"] = \"JOYDIR_DOWN\";\r\n  return GamepadEvents2;\r\n})(GamepadEvents || {});\r\nconst _InputsListener = class _InputsListener extends ViewListener.ViewListener {\r\n  static addInputChangeCallback(context, action, callback) {\r\n    const idWatcher = \"InputWatcher_\" + context + \"_\" + action + \"_\" + UUID.GenerateUuid();\r\n    _InputsListener.inputsListener.trigger(\"ADD_INPUT_WATCHER\", idWatcher, context, action);\r\n    _InputsListener.inputsListener.on(\"InputListener.InputChange\", (id, down) => {\r\n      if (id === idWatcher) {\r\n        callback(down);\r\n      }\r\n    });\r\n    return idWatcher;\r\n  }\r\n  static removeInputChangeCallback(id) {\r\n    _InputsListener.inputsListener.trigger(\"REMOVE_INPUT_WATCHER\", id);\r\n  }\r\n};\r\n_InputsListener.isLoaded = Subject.create(false);\r\n_InputsListener.inputsListener = RegisterViewListener(\r\n  \"JS_LISTENER_INPUTS\",\r\n  () => _InputsListener.isLoaded.set(true)\r\n);\r\nlet InputsListener = _InputsListener;\r\nclass GamepadInputManager {\r\n  constructor(element) {\r\n    this.element = element;\r\n    this.defaultScrollDirection = \"all\";\r\n    this.defaultScrollSpeed = 1e3;\r\n    this.isScrollEnabled = false;\r\n    this.scrollInputs = [{ id: \"\" }, { id: \"\" }, { id: \"\" }, { id: \"\" }];\r\n    this.scrollIntervalDelayMs = 10;\r\n    this.pxPerScroll = 0;\r\n    this.scrollDirection = this.defaultScrollDirection;\r\n    this.mouseEnterScrollCallback = this.initScrollInputs.bind(this);\r\n    this.mouseLeaveScrollCallback = this.clearScrollInputs.bind(this);\r\n  }\r\n  addCustomEvent(inputContext, inputAction, callback) {\r\n    return InputsListener.addInputChangeCallback(inputContext, inputAction, callback);\r\n  }\r\n  removeCustonEvent(eventId) {\r\n    InputsListener.removeInputChangeCallback(eventId);\r\n  }\r\n  /**\r\n   * Allows an HTML element to be scrolled through using a gamepad.\r\n   * @param direction The direction where it is allowed to scroll. All directions are allowed by default.\r\n   * @param scrollSpeed The scroll speed in px/s. 1000 by default.\r\n   */\r\n  enableScroll(direction = this.defaultScrollDirection, scrollSpeed = this.defaultScrollSpeed) {\r\n    this.disableScroll();\r\n    this.scrollDirection = direction;\r\n    this.pxPerScroll = scrollSpeed * (this.scrollIntervalDelayMs / 1e3);\r\n    this.element.addEventListener(\"mouseenter\", this.mouseEnterScrollCallback);\r\n    this.element.addEventListener(\"mouseleave\", this.mouseLeaveScrollCallback);\r\n  }\r\n  /**\r\n   * Prevents an HTML element to be scrolled through using a gamepad.\r\n   */\r\n  disableScroll() {\r\n    this.element.removeEventListener(\"mouseenter\", this.mouseEnterScrollCallback);\r\n    this.element.removeEventListener(\"mouseleave\", this.mouseLeaveScrollCallback);\r\n    this.clearScrollInputs();\r\n  }\r\n  handleScroll(isScrolling, input, getScrollOptions) {\r\n    if (isScrolling) {\r\n      input.timeout = setInterval(() => {\r\n        this.element.scroll(getScrollOptions());\r\n      }, this.scrollIntervalDelayMs);\r\n    } else {\r\n      clearInterval(input.timeout);\r\n    }\r\n  }\r\n  setupVerticalScroll() {\r\n    this.scrollInputs[\r\n      0\r\n      /* UP */\r\n    ].id = InputsListener.addInputChangeCallback(\r\n      \"MENU\",\r\n      \"KEY_MENU_SR_SCROLL_UP\",\r\n      (isScrolling) => this.handleScroll(isScrolling, this.scrollInputs[\r\n        0\r\n        /* UP */\r\n      ], () => ({\r\n        top: this.element.scrollTop - this.pxPerScroll\r\n      }))\r\n    );\r\n    this.scrollInputs[\r\n      2\r\n      /* DOWN */\r\n    ].id = InputsListener.addInputChangeCallback(\r\n      \"MENU\",\r\n      \"KEY_MENU_SR_SCROLL_DOWN\",\r\n      (isScrolling) => this.handleScroll(isScrolling, this.scrollInputs[\r\n        2\r\n        /* DOWN */\r\n      ], () => ({\r\n        top: this.element.scrollTop + this.pxPerScroll\r\n      }))\r\n    );\r\n  }\r\n  setupHorizontalScroll() {\r\n    this.scrollInputs[\r\n      3\r\n      /* LEFT */\r\n    ].id = InputsListener.addInputChangeCallback(\r\n      \"MENU_CORE\",\r\n      \"KEY_MENU_SR_SCROLL_LEFT\",\r\n      (isScrolling) => this.handleScroll(isScrolling, this.scrollInputs[\r\n        3\r\n        /* LEFT */\r\n      ], () => ({\r\n        left: this.element.scrollLeft - this.pxPerScroll\r\n      }))\r\n    );\r\n    this.scrollInputs[\r\n      1\r\n      /* RIGHT */\r\n    ].id = InputsListener.addInputChangeCallback(\r\n      \"MENU_CORE\",\r\n      \"KEY_MENU_SR_SCROLL_RIGHT\",\r\n      (isScrolling) => this.handleScroll(isScrolling, this.scrollInputs[\r\n        1\r\n        /* RIGHT */\r\n      ], () => ({\r\n        left: this.element.scrollLeft + this.pxPerScroll\r\n      }))\r\n    );\r\n  }\r\n  initScrollInputs() {\r\n    if (this.isScrollEnabled) {\r\n      return;\r\n    }\r\n    this.isScrollEnabled = true;\r\n    switch (this.scrollDirection) {\r\n      case \"vertical\":\r\n      case \"y\":\r\n        this.setupVerticalScroll();\r\n        break;\r\n      case \"horizontal\":\r\n      case \"x\":\r\n        this.setupHorizontalScroll();\r\n        break;\r\n      default:\r\n        this.setupVerticalScroll();\r\n        this.setupHorizontalScroll();\r\n    }\r\n  }\r\n  clearScrollInputs() {\r\n    this.scrollInputs.forEach((scrollInput) => {\r\n      InputsListener.removeInputChangeCallback(scrollInput.id);\r\n      clearInterval(scrollInput.timeout);\r\n    });\r\n    this.isScrollEnabled = false;\r\n  }\r\n}\r\nconst _GamepadUiComponent = class _GamepadUiComponent extends DisplayComponent {\r\n  constructor() {\r\n    var _a, _b;\r\n    super(...arguments);\r\n    this._gamepadUiSubs = [];\r\n    this.gamepadUiComponentRef = FSComponent.createRef();\r\n    this._nextHandler = Subject.create(void 0);\r\n    this.nextHandler = this._nextHandler;\r\n    this.disabled = SubscribableUtils.toSubscribable((_a = this.props.disabled) != null ? _a : false, true);\r\n    this.visible = SubscribableUtils.toSubscribable((_b = this.props.visible) != null ? _b : true, true);\r\n    this.componentClickListener = this.handleComponentClick.bind(this);\r\n  }\r\n  setNextGamepadEventHandler(ref) {\r\n    this._nextHandler.set(ref);\r\n  }\r\n  deletePreviousGamepadEventHandler() {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n  handleGamepadEvent(gamepadEvent) {\r\n    console.log(`Received ${gamepadEvent} in handleMoveEvent`);\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    const classes = mergeClassProp(this.props.class);\r\n    Object.keys(classes).forEach((className) => {\r\n      const subscribable = SubscribableUtils.toSubscribable(classes[className], true);\r\n      this._gamepadUiSubs.push(\r\n        subscribable.sub((value2) => {\r\n          this.gamepadUiComponentRef.instance.classList.toggle(className, value2);\r\n        }, true)\r\n      );\r\n    });\r\n    this._gamepadUiSubs.push(\r\n      this.visible.sub((isVisible) => {\r\n        this.gamepadUiComponentRef.instance.hidden = !isVisible;\r\n      }, true)\r\n    );\r\n    if (SubscribableUtils.isSubscribable(this.props.disabled)) {\r\n      this._gamepadUiSubs.push(\r\n        this.props.disabled.sub((disabled) => {\r\n          disabled ? this.disable() : this.enable();\r\n        }, true)\r\n      );\r\n    } else {\r\n      this.props.disabled ? this.disable() : this.enable();\r\n    }\r\n    window.addEventListener(\"click\", this.componentClickListener);\r\n    if (this.props.onboardingStepId === void 0) {\r\n      return;\r\n    }\r\n    this.gamepadUiComponentRef.instance.setAttribute(\"id\", this.props.onboardingStepId);\r\n  }\r\n  handleComponentClick(e) {\r\n    if (!this.gamepadUiComponentRef.instance.contains(e.target)) {\r\n      this.onClickOutOfComponent(e);\r\n    }\r\n  }\r\n  onButtonAPressed() {\r\n    if (this.props.onButtonAPressed !== void 0) {\r\n      this.props.onButtonAPressed();\r\n    }\r\n  }\r\n  onButtonBPressed() {\r\n    if (this.props.onButtonBPressed !== void 0) {\r\n      this.props.onButtonBPressed();\r\n    }\r\n  }\r\n  onClickOutOfComponent(_e) {\r\n    return;\r\n  }\r\n  enable() {\r\n    this.gamepadUiComponentRef.instance.removeAttribute(\"disabled\");\r\n  }\r\n  disable() {\r\n    this.gamepadUiComponentRef.instance.setAttribute(\"disabled\", \"\");\r\n  }\r\n  show() {\r\n    this.gamepadUiComponentRef.instance.style.visibility = \"visible\";\r\n  }\r\n  hide() {\r\n    this.gamepadUiComponentRef.instance.style.visibility = \"hidden\";\r\n  }\r\n  toggleFocus(value2) {\r\n    if (value2 !== void 0) {\r\n      if (value2 === true) {\r\n        this.gamepadUiComponentRef.instance.classList.add(_GamepadUiComponent.FOCUS_CLASS);\r\n      } else {\r\n        this.gamepadUiComponentRef.instance.classList.remove(_GamepadUiComponent.FOCUS_CLASS);\r\n      }\r\n      return;\r\n    }\r\n    this.gamepadUiComponentRef.instance.classList.toggle(_GamepadUiComponent.FOCUS_CLASS);\r\n  }\r\n  getComponentRect() {\r\n    return this.gamepadUiComponentRef.instance.getBoundingClientRect();\r\n  }\r\n  destroy() {\r\n    this._gamepadUiSubs.forEach((s) => s.destroy());\r\n    window.removeEventListener(\"click\", this.componentClickListener);\r\n    super.destroy();\r\n  }\r\n};\r\n_GamepadUiComponent.FOCUS_CLASS = \"focus\";\r\nlet GamepadUiComponent = _GamepadUiComponent;\r\nclass GamepadUiParser {\r\n  constructor() {\r\n    this.gamepadUiViewVNode = null;\r\n  }\r\n  /** On veut focus le premier \u00E9l\u00E9ment */\r\n  bindVNodeReference(gamepadUiViewVNode) {\r\n    this.gamepadUiViewVNode = gamepadUiViewVNode;\r\n    this.focusFirstElement();\r\n  }\r\n  focusFirstElement() {\r\n    if (this.currentElement = this.findFirstElement()) {\r\n      this.currentElement.instance.toggleFocus(true);\r\n    }\r\n  }\r\n  goUp() {\r\n    this.goDir(\"UP\");\r\n  }\r\n  goRight() {\r\n    this.goDir(\"RIGHT\");\r\n  }\r\n  goDown() {\r\n    this.goDir(\"DOWN\");\r\n  }\r\n  goLeft() {\r\n    this.goDir(\"LEFT\");\r\n  }\r\n  pushButtonA() {\r\n    var _a;\r\n    (_a = this.currentElement) == null ? void 0 : _a.instance.onButtonAPressed();\r\n  }\r\n  pushButtonB() {\r\n    var _a;\r\n    (_a = this.currentElement) == null ? void 0 : _a.instance.onButtonBPressed();\r\n  }\r\n  goDir(dir) {\r\n    const HTMLElementList = this.parseDOM();\r\n    if (!this.currentElement || HTMLElementList === null) {\r\n      return;\r\n    }\r\n    const nextElement = this.findClosestNode(this.currentElement, HTMLElementList, dir);\r\n    if (nextElement !== null) {\r\n      this.currentElement.instance.toggleFocus(false);\r\n      this.currentElement = nextElement;\r\n      this.currentElement.instance.toggleFocus(true);\r\n    }\r\n  }\r\n  parseDOM() {\r\n    if (this.gamepadUiViewVNode === null) {\r\n      throw new Error(`Can't parse DOM, VNode is null`);\r\n    }\r\n    const VNodeList = [];\r\n    FSComponent.visitNodes(this.gamepadUiViewVNode, (node) => {\r\n      if (node.instance instanceof GamepadUiComponent) {\r\n        const ref = FSComponent.createRef();\r\n        ref.instance = node.instance;\r\n        VNodeList.push(ref);\r\n      }\r\n      return false;\r\n    });\r\n    return VNodeList.length ? VNodeList : null;\r\n  }\r\n  findFirstElement() {\r\n    const HTMLElementList = this.parseDOM();\r\n    if (HTMLElementList === null) {\r\n      return null;\r\n    }\r\n    return HTMLElementList[0];\r\n  }\r\n  /** On r\u00E9duit la liste dont le top est en dessous du bottom du current node. */\r\n  findClosestNode(currentGamepadUiComponent, gamepadUiComponentList, direction) {\r\n    let candidateIndex = -1;\r\n    switch (direction) {\r\n      case \"UP\":\r\n        candidateIndex = this.findBestCandidate(\r\n          currentGamepadUiComponent,\r\n          gamepadUiComponentList,\r\n          \"bottom\",\r\n          \"top\"\r\n        );\r\n        break;\r\n      case \"RIGHT\":\r\n        candidateIndex = this.findBestCandidate(\r\n          currentGamepadUiComponent,\r\n          gamepadUiComponentList,\r\n          \"left\",\r\n          \"right\"\r\n        );\r\n        break;\r\n      case \"DOWN\":\r\n        candidateIndex = this.findBestCandidate(\r\n          currentGamepadUiComponent,\r\n          gamepadUiComponentList,\r\n          \"top\",\r\n          \"bottom\"\r\n        );\r\n        break;\r\n      case \"LEFT\":\r\n        candidateIndex = this.findBestCandidate(\r\n          currentGamepadUiComponent,\r\n          gamepadUiComponentList,\r\n          \"right\",\r\n          \"left\"\r\n        );\r\n        break;\r\n    }\r\n    if (candidateIndex !== -1 && candidateIndex < gamepadUiComponentList.length) {\r\n      return gamepadUiComponentList[candidateIndex];\r\n    }\r\n    return null;\r\n  }\r\n  findBestCandidate(currentGamepadUiComponent, gamepadUiComponentList, side1, side2) {\r\n    const htmlElementCandidates = [];\r\n    let closestDistance = Infinity;\r\n    let candidateIndex = -1;\r\n    const currentHTMLElementRect = currentGamepadUiComponent.instance.getComponentRect();\r\n    gamepadUiComponentList.forEach((htmlElement, index2) => {\r\n      const htmlElementRect = htmlElement.instance.getComponentRect();\r\n      if (this.isRectPosValid(htmlElementRect, currentHTMLElementRect, side1, side2, false)) {\r\n        if (!htmlElementCandidates.some(\r\n          (htmlElementCandidate) => this.isRectPosValid(\r\n            htmlElementRect,\r\n            htmlElementCandidate.instance.getComponentRect(),\r\n            side1,\r\n            side1,\r\n            true\r\n          )\r\n        )) {\r\n          htmlElementCandidates.push(htmlElement);\r\n          const corner = side1 === \"bottom\" || side1 === \"top\" ? \"left\" : \"top\";\r\n          const distance = this.distances1D(htmlElementRect, currentHTMLElementRect, corner);\r\n          if (distance <= closestDistance) {\r\n            closestDistance = distance;\r\n            candidateIndex = index2;\r\n          }\r\n        }\r\n      }\r\n    });\r\n    return candidateIndex;\r\n  }\r\n  isRectPosValid(rect1, rect2, side1, side2, strict) {\r\n    if (side1 === \"bottom\" || side1 === \"right\") {\r\n      if (strict) {\r\n        return rect1[side1] < rect2[side2];\r\n      } else {\r\n        return rect1[side1] <= rect2[side2];\r\n      }\r\n    } else {\r\n      if (strict) {\r\n        return rect1[side1] > rect2[side2];\r\n      } else {\r\n        return rect1[side1] >= rect2[side2];\r\n      }\r\n    }\r\n  }\r\n  distances1D(rect1, rect2, side) {\r\n    return Math.abs(rect2[side] - rect1[side]);\r\n  }\r\n}\r\nclass UiView extends DisplayComponent {\r\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n  onOpen() {\r\n  }\r\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n  onClose() {\r\n  }\r\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n  onResume() {\r\n  }\r\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n  onPause() {\r\n  }\r\n  // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\r\n  onUpdate(time) {\r\n  }\r\n  destroy() {\r\n    super.destroy();\r\n  }\r\n}\r\nclass GamepadUiView extends UiView {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.gamepadUiViewRef = FSComponent.createRef();\r\n    this.gamepadUiParser = new GamepadUiParser();\r\n    this._nextHandler = Subject.create(void 0);\r\n    this.nextHandler = this._nextHandler;\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.gamepadUiParser.bindVNodeReference(node);\r\n  }\r\n  setNextGamepadEventHandler(ref) {\r\n    this._nextHandler.set(ref);\r\n  }\r\n  deletePreviousGamepadEventHandler() {\r\n    this._nextHandler.set(void 0);\r\n  }\r\n  handleGamepadEvent(_gamepadEvent) {\r\n    if (_gamepadEvent === GamepadEvents.BUTTON_B) {\r\n      this.gamepadUiParser.pushButtonB();\r\n    }\r\n    const nextHandler = this._nextHandler.get();\r\n    if (nextHandler !== void 0) {\r\n      return nextHandler.handleGamepadEvent(_gamepadEvent);\r\n    }\r\n    switch (_gamepadEvent) {\r\n      case GamepadEvents.JOYDIR_UP:\r\n        this.gamepadUiParser.goUp();\r\n        break;\r\n      case GamepadEvents.JOYDIR_RIGHT:\r\n        this.gamepadUiParser.goRight();\r\n        break;\r\n      case GamepadEvents.JOYDIR_DOWN:\r\n        this.gamepadUiParser.goDown();\r\n        break;\r\n      case GamepadEvents.JOYDIR_LEFT:\r\n        this.gamepadUiParser.goLeft();\r\n        break;\r\n      case GamepadEvents.BUTTON_A:\r\n        this.gamepadUiParser.pushButtonA();\r\n        break;\r\n    }\r\n  }\r\n}\r\nvar ViewBootMode = /* @__PURE__ */ ((ViewBootMode2) => {\r\n  ViewBootMode2[ViewBootMode2[\"COLD\"] = 0] = \"COLD\";\r\n  ViewBootMode2[ViewBootMode2[\"HOT\"] = 1] = \"HOT\";\r\n  return ViewBootMode2;\r\n})(ViewBootMode || {});\r\nvar ViewSuspendMode = /* @__PURE__ */ ((ViewSuspendMode2) => {\r\n  ViewSuspendMode2[ViewSuspendMode2[\"SLEEP\"] = 0] = \"SLEEP\";\r\n  ViewSuspendMode2[ViewSuspendMode2[\"TERMINATE\"] = 1] = \"TERMINATE\";\r\n  return ViewSuspendMode2;\r\n})(ViewSuspendMode || {});\r\nconst defaultViewOptions = {\r\n  BootMode: ViewBootMode.COLD,\r\n  SuspendMode: ViewSuspendMode.SLEEP\r\n};\r\nclass AppViewService {\r\n  constructor(bus) {\r\n    this.registeredUiViewEntries = /* @__PURE__ */ new Map();\r\n    this.appViewStack = [];\r\n    this.registeredUiViewPromises = [];\r\n    this.hasInitialized = false;\r\n    this._currentUiView = Subject.create(null);\r\n    this.currentUiView = this._currentUiView;\r\n    this.eventListener = {\r\n      pause: [],\r\n      resume: []\r\n    };\r\n    this.bus = bus;\r\n    this.goHomeSub = this.bus.on(\r\n      \"_efb_appviewservice_go_home\",\r\n      () => {\r\n        const steps = this.appViewStack.length - 1;\r\n        if (steps >= 1) {\r\n          this.goBack(steps);\r\n        }\r\n      },\r\n      true\r\n    );\r\n  }\r\n  onOpen() {\r\n    var _a, _b;\r\n    this.goHomeSub.resume();\r\n    (_b = (_a = this.activeUiViewEntry) == null ? void 0 : _a.ref) == null ? void 0 : _b.onOpen();\r\n  }\r\n  onClose() {\r\n    var _a, _b;\r\n    this.goHomeSub.pause();\r\n    (_b = (_a = this.activeUiViewEntry) == null ? void 0 : _a.ref) == null ? void 0 : _b.onClose();\r\n  }\r\n  onResume() {\r\n    var _a, _b;\r\n    this.goHomeSub.resume();\r\n    (_b = (_a = this.activeUiViewEntry) == null ? void 0 : _a.ref) == null ? void 0 : _b.onResume();\r\n  }\r\n  onPause() {\r\n    var _a, _b;\r\n    this.goHomeSub.pause();\r\n    (_b = (_a = this.activeUiViewEntry) == null ? void 0 : _a.ref) == null ? void 0 : _b.onPause();\r\n  }\r\n  /**\r\n   * Registers and renders a view (page or popup) to be opened by the service.\r\n   * @param key The UiView string key.\r\n   * @param type The view type\r\n   * @param vNodeFactory A function that returns a {@link UiView} VNode for the key\r\n   * @param options The {@link UiView} {@link ViewOptions}\r\n   * @returns UiViewEntry\r\n   */\r\n  registerView(key, type, vNodeFactory, options) {\r\n    if (this.registeredUiViewEntries.has(key)) {\r\n      throw new Error(`View \"${key}\" is already used`);\r\n    } else if (typeof vNodeFactory !== \"function\") {\r\n      throw new Error(\"vNodeFactory has to be a function returning a VNode\");\r\n    }\r\n    const viewOptions = Object.assign({}, defaultViewOptions, options);\r\n    const appViewEntry = {\r\n      key,\r\n      render: vNodeFactory,\r\n      vNode: vNodeFactory,\r\n      ref: null,\r\n      containerRef: FSComponent.createRef(),\r\n      isVisible: Subject.create(false),\r\n      layer: Subject.create(-1),\r\n      type: Subject.create(type),\r\n      isInit: false,\r\n      viewOptions\r\n    };\r\n    if (viewOptions.BootMode === ViewBootMode.HOT) {\r\n      this.initViewEntry(appViewEntry);\r\n    }\r\n    this.registeredUiViewEntries.set(key, appViewEntry);\r\n    return appViewEntry;\r\n  }\r\n  registerPage(key, vNodeFactory, options) {\r\n    return this.registerView(key, \"page\", vNodeFactory, options);\r\n  }\r\n  registerPopup(key, vNodeFactory, options) {\r\n    return this.registerView(key, \"popup\", vNodeFactory, options);\r\n  }\r\n  async killView(viewEntry) {\r\n    var _a;\r\n    if (viewEntry.isInit === false) {\r\n      return;\r\n    }\r\n    if (this.appViewStack.find((view) => view.key === viewEntry.key)) {\r\n      throw new Error(\"You must close your view before killing it\");\r\n    }\r\n    viewEntry.isInit = false;\r\n    (_a = viewEntry.ref) == null ? void 0 : _a.destroy();\r\n    viewEntry.containerRef.instance.destroy();\r\n    viewEntry.ref = null;\r\n    viewEntry.containerRef = FSComponent.createRef();\r\n    viewEntry.vNode = viewEntry.render.bind(viewEntry);\r\n    return new Promise((resolve) => {\r\n      if (viewEntry.viewOptions.BootMode === ViewBootMode.HOT) {\r\n        this.initViewEntry(viewEntry);\r\n      }\r\n      resolve();\r\n    });\r\n  }\r\n  /**\r\n   * @param entry a {@link UiViewEntry}\r\n   * @param shouldOpen opens the view on initialization, defaults to false\r\n   */\r\n  initViewEntry(entry, shouldOpen = false) {\r\n    var _a;\r\n    if (entry.isInit) {\r\n      return;\r\n    }\r\n    entry.isInit = true;\r\n    entry.vNode = value(entry.vNode);\r\n    entry.ref = entry.vNode.instance;\r\n    (_a = this.appViewRef) == null ? void 0 : _a.renderView(\r\n      /* @__PURE__ */ FSComponent.buildComponent(\r\n        AppViewWrapper,\r\n        {\r\n          viewName: entry.key,\r\n          isVisible: entry.isVisible,\r\n          type: entry.type,\r\n          layer: entry.layer,\r\n          ref: entry.containerRef\r\n        },\r\n        entry.vNode\r\n      )\r\n    );\r\n    shouldOpen && entry.ref.onOpen();\r\n  }\r\n  /**\r\n   * Destroys every view in registered view entries and resets the view stack.\r\n   */\r\n  unload() {\r\n    var _a;\r\n    this.registeredUiViewPromises = [];\r\n    for (const viewEntry of this.registeredUiViewEntries.values()) {\r\n      (_a = viewEntry.ref) == null ? void 0 : _a.destroy();\r\n    }\r\n    this.registeredUiViewEntries.clear();\r\n    this.appViewStack.splice(0, this.appViewStack.length);\r\n    this.hasInitialized = false;\r\n  }\r\n  /**\r\n   *\r\n   * @param homePageUiViewKey the string key of the {@link UiView}\r\n   * @returns a Promise resolving when all pages are initialized\r\n   */\r\n  async initialize(homePageUiViewKey) {\r\n    if (this.hasInitialized) {\r\n      return Promise.resolve();\r\n    }\r\n    return Promise.all(this.registeredUiViewPromises).then(() => {\r\n      this.initializeAppViewStack(homePageUiViewKey);\r\n      this.hasInitialized = true;\r\n    });\r\n  }\r\n  /**\r\n   * @returns the current active view entry.\r\n   */\r\n  get activeUiViewEntry() {\r\n    const activeViewEntry = ArrayUtils.peekLast(this.appViewStack);\r\n    return activeViewEntry;\r\n  }\r\n  on(event, viewKey, callback) {\r\n    if (!this.registeredUiViewEntries.has(viewKey)) {\r\n      console.error(\"Cannot listen for a non registered view.\");\r\n      return this;\r\n    }\r\n    this.eventListener[event].push({ key: viewKey, callback });\r\n    return this;\r\n  }\r\n  /**\r\n   * Handles logic associated with changing the open page.\r\n   * @param page Page to close\r\n   */\r\n  handleCloseView(page) {\r\n    var _a;\r\n    if (!page) return;\r\n    (_a = page.ref) == null ? void 0 : _a.onPause();\r\n    this.eventListener.pause.forEach((e) => e.key === page.key && e.callback(page));\r\n    page.isVisible.set(false);\r\n    this._currentUiView.set(null);\r\n    if (page.viewOptions.SuspendMode === ViewSuspendMode.TERMINATE) {\r\n      setTimeout(() => this.killView(page));\r\n    }\r\n  }\r\n  /**\r\n   * Handles logic associated with changing the open page.\r\n   * @param page Page to open\r\n   */\r\n  handleOpenView(page) {\r\n    var _a;\r\n    if (!page) return;\r\n    (_a = page.ref) == null ? void 0 : _a.onResume();\r\n    this.eventListener.resume.forEach((e) => e.key === page.key && e.callback(page));\r\n    page.isVisible.set(true);\r\n    this._currentUiView.set(page);\r\n  }\r\n  /**\r\n   * Populate the view stack with its respective home page.\r\n   * @param mainPageUiViewKey the key of the home page\r\n   */\r\n  initializeAppViewStack(mainPageUiViewKey) {\r\n    this.open(mainPageUiViewKey);\r\n  }\r\n  /**\r\n   * @param key the {@link UiView} string key\r\n   * @returns the {@link UiViewEntry} corresponding to the key\r\n   * @throws if the {@link UiViewEntry} doesn't exists\r\n   */\r\n  getUiViewEntry(key) {\r\n    const appViewEntry = this.registeredUiViewEntries.get(key);\r\n    if (!appViewEntry) {\r\n      throw new Error(`${key} wasn't registered as a view`);\r\n    }\r\n    return appViewEntry;\r\n  }\r\n  /**\r\n   * Called by AppContainer to pass in the refs to the view.\r\n   * Should only be called once.\r\n   * @param appViewRef The app view ref.\r\n   */\r\n  onAppContainerRendered(appViewRef) {\r\n    this.appViewRef = appViewRef;\r\n  }\r\n  open(key) {\r\n    const viewEntry = this.advanceViewStack(key);\r\n    return viewEntry;\r\n  }\r\n  goBack(steps) {\r\n    steps != null ? steps : steps = 1;\r\n    if (steps <= 0) {\r\n      throw new RangeError(`Steps must be superior to 0.`);\r\n    } else if (steps >= this.appViewStack.length) {\r\n      throw new RangeError(`Steps can't be superior to ${this.appViewStack.length} when called.`);\r\n    }\r\n    const activeViewEntry = this.activeUiViewEntry;\r\n    if (this.appViewStack.length > steps && activeViewEntry) {\r\n      this.eventListener.pause.forEach((e) => e.key === activeViewEntry.key && e.callback(activeViewEntry));\r\n      const viewsToOpen = [];\r\n      const viewsToClose = [];\r\n      while (steps--) {\r\n        const view = this.appViewStack.pop();\r\n        if (view) {\r\n          viewsToClose.push(view);\r\n        }\r\n      }\r\n      let i = this.appViewStack.length;\r\n      do {\r\n        viewsToOpen.push(this.appViewStack[--i]);\r\n      } while (i > 0 && this.appViewStack[i].type.get() !== \"page\");\r\n      for (const page of viewsToClose) {\r\n        this.handleCloseView(page);\r\n      }\r\n      for (const page of viewsToOpen.reverse()) {\r\n        this.handleOpenView(page);\r\n      }\r\n    }\r\n    return this.activeUiViewEntry;\r\n  }\r\n  /**\r\n   * Handles view stack logic\r\n   * @param key the {@link UiView} string key\r\n   * @returns the current {@link UiViewEntry}\r\n   */\r\n  advanceViewStack(key) {\r\n    const viewEntry = this.getUiViewEntry(key);\r\n    if (this.appViewStack.includes(viewEntry)) {\r\n      if (this.activeUiViewEntry !== viewEntry) {\r\n        throw new Error(\"Page or popup is already in the viewstack and can't be opened twice\");\r\n      }\r\n      return viewEntry;\r\n    }\r\n    switch (viewEntry.type.get()) {\r\n      case \"page\":\r\n        for (const page of [...this.appViewStack].reverse()) {\r\n          this.handleCloseView(page);\r\n        }\r\n        break;\r\n    }\r\n    this.appViewStack.push(viewEntry);\r\n    this.openView(viewEntry);\r\n    this.handleOpenView(viewEntry);\r\n    return viewEntry;\r\n  }\r\n  /**\r\n   * Handle logic associated with opening a view\r\n   * @param view the view to open.\r\n   */\r\n  openView(view) {\r\n    if (!view.isInit) {\r\n      this.initViewEntry(view, true);\r\n    }\r\n    const index2 = this.appViewStack.indexOf(view);\r\n    if (index2 < 0) {\r\n      throw new Error(`AppViewService: view not found in view stack: ${view.key}`);\r\n    }\r\n    view.layer.set(index2);\r\n  }\r\n  /**\r\n   * Updates all the pages/popups that are initialized and visible\r\n   * @param time timestamp\r\n   */\r\n  update(time) {\r\n    this.registeredUiViewEntries.forEach((UiView2) => {\r\n      var _a;\r\n      if (UiView2.isInit && UiView2.isVisible.get()) {\r\n        (_a = UiView2.ref) == null ? void 0 : _a.onUpdate(time);\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * Routes the event to the current {@link UiView}\r\n   * @param gamepadEvent the {@link GamepadEvents}\r\n   */\r\n  routeGamepadInteractionEvent(gamepadEvent) {\r\n    const _currentUiView = this.activeUiViewEntry;\r\n    if ((_currentUiView == null ? void 0 : _currentUiView.ref) instanceof GamepadUiView) {\r\n      _currentUiView.ref.handleGamepadEvent(gamepadEvent);\r\n    }\r\n  }\r\n}\r\nclass AppViewWrapper extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.rootRef = FSComponent.createRef();\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.rootRef,\r\n        class: {\r\n          \"ui-view\": true,\r\n          [this.props.viewName]: true,\r\n          hidden: this.props.isVisible.map(SubscribableMapFunctions.not()),\r\n          page: this.props.type.map(where(\"page\")),\r\n          popup: this.props.type.map(where(\"popup\"))\r\n        },\r\n        style: {\r\n          \"z-index\": this.props.layer.map(toString())\r\n        }\r\n      },\r\n      this.props.children\r\n    );\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    const root = this.rootRef.getOrDefault();\r\n    if (root !== null) {\r\n      (_a = root.parentNode) == null ? void 0 : _a.removeChild(root);\r\n    }\r\n    super.destroy();\r\n  }\r\n}\r\nvar __defProp2 = Object.defineProperty;\r\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\r\nvar __decorateClass = (decorators, target, key, kind) => {\r\n  var result = __getOwnPropDesc(target, key);\r\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\r\n    if (decorator = decorators[i])\r\n      result = decorator(target, key, result) || result;\r\n  if (result) __defProp2(target, key, result);\r\n  return result;\r\n};\r\nclass AppView extends DisplayComponent {\r\n  constructor(props) {\r\n    var _a;\r\n    super(props);\r\n    this.rootRef = FSComponent.createRef();\r\n    this.pageKeyActions = /* @__PURE__ */ new Map();\r\n    this._appViewService = props.appViewService || (props.bus ? new AppViewService(props.bus) : void 0);\r\n    this._bus = (_a = this._appViewService) == null ? void 0 : _a.bus;\r\n    this._unitsSettingManager = props.unitsSettingManager;\r\n    this._efbSettingsManager = props.efbSettingsManager;\r\n    this._notificationManager = props.notificationManager;\r\n    this._onboardingManager = props.onboardingManager;\r\n  }\r\n  get appViewService() {\r\n    const _appViewService = this._appViewService;\r\n    if (!_appViewService) {\r\n      throw new Error(\r\n        `Cannot resolve 'appViewService' because none of 'appViewService' and 'bus' props were given.`\r\n      );\r\n    }\r\n    return _appViewService;\r\n  }\r\n  get bus() {\r\n    const _bus = this._bus;\r\n    if (!_bus) {\r\n      throw new Error(`Cannot resolve 'bus' because none of 'appViewService' and 'bus' props were given.`);\r\n    }\r\n    return _bus;\r\n  }\r\n  get unitsSettingManager() {\r\n    const _unitsSettingManager = this._unitsSettingManager;\r\n    if (_unitsSettingManager === void 0) {\r\n      throw new Error(`Cannot resolve 'unitsSettingManager'`);\r\n    }\r\n    return _unitsSettingManager;\r\n  }\r\n  get efbSettingsManager() {\r\n    const _efbSettingsManager = this._efbSettingsManager;\r\n    if (_efbSettingsManager === void 0) {\r\n      throw new Error(`Cannot resolve 'efbSettingsManager'`);\r\n    }\r\n    return _efbSettingsManager;\r\n  }\r\n  /**\r\n   * EFB notification manager\r\n   * @returns a unique efbNotificationManager instance\r\n   */\r\n  get notificationManager() {\r\n    const notificationManager = this._notificationManager;\r\n    if (!notificationManager) {\r\n      throw new Error(\"Notification manager is not defined\");\r\n    }\r\n    return notificationManager;\r\n  }\r\n  get onboardingManager() {\r\n    const _onboardingManager = this._onboardingManager;\r\n    if (!_onboardingManager) {\r\n      throw new Error(`Cannot resolve 'onboardingManager'`);\r\n    }\r\n    return _onboardingManager;\r\n  }\r\n  /**\r\n   * Called once when the view is opened for the first time.\r\n   */\r\n  onOpen() {\r\n    var _a;\r\n    (_a = this._appViewService) == null ? void 0 : _a.onOpen();\r\n  }\r\n  /**\r\n   * Called once when the view is destroyed.\r\n   */\r\n  onClose() {\r\n    var _a;\r\n    (_a = this._appViewService) == null ? void 0 : _a.onClose();\r\n  }\r\n  /**\r\n   * Called each time the view is resumed.\r\n   */\r\n  onResume() {\r\n    var _a;\r\n    (_a = this._appViewService) == null ? void 0 : _a.onResume();\r\n  }\r\n  /**\r\n   * Called each time the view is closed.\r\n   */\r\n  onPause() {\r\n    var _a;\r\n    (_a = this._appViewService) == null ? void 0 : _a.onPause();\r\n  }\r\n  /**\r\n   * On Update loop - It update the `AppViewService` if it is used.\r\n   * @param time in milliseconds\r\n   */\r\n  onUpdate(time) {\r\n    var _a;\r\n    (_a = this._appViewService) == null ? void 0 : _a.update(time);\r\n  }\r\n  /**\r\n   * Callback to register all views the app might use.\r\n   */\r\n  registerViews() {\r\n  }\r\n  /**\r\n   * @internal\r\n   * TODO : Need to be documented after Gamepad integration\r\n   */\r\n  routeGamepadInteractionEvent(gamepadEvent) {\r\n    var _a;\r\n    (_a = this._appViewService) == null ? void 0 : _a.routeGamepadInteractionEvent(gamepadEvent);\r\n  }\r\n  /**\r\n   * @internal\r\n   * @param key custom page key defined in `pageKeyActions`\r\n   * @param args array of arguments given to the defined callback\r\n   */\r\n  handlePageKeyAction(key, args) {\r\n    if (key === null) {\r\n      return;\r\n    }\r\n    const action = this.pageKeyActions.get(key);\r\n    if (action === void 0) {\r\n      console.error(`Key \"${key}\" doesn't exists.`);\r\n      return;\r\n    }\r\n    toPromise(action(args)).catch((reason) => {\r\n      console.error(`handlePageKeyAction Error for key \"${key}\"`, reason);\r\n    });\r\n  }\r\n  /**\r\n   * If using EFB's AppViewService, this method returns an AppContainer binded to AppViewService.\r\n   * Otherwise it can be customized with plain JSX/TSX or custom view service, etc...\r\n   *\r\n   * @example\r\n   * Surrounding AppContainer with a custom class:\r\n   * ```ts\r\n   * public render(): TVNode<HTMLDivElement> {\r\n   * \treturn <div class=\"my-custom-class\">{super.render()}</div>;\r\n   * }\r\n   * ```\r\n   * @example\r\n   * Here's an plain JSX/TSX example:\r\n   * ```ts\r\n   * public render(): TVNode<HTMLSpanElement> {\r\n   * \treturn <span>Hello World!</span>;\r\n   * }\r\n   * ```\r\n   */\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(AppContainer, { appViewService: this.appViewService });\r\n  }\r\n  /** @inheritdoc */\r\n  onAfterRender(node) {\r\n    var _a;\r\n    super.onAfterRender(node);\r\n    this.registerViews();\r\n    if (this.defaultView) {\r\n      (_a = this._appViewService) == null ? void 0 : _a.initialize(this.defaultView);\r\n    }\r\n  }\r\n  /** @internal */\r\n  destroy() {\r\n    var _a;\r\n    (_a = this._appViewService) == null ? void 0 : _a.unload();\r\n    super.destroy();\r\n  }\r\n}\r\n__decorateClass([\r\n  Memoize()\r\n], AppView.prototype, \"appViewService\");\r\n__decorateClass([\r\n  Memoize()\r\n], AppView.prototype, \"bus\");\r\n__decorateClass([\r\n  Memoize()\r\n], AppView.prototype, \"unitsSettingManager\");\r\n__decorateClass([\r\n  Memoize()\r\n], AppView.prototype, \"efbSettingsManager\");\r\n__decorateClass([\r\n  Memoize()\r\n], AppView.prototype, \"onboardingManager\");\r\nclass Button extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a, _b, _c, _d;\r\n    super(...arguments);\r\n    this.isButtonDisabled = SubscribableUtils.toSubscribable((_a = this.props.disabled) != null ? _a : false, true);\r\n    this.isButtonHoverable = MappedSubject.create(\r\n      ([isHoverable, isDisabled]) => {\r\n        return isHoverable && !isDisabled;\r\n      },\r\n      SubscribableUtils.toSubscribable((_b = this.props.hoverable) != null ? _b : true, true),\r\n      this.isButtonDisabled\r\n    );\r\n    this.isButtonSelected = MappedSubject.create(\r\n      ([isSelected, state]) => isSelected || state,\r\n      SubscribableUtils.toSubscribable((_c = this.props.selected) != null ? _c : false, true),\r\n      SubscribableUtils.toSubscribable((_d = this.props.state) != null ? _d : false, true)\r\n    );\r\n  }\r\n  /**\r\n   * @deprecated Old way to render the button. Instead of extending the `Button` class, render your content as a children of `<Button>...</Button>`.\r\n   */\r\n  buttonRender() {\r\n    return null;\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"button\",\r\n      {\r\n        ref: this.gamepadUiComponentRef,\r\n        class: mergeClassProp(\r\n          \"button\",\r\n          \"abstract-button\",\r\n          // deprecated\r\n          {\r\n            hoverable: this.isButtonHoverable,\r\n            selected: this.isButtonSelected\r\n          },\r\n          this.props.class\r\n        ),\r\n        style: this.props.style\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"disabled-layer\" }),\r\n      this.props.children,\r\n      this.buttonRender()\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    if (this.props.callback) {\r\n      this.gamepadUiComponentRef.instance.onclick = (event) => {\r\n        var _a;\r\n        if (this.isButtonDisabled.get() === true) {\r\n          return;\r\n        }\r\n        (_a = this.props.callback) == null ? void 0 : _a.call(this, event);\r\n      };\r\n    }\r\n  }\r\n  destroy() {\r\n    this.isButtonHoverable.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass AbstractButton extends Button {\r\n}\r\nclass TT extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.ref = FSComponent.createRef();\r\n    this.key = SubscribableUtils.toSubscribable(this.props.key, true);\r\n    this.formatter = this.props.format || ((text) => text);\r\n    this.subs = [];\r\n    this.reloadText = this._reloadText.bind(this);\r\n  }\r\n  _reloadText() {\r\n    var _a;\r\n    const key = this.key.get();\r\n    let translatedKey = key.startsWith(\"@\") || key.startsWith(\"TT\") ? Utils.Translate(key) : key;\r\n    (_a = this.props.arguments) == null ? void 0 : _a.forEach((argumentValue, argumentKey) => {\r\n      const argumentValueSub = SubscribableUtils.toSubscribable(argumentValue, true);\r\n      translatedKey = translatedKey.replace(argumentKey, argumentValueSub.get());\r\n    });\r\n    this.updateText(translatedKey);\r\n  }\r\n  getTextTransformed(text) {\r\n    if (isFunction(this.formatter)) {\r\n      return this.formatter(text);\r\n    }\r\n    switch (this.formatter) {\r\n      case \"upper\":\r\n      case \"uppercase\":\r\n        return text.toUpperCase();\r\n      case \"lower\":\r\n      case \"lowercase\":\r\n        return text.toLowerCase();\r\n      case \"ucfirst\":\r\n        return `${text.charAt(0).toUpperCase()}${text.slice(1)}`;\r\n      case \"capitalize\":\r\n        return text.replace(/(^\\w{1})|(\\s+\\w{1})/g, (letter) => letter.toUpperCase());\r\n      default:\r\n        console.warn(`Format \"${this.props.format}\" is not supported.`);\r\n        return text;\r\n    }\r\n  }\r\n  getEmphasisText(text) {\r\n    let emphasisText;\r\n    const boldRegex = /\\*\\*(.*?)\\*\\*/g;\r\n    const italicRegex = /\\*(.*?)\\*/g;\r\n    emphasisText = text.replace(boldRegex, '<span class=\"bold-text\">$1</span>');\r\n    emphasisText = emphasisText.replace(italicRegex, '<span class=\"italic-text\">$1</span>');\r\n    return emphasisText;\r\n  }\r\n  updateText(text) {\r\n    const formattedText = this.getTextTransformed(text);\r\n    const htmlText = this.getEmphasisText(formattedText);\r\n    this.ref.instance.innerHTML = htmlText;\r\n  }\r\n  render() {\r\n    var _a;\r\n    const Tag2 = (_a = this.props.type) != null ? _a : \"span\";\r\n    const _b = this.props, { key: _key, type: _type, format: _format, children: _children } = _b, props = __objRest(_b, [\"key\", \"type\", \"format\", \"children\"]);\r\n    return /* @__PURE__ */ FSComponent.buildComponent(Tag2, __spreadValues({ ref: this.ref }, props));\r\n  }\r\n  onAfterRender(node) {\r\n    var _a;\r\n    super.onAfterRender(node);\r\n    (_a = this.props.arguments) == null ? void 0 : _a.forEach((argumentValue, argumentKey) => {\r\n      const subValue = SubscribableUtils.toSubscribable(argumentValue, true);\r\n      this.subs.push(subValue.sub(this.reloadText));\r\n    });\r\n    this.reloadSubscription = this.key.sub(this.reloadText, true);\r\n    Coherent.on(\"RELOAD_LOCALISATION\", this.reloadText);\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    Coherent.off(\"RELOAD_LOCALISATION\", this.reloadText);\r\n    (_a = this.reloadSubscription) == null ? void 0 : _a.destroy();\r\n    this.subs.forEach((sub) => sub.destroy());\r\n    super.destroy();\r\n  }\r\n}\r\nclass GhostListItem extends GamepadUiComponent {\r\n  constructor(props) {\r\n    props.disabled = true;\r\n    props.visible = false;\r\n    super(props);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"hidden\", ref: this.gamepadUiComponentRef });\r\n  }\r\n}\r\nclass List extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this._itemInstanceRefs = [];\r\n    this.dataSubs = [];\r\n  }\r\n  onAfterRender(node) {\r\n    var _a;\r\n    super.onAfterRender(node);\r\n    this.renderList();\r\n    this.dataSubs.push(this.props.data.sub(this.onDataChanged.bind(this)));\r\n    const isListVisibleSub = (_a = this.props.isListVisible) == null ? void 0 : _a.sub((isVisible) => {\r\n      if (isVisible && this._itemInstanceRefs.length > 0) {\r\n        this.show();\r\n      } else {\r\n        this.hide();\r\n      }\r\n    }, true);\r\n    if (isListVisibleSub) {\r\n      this.dataSubs.push(isListVisibleSub);\r\n    }\r\n    this.gamepadInputManager = new GamepadInputManager(this.gamepadUiComponentRef.instance);\r\n    if (this.props.isScrollable) {\r\n      this.gamepadInputManager.enableScroll(\"vertical\");\r\n    }\r\n  }\r\n  destroy() {\r\n    this.dataSubs.forEach((sub) => sub.destroy());\r\n    super.destroy();\r\n  }\r\n  show() {\r\n    this.gamepadUiComponentRef.instance.classList.remove(\"hide\");\r\n  }\r\n  hide() {\r\n    this.gamepadUiComponentRef.instance.classList.add(\"hide\");\r\n  }\r\n  onDataChanged(index2, type, item) {\r\n    switch (type) {\r\n      case SubscribableArrayEventType.Added:\r\n        {\r\n          if (!item) return;\r\n          const el = this.gamepadUiComponentRef.instance.children.item(index2);\r\n          if (Array.isArray(item)) {\r\n            for (let i = 0; i < item.length; i++) {\r\n              this.addDomNode(item[i], index2 + i, el);\r\n            }\r\n          } else {\r\n            this.addDomNode(item, index2, el);\r\n          }\r\n        }\r\n        break;\r\n      case SubscribableArrayEventType.Removed:\r\n        {\r\n          if (!item) return;\r\n          if (Array.isArray(item)) {\r\n            item.forEach((_) => {\r\n              this.removeDomNode(index2);\r\n            });\r\n          } else {\r\n            this.removeDomNode(index2);\r\n          }\r\n        }\r\n        break;\r\n      case SubscribableArrayEventType.Cleared:\r\n        {\r\n          for (const componentRef of this._itemInstanceRefs) {\r\n            componentRef.destroy();\r\n          }\r\n          this._itemInstanceRefs.length = 0;\r\n          this.gamepadUiComponentRef.instance.innerHTML = \"\";\r\n        }\r\n        break;\r\n    }\r\n    if (this.props.refreshOnUpdate) {\r\n      this.renderList();\r\n    } else {\r\n      this.refreshListVisibility();\r\n    }\r\n  }\r\n  addDomNode(item, index2, el) {\r\n    const node = this.renderListItem(item, index2);\r\n    if (!node) return;\r\n    if (el !== null) {\r\n      FSComponent.renderBefore(node, el);\r\n    } else {\r\n      el = this.gamepadUiComponentRef.instance;\r\n      FSComponent.render(node, el);\r\n    }\r\n    if (node.instance !== null) {\r\n      this._itemInstanceRefs.splice(index2, 0, node.instance);\r\n    }\r\n  }\r\n  renderListItem(dataItem, index2) {\r\n    const renderedNode = this.props.renderItem(dataItem, index2);\r\n    if (renderedNode === null) {\r\n      return null;\r\n    }\r\n    if (renderedNode.instance instanceof GamepadUiComponent && renderedNode.instance.gamepadUiComponentRef.instance !== null) {\r\n      return renderedNode;\r\n    } else {\r\n      throw new Error(\"A ListItem must be of type GamepadUiComponent\");\r\n    }\r\n  }\r\n  removeDomNode(index2) {\r\n    const child = this.gamepadUiComponentRef.instance.childNodes.item(index2);\r\n    this.gamepadUiComponentRef.instance.removeChild(child);\r\n    const removed = this._itemInstanceRefs.splice(index2, 1)[0];\r\n    removed.destroy();\r\n  }\r\n  renderList() {\r\n    for (const componentRef of this._itemInstanceRefs) {\r\n      componentRef.destroy();\r\n    }\r\n    this.gamepadUiComponentRef.instance.textContent = \"\";\r\n    this._itemInstanceRefs.length = 0;\r\n    const dataLen = this.props.data.length;\r\n    for (let i = 0; i < dataLen; i++) {\r\n      const vnode = this.renderListItem(this.props.data.get(i), i);\r\n      if (vnode) {\r\n        FSComponent.render(vnode, this.gamepadUiComponentRef.instance);\r\n        this._itemInstanceRefs.push(vnode.instance);\r\n      }\r\n    }\r\n    this.refreshListVisibility();\r\n  }\r\n  refreshListVisibility() {\r\n    var _a;\r\n    const isVisible = ((_a = this.props.isListVisible) == null ? void 0 : _a.get()) !== false;\r\n    isVisible && this._itemInstanceRefs.length > 0 ? this.show() : this.hide();\r\n    return;\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        class: `list ${this.props.isScrollable ? \"scroll-container\" : \"\"}`,\r\n        style: this.props.style,\r\n        ref: this.gamepadUiComponentRef\r\n      }\r\n    );\r\n  }\r\n}\r\nconst arrowIconPath$1 = \"coui://html_ui/efb_ui/efb_os/Assets/icons/NoMargin/Arrow.svg\";\r\nclass PagingList extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.currentData = ArraySubject.create();\r\n    this.previousData = ArraySubject.create();\r\n    this.nextData = ArraySubject.create();\r\n    this.firstPage = Subject.create(true);\r\n    this.lastPage = Subject.create(false);\r\n    this.numberOfPages = Subject.create(1);\r\n    this.pageSelected = (_a = this.props.pageSelected) != null ? _a : Subject.create(0);\r\n    this.previousPageSelected = this.pageSelected.get();\r\n    this.transitionWrapperRef = FSComponent.createRef();\r\n    this.ongoingTransition = Subject.create(false);\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.props.data.sub(() => this.updateListsData(this.pageSelected.get()));\r\n    this.pageSelected.sub(this.onPageChanged.bind(this));\r\n    this.updateListsData(this.pageSelected.get());\r\n  }\r\n  updateListsData(pageSelected) {\r\n    this.numberOfPages.set(Math.ceil(this.props.data.length / this.props.maxItemsPerPage));\r\n    const start = pageSelected * this.props.maxItemsPerPage;\r\n    const fullData = this.props.data.getArray();\r\n    this.currentData.set(fullData.slice(start, start + this.props.maxItemsPerPage));\r\n    if (start === 0) {\r\n      this.previousData.clear();\r\n      this.firstPage.set(true);\r\n    } else {\r\n      this.previousData.set(fullData.slice(start - this.props.maxItemsPerPage, start));\r\n      this.firstPage.set(this.previousData.getArray().length === 0);\r\n    }\r\n    if (start + this.props.maxItemsPerPage > fullData.length) {\r\n      this.nextData.clear();\r\n      this.lastPage.set(true);\r\n    } else {\r\n      const followingStart = start + this.props.maxItemsPerPage;\r\n      this.nextData.set(fullData.slice(followingStart, followingStart + this.props.maxItemsPerPage));\r\n      this.lastPage.set(this.nextData.getArray().length === 0);\r\n    }\r\n  }\r\n  async onPageChanged(newPageSelected) {\r\n    if (newPageSelected < 0 || newPageSelected >= this.numberOfPages.get()) {\r\n      this.pageSelected.set(Utils.Clamp(newPageSelected, 0, this.numberOfPages.get() - 1));\r\n      return;\r\n    }\r\n    await Wait.awaitCondition(() => !this.ongoingTransition.get());\r\n    this.ongoingTransition.set(true);\r\n    const gap = newPageSelected - this.previousPageSelected;\r\n    const side = gap > 0 ? 1 : -1;\r\n    for (let i = 0; i < Math.abs(gap); i++) {\r\n      const targetPage = this.previousPageSelected + (i + 1) * side;\r\n      await this.doTransition(side, targetPage);\r\n    }\r\n    this.previousPageSelected = newPageSelected;\r\n    this.ongoingTransition.set(false);\r\n  }\r\n  async doTransition(side, targetPage) {\r\n    for (let i = 5; i < 101; i += 5) {\r\n      this.transitionWrapperRef.instance.style.right = `${100 + i * side}%`;\r\n      await Wait.awaitDelay(1);\r\n    }\r\n    this.updateListsData(targetPage);\r\n    this.transitionWrapperRef.instance.style.right = \"100%\";\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.gamepadUiComponentRef,\r\n        class: {\r\n          \"paging-list\": true,\r\n          \"first-page\": this.firstPage,\r\n          \"last-page\": this.lastPage,\r\n          \"ongoing-transition\": this.ongoingTransition\r\n        }\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"transition-wrapper\", ref: this.transitionWrapperRef }, /* @__PURE__ */ FSComponent.buildComponent(List, { class: \"previous-list\", data: this.previousData, renderItem: this.props.renderItem }), /* @__PURE__ */ FSComponent.buildComponent(List, { class: \"main-list\", data: this.currentData, renderItem: this.props.renderItem }), /* @__PURE__ */ FSComponent.buildComponent(List, { class: \"following-list\", data: this.nextData, renderItem: this.props.renderItem })),\r\n      /* @__PURE__ */ FSComponent.buildComponent(CarrouselButtons, { numberOfPages: this.numberOfPages, pageSelected: this.pageSelected })\r\n    );\r\n  }\r\n}\r\nclass CarrouselButtons extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.buttonsRef = [];\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.pagesSub = this.props.numberOfPages.sub(this.renderButtons.bind(this));\r\n  }\r\n  renderButtons(numPages) {\r\n    for (const buttonRef of this.buttonsRef) {\r\n      buttonRef.destroy();\r\n    }\r\n    this.buttonsRef.length = 0;\r\n    this.gamepadUiComponentRef.instance.innerHTML = \"\";\r\n    for (let i = 0; i < numPages; i++) {\r\n      const node = /* @__PURE__ */ FSComponent.buildComponent(\r\n        UniqueCarrouselButton,\r\n        {\r\n          selected: this.props.pageSelected.map((pageSelected) => pageSelected === i),\r\n          callBack: () => {\r\n            this.props.pageSelected.set(i);\r\n          }\r\n        }\r\n      );\r\n      FSComponent.render(node, this.gamepadUiComponentRef.instance);\r\n      this.buttonsRef.push(node.instance);\r\n    }\r\n  }\r\n  changePage(increment) {\r\n    const newPageIndex = Utils.Clamp(\r\n      this.props.pageSelected.get() + increment,\r\n      0,\r\n      this.props.numberOfPages.get() - 1\r\n    );\r\n    this.props.pageSelected.set(newPageIndex);\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.pagesSub) == null ? void 0 : _a.destroy();\r\n    super.destroy();\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        class: {\r\n          \"carrousel-buttons\": true,\r\n          hide: this.props.numberOfPages.map((v) => v <= 1)\r\n        }\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(CarrouselArrow, { class: \"left\", callBack: () => this.changePage(-1) }),\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.gamepadUiComponentRef, class: \"buttons-container\" }),\r\n      /* @__PURE__ */ FSComponent.buildComponent(CarrouselArrow, { class: \"right\", callBack: () => this.changePage(1) })\r\n    );\r\n  }\r\n}\r\nclass CarrouselArrow extends GamepadUiComponent {\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.gamepadUiComponentRef.instance.onclick = this.props.callBack;\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"carrousel-arrow\", ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(\"icon-element\", { \"icon-url\": arrowIconPath$1 }));\r\n  }\r\n}\r\nclass UniqueCarrouselButton extends GamepadUiComponent {\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.gamepadUiComponentRef.instance.onclick = this.props.callBack;\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.gamepadUiComponentRef,\r\n        class: { \"unique-carrousel-button\": true, selected: this.props.selected }\r\n      }\r\n    );\r\n  }\r\n}\r\nclass ScrollBar extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.svgRef = FSComponent.createRef();\r\n    this.scrollBarRef = FSComponent.createRef();\r\n    this.scrollThumbRef = FSComponent.createRef();\r\n    this.scrollBarContainerRef = FSComponent.createRef();\r\n    this.scrollableContainer = null;\r\n    this.scrollListener = this.onScroll.bind(this);\r\n    this.sizeChangeTimer = null;\r\n    this.arrowPadding = 6;\r\n    this.margin = 2;\r\n    this.currentScrollHeight = 0;\r\n    this.currentThumbAreaHeight = 0;\r\n    this.scrollHeightRatio = 0;\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.scrollableContainer = this.scrollBarContainerRef.instance.previousElementSibling;\r\n    this.scrollableContainer.addEventListener(\"scroll\", this.scrollListener);\r\n    const diffAndAdjust = () => {\r\n      var _a;\r\n      if (this.currentScrollHeight !== ((_a = this.scrollableContainer) == null ? void 0 : _a.scrollHeight)) {\r\n        this.adjustScrollbarDimensions();\r\n      }\r\n    };\r\n    this.sizeChangeTimer = setInterval(diffAndAdjust, 150);\r\n    this.onScroll();\r\n  }\r\n  /**\r\n   * Adjusts the dimensions of the scrollbar elements.\r\n   */\r\n  adjustScrollbarDimensions() {\r\n    if (this.scrollableContainer) {\r\n      const parentTop = this.scrollableContainer.offsetTop;\r\n      this.scrollBarContainerRef.instance.style.top = `${parentTop + 4}px`;\r\n      this.currentScrollHeight = this.scrollableContainer.scrollHeight;\r\n      const containerHeight = this.scrollableContainer.clientHeight;\r\n      const totalMarginAndPadding = this.arrowPadding * 2 + this.margin * 2;\r\n      this.currentThumbAreaHeight = containerHeight - totalMarginAndPadding;\r\n      this.scrollHeightRatio = this.currentScrollHeight / containerHeight;\r\n      this.scrollThumbRef.instance.style.height = `${this.currentThumbAreaHeight / this.scrollHeightRatio}`.toString();\r\n      this.scrollBarContainerRef.instance.style.height = `${containerHeight}px`;\r\n      this.svgRef.instance.setAttribute(\"height\", `${containerHeight - this.margin * 2}px`);\r\n      this.scrollBarRef.instance.style.height = `${containerHeight}px`;\r\n      this.scrollBarContainerRef.instance.style.display = this.scrollHeightRatio <= 1 ? \"none\" : \"\";\r\n      this.onScroll();\r\n    }\r\n  }\r\n  /**\r\n   * Eventhandler called when a scroll event in the scrollable parent container happens.\r\n   */\r\n  onScroll() {\r\n    if (this.scrollableContainer) {\r\n      const scrollY = this.scrollableContainer.scrollTop / this.scrollableContainer.scrollHeight * this.currentThumbAreaHeight + this.arrowPadding;\r\n      if (!isNaN(scrollY)) {\r\n        this.scrollThumbRef.instance.setAttribute(\"y\", scrollY.toString());\r\n      }\r\n    }\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"scroll-bar\", ref: this.scrollBarContainerRef }, /* @__PURE__ */ FSComponent.buildComponent(\"svg\", { ref: this.svgRef }, /* @__PURE__ */ FSComponent.buildComponent(\"rect\", { ref: this.scrollBarRef, x: \"3\", y: \"6\", width: \"4\", fill: \"#707070\" }), /* @__PURE__ */ FSComponent.buildComponent(\"rect\", { ref: this.scrollThumbRef, x: \"3\", y: \"6\", width: \"4\", fill: \"#1390E3\" })));\r\n  }\r\n  destroy() {\r\n    if (this.scrollableContainer) {\r\n      this.scrollableContainer.removeEventListener(\"scroll\", this.scrollListener);\r\n    }\r\n    if (this.sizeChangeTimer !== null) {\r\n      clearInterval(this.sizeChangeTimer);\r\n    }\r\n  }\r\n}\r\nconst arrowIconPath = \"coui://html_ui/efb_ui/efb_os/Assets/icons/NoMargin/Arrow.svg\";\r\nclass DropdownButton extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.listDataset = Array.isArray(this.props.listDataset) ? ArraySubject.create(this.props.listDataset) : this.props.listDataset;\r\n    this.isListVisible = Subject.create(false);\r\n  }\r\n  /* Close the list when clicking out of it */\r\n  onClickOutOfComponent() {\r\n    this.isListVisible.set(false);\r\n  }\r\n  onAfterRender(node) {\r\n    var _a;\r\n    super.onAfterRender(node);\r\n    this.isListVisibleSub = (_a = this.props.isListVisible) == null ? void 0 : _a.sub(this.isListVisible.set);\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.isListVisibleSub) == null ? void 0 : _a.destroy();\r\n    super.destroy();\r\n  }\r\n  render() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"dropdown-button\", ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(\r\n      DropdownButtonSelector,\r\n      {\r\n        class: \"button--full-width\",\r\n        key: this.props.title,\r\n        isOpen: this.isListVisible,\r\n        type: this.props.type,\r\n        callback: () => {\r\n          if (this.disabled.get()) {\r\n            return;\r\n          }\r\n          this.isListVisible.set(!this.isListVisible.get());\r\n        },\r\n        showArrowIcon: this.props.showArrowIcon,\r\n        disabled: this.disabled\r\n      }\r\n    ), /* @__PURE__ */ FSComponent.buildComponent(\r\n      List,\r\n      {\r\n        class: \"dropdown-button-list\",\r\n        data: this.listDataset,\r\n        isListVisible: this.isListVisible,\r\n        isScrollable: (_a = this.props.isScrollable) != null ? _a : true,\r\n        renderItem: (item, index2) => /* @__PURE__ */ FSComponent.buildComponent(\r\n          DropdownButtonListItem,\r\n          {\r\n            name: this.props.getItemLabel(item),\r\n            onClick: () => {\r\n              this.isListVisible.set(false);\r\n              this.props.onItemClick(item, index2);\r\n            }\r\n          }\r\n        )\r\n      }\r\n    ));\r\n  }\r\n}\r\nclass DropdownButtonSelector extends DisplayComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.iconScale = 1;\r\n    this.iconStyle = ObjectSubject.create({\r\n      transform: `scale(${this.iconScale}, ${this.iconScale})`\r\n    });\r\n    if (this.props.showArrowIcon) {\r\n      this.isOpenSub = this.props.isOpen.sub((isOpen) => {\r\n        this.iconStyle.set(\r\n          \"transform\",\r\n          `scale(${this.iconScale}, ${isOpen ? -1 * this.iconScale : this.iconScale})`\r\n        );\r\n      }, true);\r\n    }\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.isOpenSub) == null ? void 0 : _a.destroy();\r\n    super.destroy();\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      Button,\r\n      {\r\n        class: mergeClassProp(\"dropdown-button-selector\", this.props.class),\r\n        style: this.props.style,\r\n        callback: this.props.callback,\r\n        hoverable: this.props.hoverable,\r\n        selected: this.props.selected,\r\n        disabled: this.props.disabled\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(TT, { class: \"text bold-text\", key: this.props.key }),\r\n      this.props.showArrowIcon && /* @__PURE__ */ FSComponent.buildComponent(\r\n        \"icon-element\",\r\n        {\r\n          class: \"dropdown-button-selector-icon\",\r\n          \"icon-url\": arrowIconPath,\r\n          style: this.iconStyle\r\n        }\r\n      )\r\n    );\r\n  }\r\n}\r\nclass DropdownButtonListItem extends GamepadUiComponent {\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.gamepadUiComponentRef.instance.onclick = this.props.onClick;\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"dropdown-button-list-item\", ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(TT, { key: this.props.name, type: \"div\", class: \"text regular-text\" }));\r\n  }\r\n}\r\nclass IconElement extends DisplayComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.url = SubscribableUtils.toSubscribable(this.props.url, true);\r\n    this.el = FSComponent.createRef();\r\n    this.classes = {\r\n      \"icon-element\": true\r\n    };\r\n    this.onIconLoaded = (found, svgAsString) => {\r\n      this.el.instance.innerText = \"\";\r\n      if (!found) {\r\n        console.error(`Image ${this.url.get()} was not found`);\r\n        return;\r\n      }\r\n      const template = document.createElement(\"template\");\r\n      template.innerHTML = svgAsString;\r\n      const svgAsHtml = template.content.querySelector(\"svg\");\r\n      if (svgAsHtml) {\r\n        this.el.instance.appendChild(svgAsHtml);\r\n      }\r\n    };\r\n    const propsClass = props.class;\r\n    if (propsClass) {\r\n      Object.assign(this.classes, typeof propsClass === \"string\" ? { [propsClass]: true } : propsClass);\r\n    }\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.el, class: this.classes });\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.urlSub = this.url.sub((url) => {\r\n      if (!url.endsWith(\".svg\")) {\r\n        console.error(`IconElement doesn't support \".${url.split(\".\").pop()}\" filetype.`);\r\n        return;\r\n      }\r\n      getIconCacheMgr().loadURL(url, this.onIconLoaded);\r\n    }, true);\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.urlSub) == null ? void 0 : _a.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass IconButton extends DisplayComponent {\r\n  iconRendering() {\r\n    if (this.props.iconPath) {\r\n      return /* @__PURE__ */ FSComponent.buildComponent(IconElement, { url: this.props.iconPath });\r\n    }\r\n    return null;\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      Button,\r\n      {\r\n        class: mergeClassProp(\"icon-button\", this.props.class),\r\n        style: this.props.style,\r\n        callback: this.props.callback,\r\n        hoverable: this.props.hoverable,\r\n        selected: this.props.selected,\r\n        state: this.props.state,\r\n        disabled: this.props.disabled,\r\n        onboardingStepId: this.props.onboardingStepId\r\n      },\r\n      this.iconRendering()\r\n    );\r\n  }\r\n}\r\nclass MultipleButtons extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.buttonSelected = (_a = this.props.buttonSelected) != null ? _a : 0;\r\n    this.buttonRefs = [...Array(this.props.titles.length)].map(\r\n      () => FSComponent.createRef()\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    if (this.buttonRefs.length) {\r\n      this.buttonRefs[this.buttonSelected].instance.selectButton();\r\n    }\r\n  }\r\n  buttonCallback(buttonIndex) {\r\n    var _a, _b;\r\n    if (this.disabled.get()) {\r\n      return;\r\n    }\r\n    if (!((_b = (_a = this.props).callback) == null ? void 0 : _b.call(_a, buttonIndex))) {\r\n      this.selectButton(buttonIndex);\r\n    }\r\n  }\r\n  selectButton(buttonIndex) {\r\n    if (buttonIndex !== this.buttonSelected) {\r\n      this.unselectAllButtons();\r\n      if (buttonIndex > this.buttonRefs.length || buttonIndex < 0) {\r\n        buttonIndex = 0;\r\n      }\r\n      this.buttonSelected = buttonIndex;\r\n      this.buttonRefs[buttonIndex].instance.selectButton();\r\n    }\r\n  }\r\n  unselectAllButtons() {\r\n    this.buttonRefs.forEach((button) => button.instance.unSelectButton());\r\n  }\r\n  renderSelectableButtons() {\r\n    const buttons = [];\r\n    for (let i = 0; i < this.props.titles.length; i++) {\r\n      buttons.push(\r\n        /* @__PURE__ */ FSComponent.buildComponent(\r\n          SelectableButton$1,\r\n          {\r\n            class: \"single-button\",\r\n            title: this.props.titles[i],\r\n            ref: this.buttonRefs[i],\r\n            callback: () => this.buttonCallback(i)\r\n          }\r\n        )\r\n      );\r\n    }\r\n    return buttons;\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.gamepadUiComponentRef, class: `multiple-buttons` }, this.renderSelectableButtons());\r\n  }\r\n}\r\nlet SelectableButton$1 = class SelectableButton extends DisplayComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.selected = Subject.create((_a = this.props.selected) != null ? _a : false);\r\n  }\r\n  selectButton() {\r\n    this.selected.set(true);\r\n  }\r\n  unSelectButton() {\r\n    this.selected.set(false);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      Button,\r\n      {\r\n        class: mergeClassProp({ selected: this.selected }, this.props.class),\r\n        style: this.props.style,\r\n        callback: this.props.callback,\r\n        hoverable: this.props.hoverable,\r\n        selected: this.props.selected,\r\n        disabled: this.props.disabled\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(TT, { class: \"title\", type: \"div\", key: this.props.title, format: \"uppercase\" })\r\n    );\r\n  }\r\n};\r\nclass TypedButton extends AbstractButton {\r\n  onAfterRender(node) {\r\n    var _a;\r\n    super.onAfterRender(node);\r\n    this.gamepadUiComponentRef.instance.classList.add((_a = this.props.type) != null ? _a : \"primary\");\r\n  }\r\n}\r\nclass SelectableButton2 extends TypedButton {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.selected = (_a = this.props.selected) != null ? _a : false;\r\n  }\r\n  selectButton() {\r\n    if (!this.selected) {\r\n      this.selected = true;\r\n      this.switchSelection(true);\r\n    }\r\n  }\r\n  unSelectButton() {\r\n    if (this.selected) {\r\n      this.selected = false;\r\n      this.switchSelection(false);\r\n    }\r\n  }\r\n  switchSelection(selected) {\r\n    this.gamepadUiComponentRef.instance.classList.toggle(\"selected\", selected);\r\n  }\r\n  buttonRender() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"selectable-button\" }, /* @__PURE__ */ FSComponent.buildComponent(TT, { class: \"title\", type: \"div\", key: this.props.title, format: \"upper\" }));\r\n  }\r\n}\r\nclass TTButton extends DisplayComponent {\r\n  render() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      Button,\r\n      {\r\n        class: mergeClassProp(\"tt-button\", \"classic-button\", this.props.class),\r\n        style: this.props.style,\r\n        callback: this.props.callback,\r\n        hoverable: this.props.hoverable,\r\n        selected: this.props.selected,\r\n        state: this.props.state,\r\n        disabled: this.props.disabled\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\r\n        TT,\r\n        {\r\n          class: \"bold-text\",\r\n          key: this.props.key,\r\n          type: this.props.type,\r\n          format: (_a = this.props.format) != null ? _a : \"uppercase\",\r\n          arguments: this.props.arguments\r\n        }\r\n      )\r\n    );\r\n  }\r\n}\r\nclass ClassicButton extends Button {\r\n  buttonRender() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"classic-button\" }, /* @__PURE__ */ FSComponent.buildComponent(TT, { key: this.props.title, format: (_a = this.props.format) != null ? _a : \"upper\", type: \"div\", class: \"bold-text\" }));\r\n  }\r\n}\r\nclass TabSelector extends GamepadUiComponent {\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.gamepadUiComponentRef,\r\n        class: {\r\n          \"tab-selector\": true,\r\n          active: this.props.active,\r\n          hidden: this.props.hidden\r\n        }\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"disabled-layer\" }),\r\n      /* @__PURE__ */ FSComponent.buildComponent(TT, { key: this.props.tabName, class: \"text\", format: \"ucfirst\" }),\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"state\" })\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    if (this.props.callback) {\r\n      this.gamepadUiComponentRef.instance.onclick = (e) => {\r\n        var _a;\r\n        if (SubscribableUtils.toSubscribable(this.props.disabled, true).get() === true) {\r\n          return;\r\n        }\r\n        (_a = this.props.callback) == null ? void 0 : _a.call(e);\r\n      };\r\n    }\r\n  }\r\n}\r\nclass AccordionButton extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.iconStyle = Subject.create(\"rotate(0)\");\r\n    this.isFoldedSubscription = this.props.isFolded.sub((isFolded) => {\r\n      this.iconStyle.set(`rotate(${isFolded ? 0 : -0.5}turn)`);\r\n    }, true);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      Button,\r\n      {\r\n        class: mergeClassProp(\"accordion-button\", this.props.class),\r\n        style: this.props.style,\r\n        callback: this.props.callback,\r\n        hoverable: this.props.hoverable,\r\n        selected: this.props.selected,\r\n        state: this.props.state,\r\n        disabled: this.props.disabled\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"icon-container\", style: { transform: this.iconStyle } }, /* @__PURE__ */ FSComponent.buildComponent(\r\n        IconElement,\r\n        {\r\n          class: \"accordion-button-icon\",\r\n          url: `coui://html_ui/efb_ui/efb_os/Assets/icons/Arrow.svg`\r\n        }\r\n      )),\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"title\" }, this.props.children)\r\n    );\r\n  }\r\n  destroy() {\r\n    this.isFoldedSubscription.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass AbstractAccordion extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.isFolded = SubscribableUtils.isMutableSubscribable(this.props.isFolded) ? this.props.isFolded : Subject.create((_a = this.props.isFolded) != null ? _a : true);\r\n  }\r\n  renderBody() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(FSComponent.Fragment, null, this.props.children);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: { accordion: true, folded: this.isFolded }, ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(\r\n      AccordionButton,\r\n      {\r\n        isFolded: this.isFolded,\r\n        disabled: this.props.disabled,\r\n        class: \"accordion-button abstract-button--full-width\",\r\n        callback: () => {\r\n          this.isFolded.set(!this.isFolded.get());\r\n        }\r\n      },\r\n      this.renderHeader()\r\n    ), /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: { \"menu-content\": true, hide: this.isFolded } }, this.renderBody()));\r\n  }\r\n}\r\nclass ElementAccordion extends AbstractAccordion {\r\n  renderHeader() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(FSComponent.Fragment, null, value(this.props.header));\r\n  }\r\n}\r\nclass StringAccordion extends AbstractAccordion {\r\n  renderHeader() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(TT, { key: this.props.title, format: \"ucfirst\" });\r\n  }\r\n}\r\nconst _BearingDisplay = class _BearingDisplay extends AbstractNumberUnitDisplay {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.unitFormatter = (_a = this.props.unitFormatter) != null ? _a : _BearingDisplay.DEFAULT_UNIT_FORMATTER;\r\n    this.unitTextBigDisplay = Subject.create(\"\");\r\n    this.unitTextSmallDisplay = Subject.create(\"\");\r\n    this.numberText = Subject.create(\"\");\r\n    this.unitTextBig = Subject.create(\"\");\r\n    this.unitTextSmall = Subject.create(\"\");\r\n  }\r\n  /** @inheritdoc */\r\n  onValueChanged(value2) {\r\n    let displayUnit = this.displayUnit.get();\r\n    if (!displayUnit || !value2.unit.canConvert(displayUnit)) {\r\n      displayUnit = value2.unit;\r\n    }\r\n    const numberValue = value2.asUnit(displayUnit);\r\n    this.updateNumberText(numberValue);\r\n    this.updateUnitText(numberValue, displayUnit);\r\n    if (this.props.hideDegreeSymbolWhenNan === true) {\r\n      this.updateUnitTextVisibility(numberValue);\r\n    }\r\n  }\r\n  /** @inheritdoc */\r\n  onDisplayUnitChanged(displayUnit) {\r\n    const value2 = this.value.get();\r\n    if (!displayUnit || !value2.unit.canConvert(displayUnit)) {\r\n      displayUnit = value2.unit;\r\n    }\r\n    const numberValue = value2.asUnit(displayUnit);\r\n    this.updateNumberText(numberValue);\r\n    this.updateUnitText(numberValue, displayUnit);\r\n    this.updateUnitTextVisibility(numberValue);\r\n  }\r\n  /**\r\n   * Updates this component's displayed number text.\r\n   * @param numberValue The numeric value to display.\r\n   */\r\n  updateNumberText(numberValue) {\r\n    let numberText = this.props.formatter(numberValue);\r\n    if (this.props.use360 !== false && parseFloat(numberText) === 0) {\r\n      numberText = this.props.formatter(360);\r\n    }\r\n    this.numberText.set(numberText);\r\n  }\r\n  /**\r\n   * Updates this component's displayed unit text.\r\n   * @param numberValue The numeric value to display.\r\n   * @param displayUnit The unit type in which to display the value.\r\n   */\r\n  updateUnitText(numberValue, displayUnit) {\r\n    _BearingDisplay.unitTextCache[0] = \"\";\r\n    _BearingDisplay.unitTextCache[1] = \"\";\r\n    this.unitFormatter(_BearingDisplay.unitTextCache, displayUnit, numberValue);\r\n    this.unitTextBig.set(_BearingDisplay.unitTextCache[0]);\r\n    this.unitTextSmall.set(_BearingDisplay.unitTextCache[1]);\r\n  }\r\n  /**\r\n   * Updates whether this component's unit text spans are visible.\r\n   * @param numberValue The numeric value displayed by this component.\r\n   */\r\n  updateUnitTextVisibility(numberValue) {\r\n    if (this.props.hideDegreeSymbolWhenNan === true) {\r\n      if (isNaN(numberValue)) {\r\n        this.unitTextBigDisplay.set(\"none\");\r\n        this.unitTextSmallDisplay.set(\"none\");\r\n        return;\r\n      }\r\n    }\r\n    this.unitTextBigDisplay.set(this.unitTextBig.get() === \"\" ? \"none\" : \"\");\r\n    this.unitTextSmallDisplay.set(this.unitTextSmall.get() === \"\" ? \"none\" : \"\");\r\n  }\r\n  /** @inheritdoc */\r\n  render() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: (_a = this.props.class) != null ? _a : \"\", style: \"white-space: nowrap;\" }, /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"bearing-num\" }, this.numberText), /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"bearing-unit\", style: { display: this.unitTextBigDisplay } }, this.unitTextBig), /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"bearing-unit-small\", style: { display: this.unitTextSmallDisplay } }, this.unitTextSmall));\r\n  }\r\n};\r\n_BearingDisplay.DEFAULT_UNIT_FORMATTER = (out, unit) => {\r\n  out[0] = \"\u00B0\";\r\n  out[1] = unit.isMagnetic() ? \"\" : \"T\";\r\n};\r\n_BearingDisplay.unitTextCache = [\"\", \"\"];\r\nlet BearingDisplay = _BearingDisplay;\r\nconst INTERNAL_KEY_SEPARATOR = \"__MSFS2024_INTERNAL_DATE_ANA_ACE__\";\r\nconst FormatKeys = [\"YYYY\", \"YY\", \"MMMM\", \"MMM\", \"MM\", \"DDDD\", \"DD\", \"hh\", \"mm\", \"ss\"];\r\nconst dateToValue = {\r\n  YYYY: (date) => date.getFullYear().toString(),\r\n  YY: (date) => (date.getFullYear() % 100).toString().padStart(2, \"0\"),\r\n  MMMM: (date) => monthKeys[date.getMonth()],\r\n  MMM: (date) => monthShortKeys[date.getMonth()],\r\n  MM: (date) => (date.getMonth() + 1).toString().padStart(2, \"0\"),\r\n  DDDD: (date) => dayKeys[date.getDay()],\r\n  DD: (date) => date.getDate().toString().padStart(2, \"0\"),\r\n  hh: (date) => date.getHours().toString().padStart(2, \"0\"),\r\n  mm: (date) => date.getMinutes().toString().padStart(2, \"0\"),\r\n  ss: (date) => date.getSeconds().toString().padStart(2, \"0\")\r\n};\r\nconst formatToInternalKey = {\r\n  YYYY: \"FULLYEAR\",\r\n  YY: \"SHORTYEAR\",\r\n  MMMM: \"FULLMONTH\",\r\n  MMM: \"SHORTMONTH\",\r\n  MM: \"DIGITMONTH\",\r\n  DDDD: \"FULLDAY\",\r\n  DD: \"DIGITDAY\",\r\n  hh: \"HOURS\",\r\n  mm: \"MINUTES\",\r\n  ss: \"SECONDS\"\r\n};\r\nclass DateDisplay extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.ready = Subject.create(false);\r\n    this.date = SubscribableUtils.toSubscribable(this.props.date, true);\r\n    this.format = SubscribableUtils.toSubscribable(this.props.format, true);\r\n    this.dateSubscription = this.date.sub((date) => this.updateDate(date));\r\n    this.formatSubscription = this.format.sub((format) => {\r\n      this.renderFormat(this.date.get(), format);\r\n    });\r\n    this.dateSpanRef = FSComponent.createRef();\r\n    this.dateNodes = [];\r\n    this.cachedSubject = {\r\n      YYYY: Subject.create(\"\"),\r\n      YY: Subject.create(\"\"),\r\n      MMMM: Subject.create(\"\"),\r\n      MMM: Subject.create(\"\"),\r\n      MM: Subject.create(\"\"),\r\n      DDDD: Subject.create(\"\"),\r\n      DD: Subject.create(\"\"),\r\n      hh: Subject.create(\"\"),\r\n      mm: Subject.create(\"\"),\r\n      ss: Subject.create(\"\")\r\n    };\r\n  }\r\n  renderFormat(rawDate, format) {\r\n    if (!this.ready.get()) {\r\n      return;\r\n    }\r\n    this.dateNodes.forEach((node) => FSComponent.shallowDestroy(node));\r\n    this.dateSpanRef.instance.innerHTML = \"\";\r\n    this.updateDate(rawDate);\r\n    let editedFormat = format;\r\n    for (const key in formatToInternalKey) {\r\n      editedFormat = editedFormat.replace(\r\n        key,\r\n        `${INTERNAL_KEY_SEPARATOR}${formatToInternalKey[key]}${INTERNAL_KEY_SEPARATOR}`\r\n      );\r\n    }\r\n    const splittedFormat = editedFormat.split(INTERNAL_KEY_SEPARATOR);\r\n    for (const part of splittedFormat) {\r\n      const foundKey = FormatKeys.find((key) => formatToInternalKey[key] === part);\r\n      if (foundKey !== void 0) {\r\n        this.dateNodes.push(/* @__PURE__ */ FSComponent.buildComponent(TT, { key: this.cachedSubject[foundKey] }));\r\n      } else {\r\n        this.dateNodes.push(/* @__PURE__ */ FSComponent.buildComponent(\"span\", null, part));\r\n      }\r\n    }\r\n    FSComponent.render(/* @__PURE__ */ FSComponent.buildComponent(FSComponent.Fragment, null, this.dateNodes), this.dateSpanRef.instance);\r\n  }\r\n  updateDate(rawDate) {\r\n    if (!this.ready.get()) {\r\n      return;\r\n    }\r\n    const date = new Date(rawDate);\r\n    for (const key in this.cachedSubject) {\r\n      this.cachedSubject[key].set(dateToValue[key](date));\r\n    }\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.ready.set(true);\r\n    this.renderFormat(this.date.get(), this.format.get());\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"span\", { style: this.props.style, class: toClassProp(this.props.class), ref: this.dateSpanRef });\r\n  }\r\n  destroy() {\r\n    this.dateSubscription.destroy();\r\n    this.formatSubscription.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass RunwaySelector extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.runways = ArraySubject.create();\r\n    this.currentRunwayName = MappedSubject.create(\r\n      ([facility, currentRunway]) => {\r\n        const runways = facility && FacilityUtils.isFacilityType(facility, FacilityType.Airport) ? RunwayUtils.getOneWayRunwaysFromAirport(facility) : [];\r\n        this.runways.set(runways);\r\n        const runwayIndex = typeof currentRunway === \"number\" ? currentRunway : runways.findIndex((runway) => runway.designation === currentRunway.designation);\r\n        return runwayIndex >= 0 && runwayIndex < runways.length ? getRunwayName(runways[runwayIndex]) : \"\";\r\n      },\r\n      this.props.facility,\r\n      this.props.currentRunway\r\n    );\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        class: {\r\n          \"runway-selector\": true,\r\n          hide: this.currentRunwayName.map((name) => !name)\r\n        },\r\n        ref: this.gamepadUiComponentRef\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\r\n        DropdownButton,\r\n        {\r\n          title: this.currentRunwayName,\r\n          type: \"secondary\",\r\n          listDataset: this.runways,\r\n          getItemLabel: getRunwayName,\r\n          disabled: this.props.disabled,\r\n          onItemClick: (runway, index2) => {\r\n            this.props.onRunwaySelected(runway, index2);\r\n          },\r\n          showArrowIcon: true\r\n        }\r\n      )\r\n    );\r\n  }\r\n}\r\nclass Input extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a, _b;\r\n    super(...arguments);\r\n    this.uuid = UUID.GenerateUuid();\r\n    this.input_id = \"\";\r\n    this.inputRef = this.gamepadUiComponentRef;\r\n    this.model = this.props.model || Subject.create(SubscribableUtils.toSubscribable(this.props.value || \"\", true).get());\r\n    this.dispatchFocusOutEvent = this._dispatchFocusOutEvent.bind(this);\r\n    this.setValueFromOS = this._setValueFromOS.bind(this);\r\n    this._onKeyDown = this.onKeyDown.bind(this);\r\n    this._onKeyUp = this.onKeyUp.bind(this);\r\n    this._onKeyPress = this.onKeyPress.bind(this);\r\n    this._onInput = this.onInput.bind(this);\r\n    this.align = this.props.align || \"left\";\r\n    this.debounce = new DebounceTimer();\r\n    this.reloadLocalisation = this._reloadLocalisation.bind(this);\r\n    this._isFocused = Subject.create(false);\r\n    this.isFocused = this._isFocused;\r\n    this.placeholderKey = SubscribableUtils.toSubscribable((_a = this.props.placeholder) != null ? _a : \"\", true);\r\n    this.placeholderShown = Subject.create(true);\r\n    this.placeholderTranslation = Subject.create(this.placeholderKey.get());\r\n    this.hidePlaceholderOnFocus = (_b = this.props.hidePlaceholderOnFocus) != null ? _b : false;\r\n    this.subs = [];\r\n  }\r\n  _reloadLocalisation() {\r\n    this.placeholderTranslation.notify();\r\n  }\r\n  onKeyDown(event) {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onKeyDown) == null ? void 0 : _b.call(_a, event);\r\n  }\r\n  onKeyUp(event) {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onKeyUp) == null ? void 0 : _b.call(_a, event);\r\n  }\r\n  onKeyPress(event) {\r\n    var _a, _b;\r\n    const keyCode = event.keyCode || event.which;\r\n    (_b = (_a = this.props).onKeyPress) == null ? void 0 : _b.call(_a, event);\r\n    if (event.defaultPrevented) {\r\n      return;\r\n    }\r\n    if (this.props.charFilter && !this.props.charFilter(String.fromCharCode(keyCode))) {\r\n      event.preventDefault();\r\n      return;\r\n    }\r\n  }\r\n  onInput() {\r\n    var _a;\r\n    this.debounce.schedule(() => {\r\n      const value2 = this.inputRef.instance.value;\r\n      if (value2 === this.model.get()) {\r\n        return;\r\n      }\r\n      this.model.set(value2);\r\n    }, (_a = this.props.debounceDuration) != null ? _a : 0);\r\n  }\r\n  onInputUpdated(value2) {\r\n    var _a, _b;\r\n    this.inputRef.instance.value = value2;\r\n    (_b = (_a = this.props).onInput) == null ? void 0 : _b.call(_a, this.inputRef.instance);\r\n    if (!this.hidePlaceholderOnFocus && value2.length === 0) {\r\n      this.placeholderShown.set(true);\r\n    }\r\n  }\r\n  onFocusIn() {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onFocusIn) == null ? void 0 : _b.call(_a);\r\n    this.input_id = InputsListener.addInputChangeCallback(\"MENU_CORE\", \"KEY_MENU_SR_BACK\", (down) => {\r\n      if (down) {\r\n        this.inputRef.instance.blur();\r\n      }\r\n    });\r\n    if (this.hidePlaceholderOnFocus && this.inputRef.instance.value.length === 0) {\r\n      this.placeholderShown.set(false);\r\n    }\r\n  }\r\n  onFocusOut() {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onFocusOut) == null ? void 0 : _b.call(_a);\r\n    InputsListener.removeInputChangeCallback(this.input_id);\r\n    if (this.hidePlaceholderOnFocus && this.inputRef.instance.value.length === 0) {\r\n      this.placeholderShown.set(true);\r\n    }\r\n  }\r\n  focus() {\r\n    this.inputRef.instance.focus();\r\n  }\r\n  blur() {\r\n    this.inputRef.instance.blur();\r\n  }\r\n  value() {\r\n    return this.model.get();\r\n  }\r\n  clearInput() {\r\n    this.model.set(\"\");\r\n  }\r\n  _dispatchFocusOutEvent() {\r\n    this.inputRef.instance.blur();\r\n  }\r\n  _setValueFromOS(text) {\r\n    this.inputRef.instance.value = text;\r\n    this.inputRef.instance.dispatchEvent(new InputEvent(\"change\"));\r\n    this.inputRef.instance.dispatchEvent(new InputEvent(\"input\"));\r\n    this.inputRef.instance.dispatchEvent(new InputEvent(\"focusout\"));\r\n    this.inputRef.instance.blur();\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"input\",\r\n      {\r\n        id: this.uuid,\r\n        ref: this.inputRef,\r\n        type: this.props.type,\r\n        class: {\r\n          [`align-${this.align}`]: this.align !== \"left\"\r\n        },\r\n        placeholder: MappedSubject.create(\r\n          ([placeholderShown, placeholderKey]) => {\r\n            return placeholderShown ? Utils.Translate(placeholderKey) : \"\";\r\n          },\r\n          this.placeholderShown,\r\n          this.placeholderKey\r\n        ),\r\n        disabled: this.props.disabled,\r\n        value: SubscribableUtils.toSubscribable(this.props.model || this.props.value || \"\", true).get()\r\n      }\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.subs.push(\r\n      this.model.sub((value2) => {\r\n        this.onInputUpdated(value2);\r\n      }, true),\r\n      this.placeholderKey.sub((key) => {\r\n        this.placeholderTranslation.set(key);\r\n      }, true)\r\n    );\r\n    this.inputRef.instance.addEventListener(\"focus\", () => {\r\n      if (this._isFocused.get()) {\r\n        return;\r\n      }\r\n      this._isFocused.set(true);\r\n      Coherent.trigger(\"FOCUS_INPUT_FIELD\", this.uuid, \"\", \"\", \"\", this.props.type === \"number\");\r\n      Coherent.on(\"mousePressOutsideView\", this.dispatchFocusOutEvent);\r\n      Coherent.on(\"SetInputTextFromOS\", this.setValueFromOS);\r\n      this.onFocusIn();\r\n    });\r\n    this.inputRef.instance.addEventListener(\"focusout\", () => {\r\n      if (!this._isFocused.get()) {\r\n        return;\r\n      }\r\n      this._isFocused.set(false);\r\n      Coherent.trigger(\"UNFOCUS_INPUT_FIELD\", this.uuid);\r\n      Coherent.off(\"mousePressOutsideView\", this.dispatchFocusOutEvent);\r\n      Coherent.off(\"SetInputTextFromOS\", this.setValueFromOS);\r\n      this.onFocusOut();\r\n    });\r\n    this.inputRef.instance.addEventListener(\"input\", this._onInput);\r\n    this.inputRef.instance.addEventListener(\"keydown\", this._onKeyDown);\r\n    this.inputRef.instance.addEventListener(\"keyup\", this._onKeyUp);\r\n    this.inputRef.instance.addEventListener(\"keypress\", this._onKeyPress);\r\n    Coherent.on(\"RELOAD_LOCALISATION\", this.reloadLocalisation);\r\n    if (this.props.focusOnInit) {\r\n      this.focus();\r\n    }\r\n  }\r\n  destroy() {\r\n    this.subs.forEach((s) => s.destroy());\r\n    if (this._isFocused.get()) {\r\n      Coherent.trigger(\"UNFOCUS_INPUT_FIELD\", this.uuid);\r\n      Coherent.off(\"mousePressOutsideView\", this.dispatchFocusOutEvent);\r\n    }\r\n    this.inputRef.instance.removeEventListener(\"keydown\", this._onKeyDown);\r\n    this.inputRef.instance.removeEventListener(\"keyup\", this._onKeyUp);\r\n    this.inputRef.instance.removeEventListener(\"keypress\", this._onKeyPress);\r\n    this.inputRef.instance.removeEventListener(\"input\", this._onInput);\r\n    Coherent.off(\"RELOAD_LOCALISATION\", this.reloadLocalisation);\r\n    super.destroy();\r\n  }\r\n}\r\nconst addIconPath = \"coui://html_ui/efb_ui/efb_os/Assets/icons/NoMargin/Close.svg\";\r\nclass TextBox extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.subscriptions = [];\r\n    this.inputRef = FSComponent.createRef();\r\n    this.model = this.props.model || Subject.create(SubscribableUtils.toSubscribable(this.props.value || \"\", true).get());\r\n    this.hideDeleteTextButton = Subject.create(true);\r\n    this.onDelete = this._onDelete.bind(this);\r\n    this.onmousedown = (e) => {\r\n      e.preventDefault();\r\n      if (!this.inputRef.instance.isFocused.get()) {\r\n        this.inputRef.instance.focus();\r\n      }\r\n    };\r\n    this.prefix = SubscribableUtils.toSubscribable(\r\n      this.props.prefix || \"\",\r\n      true\r\n    );\r\n    this.suffix = SubscribableUtils.toSubscribable(\r\n      this.props.suffix || \"\",\r\n      true\r\n    );\r\n    this.showPrefix = SubscribableUtils.toSubscribable(this.props.showPrefix || true, true);\r\n    this.showSuffix = SubscribableUtils.toSubscribable(this.props.showSuffix || true, true);\r\n    this.prefixRef = FSComponent.createRef();\r\n    this.suffixRef = FSComponent.createRef();\r\n    this.showPrefixOrSuffixMapFunction = ([value2, show]) => {\r\n      return !show || value2.toString().length === 0;\r\n    };\r\n  }\r\n  _onDelete(event) {\r\n    var _a, _b;\r\n    event.preventDefault();\r\n    this.hideDeleteTextButton.set(true);\r\n    this.inputRef.instance.clearInput();\r\n    (_b = (_a = this.props).onDelete) == null ? void 0 : _b.call(_a);\r\n    if (this.props.focusOnClear) {\r\n      this.inputRef.instance.focus();\r\n    }\r\n  }\r\n  onInput(input) {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onInput) == null ? void 0 : _b.call(_a, input);\r\n    if (this.props.showDeleteIcon) {\r\n      this.hideDeleteTextButton.set(input.value.trim().length === 0);\r\n    }\r\n  }\r\n  onFocusIn() {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onFocusIn) == null ? void 0 : _b.call(_a);\r\n    this.gamepadUiComponentRef.instance.classList.add(\"textbox--focused\");\r\n  }\r\n  onFocusOut() {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onFocusOut) == null ? void 0 : _b.call(_a);\r\n    this.gamepadUiComponentRef.instance.classList.remove(\"textbox--focused\");\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.gamepadUiComponentRef, class: \"textbox\" }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"disabled-layer\" }), /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.prefixRef,\r\n        class: {\r\n          prefix: true,\r\n          \"prefix--hidden\": MappedSubject.create(this.prefix, this.showPrefix).map(\r\n            this.showPrefixOrSuffixMapFunction\r\n          )\r\n        }\r\n      }\r\n    ), /* @__PURE__ */ FSComponent.buildComponent(\r\n      Input,\r\n      {\r\n        ref: this.inputRef,\r\n        type: \"text\",\r\n        align: this.props.align,\r\n        model: this.model,\r\n        placeholder: this.props.placeholder,\r\n        disabled: this.props.disabled,\r\n        hidePlaceholderOnFocus: this.props.hidePlaceholderOnFocus,\r\n        focusOnInit: this.props.focusOnInit,\r\n        onFocusIn: this.onFocusIn.bind(this),\r\n        onFocusOut: this.onFocusOut.bind(this),\r\n        onInput: this.onInput.bind(this),\r\n        debounceDuration: this.props.debounceDuration,\r\n        onKeyDown: this.props.onKeyDown,\r\n        onKeyUp: this.props.onKeyUp,\r\n        onKeyPress: this.props.onKeyPress,\r\n        charFilter: this.props.charFilter\r\n      }\r\n    ), /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.suffixRef,\r\n        class: {\r\n          suffix: true,\r\n          \"suffix--hidden\": MappedSubject.create(this.suffix, this.showSuffix).map(\r\n            this.showPrefixOrSuffixMapFunction\r\n          )\r\n        }\r\n      }\r\n    ), this.props.showDeleteIcon && /* @__PURE__ */ FSComponent.buildComponent(\r\n      IconButton,\r\n      {\r\n        class: mergeClassProp(\"delete-text-button\", { hide: this.hideDeleteTextButton }),\r\n        iconPath: addIconPath,\r\n        callback: this.onDelete\r\n      }\r\n    ));\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    const prefixSuffixCb = (reference) => {\r\n      let previousNode = null;\r\n      return (value2) => {\r\n        if (previousNode) {\r\n          FSComponent.shallowDestroy(previousNode);\r\n          const instance = previousNode.instance;\r\n          if (instance && instance instanceof DisplayComponent) {\r\n            instance.destroy();\r\n          }\r\n          previousNode = null;\r\n        }\r\n        if (typeof value2 === \"string\") {\r\n          reference.instance.innerText = value2;\r\n        } else if (typeof value2 === \"object\" && isVNode(value2)) {\r\n          previousNode = value2;\r\n          reference.instance.innerHTML = \"\";\r\n          FSComponent.render(value2, reference.instance);\r\n        } else {\r\n          reference.instance.innerText = value2;\r\n        }\r\n      };\r\n    };\r\n    this.subscriptions.push(\r\n      this.prefix.sub(prefixSuffixCb(this.prefixRef), true),\r\n      this.suffix.sub(prefixSuffixCb(this.suffixRef), true)\r\n    );\r\n    this.gamepadUiComponentRef.instance.addEventListener(\"mousedown\", this.onmousedown);\r\n  }\r\n  destroy() {\r\n    this.gamepadUiComponentRef.instance.removeEventListener(\"mousedown\", this.onmousedown);\r\n    this.subscriptions.forEach((s) => s.destroy());\r\n    super.destroy();\r\n  }\r\n}\r\nconst _UnitBox = class _UnitBox extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a, _b;\r\n    super(...arguments);\r\n    this.valueNumber = this.props.value;\r\n    this.unit = SubscribableUtils.toSubscribable((_a = this.props.unit) != null ? _a : null, true);\r\n    this.showUnitSuffix = SubscribableUtils.toSubscribable((_b = this.props.showSuffix) != null ? _b : true, true);\r\n    this.valueText = Subject.create(\"0\");\r\n    this.subs = [];\r\n    this.suffixSmall = Subject.create(\"\");\r\n    this.suffixBig = Subject.create(\"\");\r\n  }\r\n  static createDefaultUnitTextMap() {\r\n    const originalMap = UnitFormatter.getUnitTextMap();\r\n    const map = {};\r\n    for (const family in originalMap) {\r\n      const nameMap = map[family] = {};\r\n      const originalNameMap = originalMap[family];\r\n      for (const name in originalNameMap) {\r\n        const text = nameMap[name] = [\"\", \"\"];\r\n        const originalText = originalNameMap[name];\r\n        if (originalText[0].startsWith(\"\u00B0\")) {\r\n          text[0] = \"\u00B0\";\r\n          text[1] = originalText.substring(1);\r\n        } else {\r\n          text[1] = originalText;\r\n        }\r\n      }\r\n    }\r\n    return map;\r\n  }\r\n  updateDisplay(value2, displayUnit) {\r\n    if (!displayUnit || !value2.unit.canConvert(displayUnit)) {\r\n      displayUnit = value2.unit;\r\n    }\r\n    const numberValue = value2.asUnit(displayUnit);\r\n    if (numberValue >= 9999999) {\r\n      this.valueText.set(\"9999999\");\r\n      return;\r\n    }\r\n    const numberText = NumberFormatter.create({\r\n      nanString: \"0\"\r\n    })(numberValue);\r\n    if (numberText.includes(\".\")) {\r\n      const dotPos = numberText.indexOf(\".\");\r\n      this.valueText.set(numberText.substring(0, dotPos + 3));\r\n    } else {\r\n      this.valueText.set(this.valueText.get().includes(\".\") ? `${numberText}.` : numberText);\r\n    }\r\n    const unitTexts = _UnitBox.DEFAULT_UNIT_FORMATTER(displayUnit);\r\n    if (unitTexts === null) {\r\n      this.suffixSmall.set(\"\");\r\n      this.suffixBig.set(\"\");\r\n      return;\r\n    }\r\n    this.suffixSmall.set(unitTexts[0]);\r\n    this.suffixBig.set(unitTexts[1]);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.gamepadUiComponentRef,\r\n        class: { unitbox: true, \"unitbox--disabled\": this.props.disabled || false }\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\r\n        TextBox,\r\n        {\r\n          align: \"right\",\r\n          showDeleteIcon: this.props.showDeleteIcon || false,\r\n          customDeleteIcon: this.props.customDeleteIcon,\r\n          focusOnClear: this.props.focusOnClear,\r\n          onDelete: this.props.onDelete,\r\n          model: this.valueText,\r\n          placeholder: this.props.placeholder,\r\n          hidePlaceholderOnFocus: this.props.hidePlaceholderOnFocus,\r\n          disabled: this.props.disabled,\r\n          focusOnInit: this.props.focusOnInit,\r\n          onFocusIn: this.props.onFocusIn,\r\n          onFocusOut: this.props.onFocusOut,\r\n          onInput: this.props.onInput,\r\n          onKeyPress: this.props.onKeyPress,\r\n          charFilter: (char) => char >= \"0\" && char <= \"9\" || [\",\", \".\"].includes(char),\r\n          suffix: /* @__PURE__ */ FSComponent.buildComponent(FSComponent.Fragment, null, /* @__PURE__ */ FSComponent.buildComponent(\"span\", null, this.suffixSmall), /* @__PURE__ */ FSComponent.buildComponent(\"span\", null, this.suffixBig)),\r\n          showSuffix: this.showUnitSuffix\r\n        }\r\n      )\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.subs.push(\r\n      this.valueText.sub((value2) => {\r\n        value2 = value2.replace(\",\", \".\").replace(/\\.+$/, \"\");\r\n        let displayUnit = this.unit.get();\r\n        if (!displayUnit || !this.valueNumber.get().unit.canConvert(displayUnit)) {\r\n          displayUnit = this.valueNumber.get().unit;\r\n        }\r\n        const unitValue = displayUnit.convertTo(Number(value2), this.valueNumber.get().unit);\r\n        this.valueNumber.set(unitValue);\r\n        this.updateDisplay(this.valueNumber.get(), this.unit.get());\r\n      }),\r\n      this.valueNumber.sub((value2) => {\r\n        this.updateDisplay(value2, this.unit.get());\r\n      }, true),\r\n      this.unit.sub((unit) => {\r\n        this.updateDisplay(this.valueNumber.get(), unit);\r\n      }, true)\r\n    );\r\n  }\r\n  destroy() {\r\n    this.subs.forEach((s) => s.destroy());\r\n    super.destroy();\r\n  }\r\n};\r\n_UnitBox.DEFAULT_UNIT_TEXT_MAP = _UnitBox.createDefaultUnitTextMap();\r\n_UnitBox.DEFAULT_UNIT_FORMATTER = (unit) => {\r\n  var _a;\r\n  const text = (_a = _UnitBox.DEFAULT_UNIT_TEXT_MAP[unit.family]) == null ? void 0 : _a[unit.name];\r\n  if (text) {\r\n    return text;\r\n  }\r\n  return null;\r\n};\r\nlet UnitBox = _UnitBox;\r\nclass UnitsBox extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.inputSub = Subject.create(\"\");\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"units-box-container\", ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(\r\n      Input,\r\n      {\r\n        type: \"text\",\r\n        model: this.inputSub,\r\n        class: \"units-box light-text\",\r\n        charFilter: (char) => char >= \"0\" && char <= \"9\",\r\n        onFocusOut: () => {\r\n          var _a;\r\n          let value2 = parseInt(this.inputSub.get());\r\n          if (Number.isNaN(value2) || value2 < 0) {\r\n            value2 = (_a = this.props.defaultValue) != null ? _a : 0;\r\n          }\r\n          this.props.valueSub.set(value2);\r\n        }\r\n      }\r\n    ), /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"suffix light-text\" }, \"ft\"));\r\n  }\r\n}\r\nclass Incremental extends GamepadUiComponent {\r\n  constructor(props) {\r\n    var _a, _b, _c, _d, _e;\r\n    super(props);\r\n    this.min = SubscribableUtils.toSubscribable((_a = this.props.min) != null ? _a : 0, true);\r\n    this.max = SubscribableUtils.toSubscribable((_b = this.props.max) != null ? _b : Number.MAX_SAFE_INTEGER, true);\r\n    this.step = SubscribableUtils.toSubscribable((_c = this.props.step) != null ? _c : 1, true);\r\n    this.formatter = (_d = this.props.formatter) != null ? _d : NumberFormatter.create();\r\n    this.useTextbox = (_e = this.props.useTextbox) != null ? _e : true;\r\n    this.displayedValue = Subject.create(\"\");\r\n    if (SubscribableUtils.isMutableSubscribable(props.value)) {\r\n      this.value = props.value;\r\n    } else if (SubscribableUtils.isSubscribable(props.value)) {\r\n      this.value = Subject.create(props.value.get());\r\n      this.subscribableValueSubscription = props.value.sub((value2) => this.value.set(value2));\r\n    } else {\r\n      this.value = Subject.create(props.value);\r\n    }\r\n    this.valueSubscription = this.value.sub((newValue) => {\r\n      var _a2, _b2;\r\n      (_b2 = (_a2 = this.props).onChange) == null ? void 0 : _b2.call(_a2, newValue);\r\n    });\r\n    this.displayedValueSubscription = MappedSubject.create(\r\n      ([value2, max]) => {\r\n        this.displayedValue.set(this.formatter(value2, max));\r\n      },\r\n      this.value,\r\n      this.max\r\n    );\r\n  }\r\n  renderButton(icon, direction = -1) {\r\n    if (icon !== void 0 && typeof icon !== \"string\") {\r\n      return icon;\r\n    }\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      IconButton,\r\n      {\r\n        class: direction === -1 ? \"incremental-decrease\" : \"incremental-increase\",\r\n        iconPath: (icon != null ? icon : direction === -1) ? \"coui://html_ui/efb_ui/efb_os/Assets/icons/Remove.svg\" : \"coui://html_ui/efb_ui/efb_os/Assets/icons/Add.svg\",\r\n        callback: () => {\r\n          var _a, _b;\r\n          const newValue = Utils.Clamp(\r\n            this.value.get() + this.step.get() * direction,\r\n            this.min.get(),\r\n            this.max.get()\r\n          );\r\n          this.value.set(newValue);\r\n          (_b = (_a = this.props).onButtonClicked) == null ? void 0 : _b.call(_a, direction, newValue);\r\n        },\r\n        disabled: this.props.disabled\r\n      }\r\n    );\r\n  }\r\n  renderData() {\r\n    if (this.useTextbox) {\r\n      return /* @__PURE__ */ FSComponent.buildComponent(\r\n        TextBox,\r\n        {\r\n          model: this.displayedValue,\r\n          class: \"data-display\",\r\n          charFilter: (char) => char >= \"0\" && char <= \"9\" || char === \".\",\r\n          suffix: this.props.suffix,\r\n          align: \"center\",\r\n          onInput: (e) => {\r\n            const newValue = Number(e.value);\r\n            if (newValue < this.min.get() || newValue > this.max.get()) {\r\n              this.displayedValue.set(\r\n                this.formatter(Utils.Clamp(newValue, this.min.get(), this.max.get()), this.max.get())\r\n              );\r\n              return;\r\n            }\r\n            if (!Number.isNaN(newValue)) {\r\n              this.value.set(Utils.Clamp(newValue, this.min.get(), this.max.get()));\r\n            }\r\n          },\r\n          onKeyDown: (event) => {\r\n            var _a, _b;\r\n            return (_b = (_a = this.props).onKeyDown) == null ? void 0 : _b.call(_a, event, this.value.get());\r\n          },\r\n          onKeyUp: (event) => {\r\n            var _a, _b;\r\n            return (_b = (_a = this.props).onKeyUp) == null ? void 0 : _b.call(_a, event, this.value.get());\r\n          },\r\n          onKeyPress: (event) => {\r\n            var _a, _b;\r\n            return (_b = (_a = this.props).onKeyPress) == null ? void 0 : _b.call(_a, event, this.value.get());\r\n          },\r\n          onFocusIn: this.onTextBoxFocusIn.bind(this),\r\n          onFocusOut: this.onTextBoxFocusOut.bind(this),\r\n          disabled: this.props.disabled\r\n        }\r\n      );\r\n    } else {\r\n      const dataSuffix = this.props.suffix ? /* @__PURE__ */ FSComponent.buildComponent(TT, { key: this.props.suffix, class: \"suffix\" }) : null;\r\n      return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"data-display\" }, /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"data-value\" }, this.displayedValue), dataSuffix);\r\n    }\r\n  }\r\n  // Allow the user to properly enter a value by pausing it's update\r\n  onTextBoxFocusIn() {\r\n    this.displayedValueSubscription.pause();\r\n  }\r\n  onTextBoxFocusOut() {\r\n    this.displayedValueSubscription.resume();\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"incremental\", ref: this.gamepadUiComponentRef }, this.renderButton(this.props.firstIcon, -1), this.renderData(), this.renderButton(this.props.firstIcon, 1));\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.subscribableValueSubscription) == null ? void 0 : _a.destroy();\r\n    this.valueSubscription.destroy();\r\n    this.displayedValueSubscription.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nvar MapShim = function() {\r\n  if (typeof Map !== \"undefined\") {\r\n    return Map;\r\n  }\r\n  function getIndex(arr, key) {\r\n    var result = -1;\r\n    arr.some(function(entry, index2) {\r\n      if (entry[0] === key) {\r\n        result = index2;\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n    return result;\r\n  }\r\n  return (\r\n    /** @class */\r\n    function() {\r\n      function class_1() {\r\n        this.__entries__ = [];\r\n      }\r\n      Object.defineProperty(class_1.prototype, \"size\", {\r\n        /**\r\n         * @returns {boolean}\r\n         */\r\n        get: function() {\r\n          return this.__entries__.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n      });\r\n      class_1.prototype.get = function(key) {\r\n        var index2 = getIndex(this.__entries__, key);\r\n        var entry = this.__entries__[index2];\r\n        return entry && entry[1];\r\n      };\r\n      class_1.prototype.set = function(key, value2) {\r\n        var index2 = getIndex(this.__entries__, key);\r\n        if (~index2) {\r\n          this.__entries__[index2][1] = value2;\r\n        } else {\r\n          this.__entries__.push([key, value2]);\r\n        }\r\n      };\r\n      class_1.prototype.delete = function(key) {\r\n        var entries = this.__entries__;\r\n        var index2 = getIndex(entries, key);\r\n        if (~index2) {\r\n          entries.splice(index2, 1);\r\n        }\r\n      };\r\n      class_1.prototype.has = function(key) {\r\n        return !!~getIndex(this.__entries__, key);\r\n      };\r\n      class_1.prototype.clear = function() {\r\n        this.__entries__.splice(0);\r\n      };\r\n      class_1.prototype.forEach = function(callback, ctx) {\r\n        if (ctx === void 0) {\r\n          ctx = null;\r\n        }\r\n        for (var _i = 0, _a = this.__entries__; _i < _a.length; _i++) {\r\n          var entry = _a[_i];\r\n          callback.call(ctx, entry[1], entry[0]);\r\n        }\r\n      };\r\n      return class_1;\r\n    }()\r\n  );\r\n}();\r\nvar isBrowser = typeof window !== \"undefined\" && typeof document !== \"undefined\" && window.document === document;\r\nvar global$1 = function() {\r\n  if (typeof global !== \"undefined\" && global.Math === Math) {\r\n    return global;\r\n  }\r\n  if (typeof self !== \"undefined\" && self.Math === Math) {\r\n    return self;\r\n  }\r\n  if (typeof window !== \"undefined\" && window.Math === Math) {\r\n    return window;\r\n  }\r\n  return Function(\"return this\")();\r\n}();\r\nvar requestAnimationFrame$1 = function() {\r\n  if (typeof requestAnimationFrame === \"function\") {\r\n    return requestAnimationFrame.bind(global$1);\r\n  }\r\n  return function(callback) {\r\n    return setTimeout(function() {\r\n      return callback(Date.now());\r\n    }, 1e3 / 60);\r\n  };\r\n}();\r\nvar trailingTimeout = 2;\r\nfunction throttle(callback, delay) {\r\n  var leadingCall = false, trailingCall = false, lastCallTime = 0;\r\n  function resolvePending() {\r\n    if (leadingCall) {\r\n      leadingCall = false;\r\n      callback();\r\n    }\r\n    if (trailingCall) {\r\n      proxy();\r\n    }\r\n  }\r\n  function timeoutCallback() {\r\n    requestAnimationFrame$1(resolvePending);\r\n  }\r\n  function proxy() {\r\n    var timeStamp = Date.now();\r\n    if (leadingCall) {\r\n      if (timeStamp - lastCallTime < trailingTimeout) {\r\n        return;\r\n      }\r\n      trailingCall = true;\r\n    } else {\r\n      leadingCall = true;\r\n      trailingCall = false;\r\n      setTimeout(timeoutCallback, delay);\r\n    }\r\n    lastCallTime = timeStamp;\r\n  }\r\n  return proxy;\r\n}\r\nvar REFRESH_DELAY = 20;\r\nvar transitionKeys = [\"top\", \"right\", \"bottom\", \"left\", \"width\", \"height\", \"size\", \"weight\"];\r\nvar mutationObserverSupported = typeof MutationObserver !== \"undefined\";\r\nvar ResizeObserverController = (\r\n  /** @class */\r\n  function() {\r\n    function ResizeObserverController2() {\r\n      this.connected_ = false;\r\n      this.mutationEventsAdded_ = false;\r\n      this.mutationsObserver_ = null;\r\n      this.observers_ = [];\r\n      this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\r\n      this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\r\n    }\r\n    ResizeObserverController2.prototype.addObserver = function(observer) {\r\n      if (!~this.observers_.indexOf(observer)) {\r\n        this.observers_.push(observer);\r\n      }\r\n      if (!this.connected_) {\r\n        this.connect_();\r\n      }\r\n    };\r\n    ResizeObserverController2.prototype.removeObserver = function(observer) {\r\n      var observers2 = this.observers_;\r\n      var index2 = observers2.indexOf(observer);\r\n      if (~index2) {\r\n        observers2.splice(index2, 1);\r\n      }\r\n      if (!observers2.length && this.connected_) {\r\n        this.disconnect_();\r\n      }\r\n    };\r\n    ResizeObserverController2.prototype.refresh = function() {\r\n      var changesDetected = this.updateObservers_();\r\n      if (changesDetected) {\r\n        this.refresh();\r\n      }\r\n    };\r\n    ResizeObserverController2.prototype.updateObservers_ = function() {\r\n      var activeObservers = this.observers_.filter(function(observer) {\r\n        return observer.gatherActive(), observer.hasActive();\r\n      });\r\n      activeObservers.forEach(function(observer) {\r\n        return observer.broadcastActive();\r\n      });\r\n      return activeObservers.length > 0;\r\n    };\r\n    ResizeObserverController2.prototype.connect_ = function() {\r\n      if (!isBrowser || this.connected_) {\r\n        return;\r\n      }\r\n      document.addEventListener(\"transitionend\", this.onTransitionEnd_);\r\n      window.addEventListener(\"resize\", this.refresh);\r\n      if (mutationObserverSupported) {\r\n        this.mutationsObserver_ = new MutationObserver(this.refresh);\r\n        this.mutationsObserver_.observe(document, {\r\n          attributes: true,\r\n          childList: true,\r\n          characterData: true,\r\n          subtree: true\r\n        });\r\n      } else {\r\n        document.addEventListener(\"DOMSubtreeModified\", this.refresh);\r\n        this.mutationEventsAdded_ = true;\r\n      }\r\n      this.connected_ = true;\r\n    };\r\n    ResizeObserverController2.prototype.disconnect_ = function() {\r\n      if (!isBrowser || !this.connected_) {\r\n        return;\r\n      }\r\n      document.removeEventListener(\"transitionend\", this.onTransitionEnd_);\r\n      window.removeEventListener(\"resize\", this.refresh);\r\n      if (this.mutationsObserver_) {\r\n        this.mutationsObserver_.disconnect();\r\n      }\r\n      if (this.mutationEventsAdded_) {\r\n        document.removeEventListener(\"DOMSubtreeModified\", this.refresh);\r\n      }\r\n      this.mutationsObserver_ = null;\r\n      this.mutationEventsAdded_ = false;\r\n      this.connected_ = false;\r\n    };\r\n    ResizeObserverController2.prototype.onTransitionEnd_ = function(_a) {\r\n      var _b = _a.propertyName, propertyName = _b === void 0 ? \"\" : _b;\r\n      var isReflowProperty = transitionKeys.some(function(key) {\r\n        return !!~propertyName.indexOf(key);\r\n      });\r\n      if (isReflowProperty) {\r\n        this.refresh();\r\n      }\r\n    };\r\n    ResizeObserverController2.getInstance = function() {\r\n      if (!this.instance_) {\r\n        this.instance_ = new ResizeObserverController2();\r\n      }\r\n      return this.instance_;\r\n    };\r\n    ResizeObserverController2.instance_ = null;\r\n    return ResizeObserverController2;\r\n  }()\r\n);\r\nvar defineConfigurable = function(target, props) {\r\n  for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\r\n    var key = _a[_i];\r\n    Object.defineProperty(target, key, {\r\n      value: props[key],\r\n      enumerable: false,\r\n      writable: false,\r\n      configurable: true\r\n    });\r\n  }\r\n  return target;\r\n};\r\nvar getWindowOf = function(target) {\r\n  var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\r\n  return ownerGlobal || global$1;\r\n};\r\nvar emptyRect = createRectInit(0, 0, 0, 0);\r\nfunction toFloat(value2) {\r\n  return parseFloat(value2) || 0;\r\n}\r\nfunction getBordersSize(styles) {\r\n  var positions = [];\r\n  for (var _i = 1; _i < arguments.length; _i++) {\r\n    positions[_i - 1] = arguments[_i];\r\n  }\r\n  return positions.reduce(function(size, position) {\r\n    var value2 = styles[\"border-\" + position + \"-width\"];\r\n    return size + toFloat(value2);\r\n  }, 0);\r\n}\r\nfunction getPaddings(styles) {\r\n  var positions = [\"top\", \"right\", \"bottom\", \"left\"];\r\n  var paddings = {};\r\n  for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n    var position = positions_1[_i];\r\n    var value2 = styles[\"padding-\" + position];\r\n    paddings[position] = toFloat(value2);\r\n  }\r\n  return paddings;\r\n}\r\nfunction getSVGContentRect(target) {\r\n  var bbox = target.getBBox();\r\n  return createRectInit(0, 0, bbox.width, bbox.height);\r\n}\r\nfunction getHTMLElementContentRect(target) {\r\n  var clientWidth = target.clientWidth, clientHeight = target.clientHeight;\r\n  if (!clientWidth && !clientHeight) {\r\n    return emptyRect;\r\n  }\r\n  var styles = getWindowOf(target).getComputedStyle(target);\r\n  var paddings = getPaddings(styles);\r\n  var horizPad = paddings.left + paddings.right;\r\n  var vertPad = paddings.top + paddings.bottom;\r\n  var width = toFloat(styles.width), height = toFloat(styles.height);\r\n  if (styles.boxSizing === \"border-box\") {\r\n    if (Math.round(width + horizPad) !== clientWidth) {\r\n      width -= getBordersSize(styles, \"left\", \"right\") + horizPad;\r\n    }\r\n    if (Math.round(height + vertPad) !== clientHeight) {\r\n      height -= getBordersSize(styles, \"top\", \"bottom\") + vertPad;\r\n    }\r\n  }\r\n  if (!isDocumentElement(target)) {\r\n    var vertScrollbar = Math.round(width + horizPad) - clientWidth;\r\n    var horizScrollbar = Math.round(height + vertPad) - clientHeight;\r\n    if (Math.abs(vertScrollbar) !== 1) {\r\n      width -= vertScrollbar;\r\n    }\r\n    if (Math.abs(horizScrollbar) !== 1) {\r\n      height -= horizScrollbar;\r\n    }\r\n  }\r\n  return createRectInit(paddings.left, paddings.top, width, height);\r\n}\r\nvar isSVGGraphicsElement = function() {\r\n  if (typeof SVGGraphicsElement !== \"undefined\") {\r\n    return function(target) {\r\n      return target instanceof getWindowOf(target).SVGGraphicsElement;\r\n    };\r\n  }\r\n  return function(target) {\r\n    return target instanceof getWindowOf(target).SVGElement && typeof target.getBBox === \"function\";\r\n  };\r\n}();\r\nfunction isDocumentElement(target) {\r\n  return target === getWindowOf(target).document.documentElement;\r\n}\r\nfunction getContentRect(target) {\r\n  if (!isBrowser) {\r\n    return emptyRect;\r\n  }\r\n  if (isSVGGraphicsElement(target)) {\r\n    return getSVGContentRect(target);\r\n  }\r\n  return getHTMLElementContentRect(target);\r\n}\r\nfunction createReadOnlyRect(_a) {\r\n  var x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n  var Constr = typeof DOMRectReadOnly !== \"undefined\" ? DOMRectReadOnly : Object;\r\n  var rect = Object.create(Constr.prototype);\r\n  defineConfigurable(rect, {\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    top: y,\r\n    right: x + width,\r\n    bottom: height + y,\r\n    left: x\r\n  });\r\n  return rect;\r\n}\r\nfunction createRectInit(x, y, width, height) {\r\n  return { x, y, width, height };\r\n}\r\nvar ResizeObservation = (\r\n  /** @class */\r\n  function() {\r\n    function ResizeObservation2(target) {\r\n      this.broadcastWidth = 0;\r\n      this.broadcastHeight = 0;\r\n      this.contentRect_ = createRectInit(0, 0, 0, 0);\r\n      this.target = target;\r\n    }\r\n    ResizeObservation2.prototype.isActive = function() {\r\n      var rect = getContentRect(this.target);\r\n      this.contentRect_ = rect;\r\n      return rect.width !== this.broadcastWidth || rect.height !== this.broadcastHeight;\r\n    };\r\n    ResizeObservation2.prototype.broadcastRect = function() {\r\n      var rect = this.contentRect_;\r\n      this.broadcastWidth = rect.width;\r\n      this.broadcastHeight = rect.height;\r\n      return rect;\r\n    };\r\n    return ResizeObservation2;\r\n  }()\r\n);\r\nvar ResizeObserverEntry = (\r\n  /** @class */\r\n  /* @__PURE__ */ function() {\r\n    function ResizeObserverEntry2(target, rectInit) {\r\n      var contentRect = createReadOnlyRect(rectInit);\r\n      defineConfigurable(this, { target, contentRect });\r\n    }\r\n    return ResizeObserverEntry2;\r\n  }()\r\n);\r\nvar ResizeObserverSPI = (\r\n  /** @class */\r\n  function() {\r\n    function ResizeObserverSPI2(callback, controller, callbackCtx) {\r\n      this.activeObservations_ = [];\r\n      this.observations_ = new MapShim();\r\n      if (typeof callback !== \"function\") {\r\n        throw new TypeError(\"The callback provided as parameter 1 is not a function.\");\r\n      }\r\n      this.callback_ = callback;\r\n      this.controller_ = controller;\r\n      this.callbackCtx_ = callbackCtx;\r\n    }\r\n    ResizeObserverSPI2.prototype.observe = function(target) {\r\n      if (!arguments.length) {\r\n        throw new TypeError(\"1 argument required, but only 0 present.\");\r\n      }\r\n      if (typeof Element === \"undefined\" || !(Element instanceof Object)) {\r\n        return;\r\n      }\r\n      if (!(target instanceof getWindowOf(target).Element)) {\r\n        throw new TypeError('parameter 1 is not of type \"Element\".');\r\n      }\r\n      var observations = this.observations_;\r\n      if (observations.has(target)) {\r\n        return;\r\n      }\r\n      observations.set(target, new ResizeObservation(target));\r\n      this.controller_.addObserver(this);\r\n      this.controller_.refresh();\r\n    };\r\n    ResizeObserverSPI2.prototype.unobserve = function(target) {\r\n      if (!arguments.length) {\r\n        throw new TypeError(\"1 argument required, but only 0 present.\");\r\n      }\r\n      if (typeof Element === \"undefined\" || !(Element instanceof Object)) {\r\n        return;\r\n      }\r\n      if (!(target instanceof getWindowOf(target).Element)) {\r\n        throw new TypeError('parameter 1 is not of type \"Element\".');\r\n      }\r\n      var observations = this.observations_;\r\n      if (!observations.has(target)) {\r\n        return;\r\n      }\r\n      observations.delete(target);\r\n      if (!observations.size) {\r\n        this.controller_.removeObserver(this);\r\n      }\r\n    };\r\n    ResizeObserverSPI2.prototype.disconnect = function() {\r\n      this.clearActive();\r\n      this.observations_.clear();\r\n      this.controller_.removeObserver(this);\r\n    };\r\n    ResizeObserverSPI2.prototype.gatherActive = function() {\r\n      var _this = this;\r\n      this.clearActive();\r\n      this.observations_.forEach(function(observation) {\r\n        if (observation.isActive()) {\r\n          _this.activeObservations_.push(observation);\r\n        }\r\n      });\r\n    };\r\n    ResizeObserverSPI2.prototype.broadcastActive = function() {\r\n      if (!this.hasActive()) {\r\n        return;\r\n      }\r\n      var ctx = this.callbackCtx_;\r\n      var entries = this.activeObservations_.map(function(observation) {\r\n        return new ResizeObserverEntry(observation.target, observation.broadcastRect());\r\n      });\r\n      this.callback_.call(ctx, entries, ctx);\r\n      this.clearActive();\r\n    };\r\n    ResizeObserverSPI2.prototype.clearActive = function() {\r\n      this.activeObservations_.splice(0);\r\n    };\r\n    ResizeObserverSPI2.prototype.hasActive = function() {\r\n      return this.activeObservations_.length > 0;\r\n    };\r\n    return ResizeObserverSPI2;\r\n  }()\r\n);\r\nvar observers = typeof WeakMap !== \"undefined\" ? /* @__PURE__ */ new WeakMap() : new MapShim();\r\nvar ResizeObserver = (\r\n  /** @class */\r\n  /* @__PURE__ */ function() {\r\n    function ResizeObserver2(callback) {\r\n      if (!(this instanceof ResizeObserver2)) {\r\n        throw new TypeError(\"Cannot call a class as a function.\");\r\n      }\r\n      if (!arguments.length) {\r\n        throw new TypeError(\"1 argument required, but only 0 present.\");\r\n      }\r\n      var controller = ResizeObserverController.getInstance();\r\n      var observer = new ResizeObserverSPI(callback, controller, this);\r\n      observers.set(this, observer);\r\n    }\r\n    return ResizeObserver2;\r\n  }()\r\n);\r\n[\r\n  \"observe\",\r\n  \"unobserve\",\r\n  \"disconnect\"\r\n].forEach(function(method) {\r\n  ResizeObserver.prototype[method] = function() {\r\n    var _a;\r\n    return (_a = observers.get(this))[method].apply(_a, arguments);\r\n  };\r\n});\r\nvar index = function() {\r\n  if (typeof global$1.ResizeObserver !== \"undefined\") {\r\n    return global$1.ResizeObserver;\r\n  }\r\n  return ResizeObserver;\r\n}();\r\nconst defaultProps = {\r\n  speed: 50,\r\n  // 50 pixels/seconds => 0.05 px/ms => 1px/20ms\r\n  startDelay: 500,\r\n  resetDelay: 500\r\n};\r\nclass Marquee extends DisplayComponent {\r\n  constructor() {\r\n    var _a, _b, _c, _d, _e;\r\n    super(...arguments);\r\n    this.containerRef = FSComponent.createRef();\r\n    this.marqueeRef = FSComponent.createRef();\r\n    this.speedPxPerSeconds = SubscribableUtils.toSubscribable(\r\n      (_a = this.props.speed) != null ? _a : defaultProps.speed,\r\n      true\r\n    );\r\n    this.startDelayMs = SubscribableUtils.toSubscribable(\r\n      (_c = (_b = this.props.startDelay) != null ? _b : this.props.delay) != null ? _c : defaultProps.startDelay,\r\n      true\r\n    );\r\n    this.resetDelayMs = SubscribableUtils.toSubscribable(\r\n      (_e = (_d = this.props.resetDelay) != null ? _d : this.props.delay) != null ? _e : defaultProps.resetDelay,\r\n      true\r\n    );\r\n    this.transitionActive = Subject.create(false);\r\n    this.delayMs = Subject.create(this.startDelayMs.get());\r\n    this.durationMs = Subject.create(0);\r\n    this.translationPx = Subject.create(0);\r\n  }\r\n  getDurationForDistance(distance) {\r\n    return Math.abs(distance) * (1e3 / Math.abs(this.speedPxPerSeconds.get()));\r\n  }\r\n  render() {\r\n    const marqueeStyle = {\r\n      \"--duration\": this.durationMs.map((duration) => `${duration}ms`),\r\n      \"--delay\": this.delayMs.map((delay) => `${delay}ms`),\r\n      \"--translation\": this.translationPx.map((translation) => `${translation}px`)\r\n    };\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.containerRef, class: mergeClassProp(\"efb-marquee-container\", this.props.class) }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.marqueeRef, class: \"efb-marquee\", style: marqueeStyle }, this.props.children));\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    let containerWidth = this.containerRef.instance.clientWidth;\r\n    let marqueeWidth = this.marqueeRef.instance.clientWidth;\r\n    let transitionRightPx = Math.min(containerWidth - marqueeWidth, 0);\r\n    let isLeftToRight = true;\r\n    let timeoutId;\r\n    const self2 = this;\r\n    this.observer = new index(function(mutations) {\r\n      mutations.forEach(function(_mutation) {\r\n        containerWidth = self2.containerRef.instance.clientWidth;\r\n        marqueeWidth = self2.marqueeRef.instance.clientWidth;\r\n        transitionRightPx = Math.min(containerWidth - marqueeWidth, 0);\r\n        if (self2.transitionActive.get()) {\r\n          isLeftToRight = true;\r\n          self2.durationMs.set(0);\r\n          self2.translationPx.set(0);\r\n          if (transitionRightPx < 0) {\r\n            setTimeout(() => {\r\n              if (self2.transitionActive.get()) {\r\n                self2.durationMs.set(self2.getDurationForDistance(transitionRightPx));\r\n                self2.translationPx.set(transitionRightPx);\r\n              }\r\n            }, self2.startDelayMs.get());\r\n          }\r\n        }\r\n      });\r\n    });\r\n    this.observer.observe(this.marqueeRef.instance);\r\n    let activator = this.marqueeRef.instance;\r\n    if (this.props.activator) {\r\n      const { instance } = this.props.activator;\r\n      if (instance instanceof HTMLElement) {\r\n        activator = instance;\r\n      } else if (instance instanceof GamepadUiComponent) {\r\n        activator = instance.gamepadUiComponentRef.instance;\r\n      }\r\n    }\r\n    activator.addEventListener(\"mouseenter\", () => {\r\n      if (this.transitionActive.get() || transitionRightPx >= 0) {\r\n        return;\r\n      }\r\n      this.transitionActive.set(true);\r\n      isLeftToRight = true;\r\n      this.delayMs.set(this.startDelayMs.get());\r\n      this.durationMs.set(this.getDurationForDistance(transitionRightPx));\r\n      this.translationPx.set(transitionRightPx);\r\n    });\r\n    activator.addEventListener(\"mouseleave\", () => {\r\n      if (!this.transitionActive.get()) {\r\n        return;\r\n      }\r\n      this.transitionActive.set(false);\r\n      if (timeoutId) {\r\n        clearTimeout(timeoutId);\r\n        timeoutId = void 0;\r\n      }\r\n      isLeftToRight = true;\r\n      this.delayMs.set(0);\r\n      this.durationMs.set(0);\r\n      this.translationPx.set(0);\r\n    });\r\n    const onTransitionEnded = (event) => {\r\n      if (event.target !== this.marqueeRef.instance) {\r\n        return;\r\n      }\r\n      if (event.propertyName !== \"transform\") {\r\n        return;\r\n      }\r\n      if (!this.transitionActive.get()) {\r\n        return;\r\n      }\r\n      const leftToRightEnded = isLeftToRight;\r\n      isLeftToRight = !isLeftToRight;\r\n      if (leftToRightEnded) {\r\n        this.delayMs.set(this.resetDelayMs.get());\r\n        this.durationMs.set(0);\r\n        this.translationPx.set(0);\r\n        if (this.delayMs.get() === 0) {\r\n          timeoutId = setTimeout(() => {\r\n            onTransitionEnded(event);\r\n          });\r\n        }\r\n      } else {\r\n        this.delayMs.set(this.startDelayMs.get());\r\n        this.durationMs.set(this.getDurationForDistance(transitionRightPx));\r\n        this.translationPx.set(transitionRightPx);\r\n      }\r\n    };\r\n    this.marqueeRef.instance.addEventListener(\"transitionend\", onTransitionEnded);\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.observer) == null ? void 0 : _a.disconnect();\r\n    super.destroy();\r\n  }\r\n}\r\nconst _NumberUnitDisplay = class _NumberUnitDisplay extends AbstractNumberUnitDisplay {\r\n  constructor() {\r\n    var _a, _b;\r\n    super(...arguments);\r\n    this.formatter = (_a = this.props.formatter) != null ? _a : NumberFormatter.create({\r\n      // TODO Properly format the time\r\n      precision: 0.01,\r\n      maxDigits: 5,\r\n      forceDecimalZeroes: false,\r\n      nanString: \"0\"\r\n    });\r\n    this.unitFormatter = (_b = this.props.unitFormatter) != null ? _b : _NumberUnitDisplay.DEFAULT_UNIT_FORMATTER;\r\n    this.unitTextBigDisplay = Subject.create(\"\");\r\n    this.unitTextSmallDisplay = Subject.create(\"\");\r\n    this.numberText = Subject.create(\"\");\r\n    this.unitTextBig = Subject.create(\"\");\r\n    this.unitTextSmall = Subject.create(\"\");\r\n  }\r\n  /** @inheritdoc */\r\n  onValueChanged(value2) {\r\n    this.updateDisplay(value2, this.displayUnit.get());\r\n  }\r\n  /** @inheritdoc */\r\n  onDisplayUnitChanged(displayUnit) {\r\n    this.updateDisplay(this.value.get(), displayUnit);\r\n  }\r\n  /**\r\n   * Updates this component's displayed number and unit text.\r\n   * @param value The value to display.\r\n   * @param displayUnit The unit type in which to display the value, or `null` if the value should be displayed in its\r\n   * native unit type.\r\n   */\r\n  updateDisplay(value2, displayUnit) {\r\n    if (!displayUnit || !value2.unit.canConvert(displayUnit)) {\r\n      displayUnit = value2.unit;\r\n    }\r\n    const numberValue = value2.asUnit(displayUnit);\r\n    const numberText = this.formatter(numberValue);\r\n    this.numberText.set(numberText);\r\n    _NumberUnitDisplay.unitTextCache[0] = \"\";\r\n    _NumberUnitDisplay.unitTextCache[1] = \"\";\r\n    this.unitFormatter(_NumberUnitDisplay.unitTextCache, displayUnit, numberValue);\r\n    this.unitTextBig.set(_NumberUnitDisplay.unitTextCache[0]);\r\n    this.unitTextSmall.set(_NumberUnitDisplay.unitTextCache[1]);\r\n    this.updateUnitTextVisibility(\r\n      numberValue,\r\n      _NumberUnitDisplay.unitTextCache[0],\r\n      _NumberUnitDisplay.unitTextCache[1]\r\n    );\r\n  }\r\n  /**\r\n   * Updates whether this component's unit text spans are visible.\r\n   * @param numberValue The numeric value displayed by this component.\r\n   * @param unitTextBig The text to display in the big text span.\r\n   * @param unitTextSmall The text to display in the small text span.\r\n   */\r\n  updateUnitTextVisibility(numberValue, unitTextBig, unitTextSmall) {\r\n    if (this.props.hideUnitWhenNaN === true && isNaN(numberValue)) {\r\n      this.unitTextBigDisplay.set(\"none\");\r\n      this.unitTextSmallDisplay.set(\"none\");\r\n      return;\r\n    }\r\n    this.unitTextBigDisplay.set(unitTextBig === \"\" ? \"none\" : \"\");\r\n    this.unitTextSmallDisplay.set(unitTextSmall === \"\" ? \"none\" : \"\");\r\n  }\r\n  /**\r\n   * Creates the default mapping from unit to displayed text.\r\n   * @returns The default mapping from unit to displayed text.\r\n   */\r\n  static createDefaultUnitTextMap() {\r\n    const originalMap = UnitFormatter.getUnitTextMap();\r\n    const map = {};\r\n    for (const family in originalMap) {\r\n      const nameMap = map[family] = {};\r\n      const originalNameMap = originalMap[family];\r\n      for (const name in originalNameMap) {\r\n        const text = nameMap[name] = [\"\", \"\"];\r\n        const originalText = originalNameMap[name];\r\n        if (originalText[0] === \"\u00B0\") {\r\n          text[0] = \"\u00B0\";\r\n          text[1] = originalText.substring(1);\r\n        } else {\r\n          text[1] = originalText;\r\n        }\r\n      }\r\n    }\r\n    return map;\r\n  }\r\n  render() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: (_a = this.props.class) != null ? _a : \"\", style: \"white-space: nowrap;\" }, /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"numberunit-num\" }, this.numberText), /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"numberunit-unit-big\", style: { display: this.unitTextBigDisplay } }, this.unitTextBig), /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"numberunit-unit-small\", style: { display: this.unitTextSmallDisplay } }, this.unitTextSmall));\r\n  }\r\n};\r\n_NumberUnitDisplay.DEFAULT_UNIT_TEXT_MAP = _NumberUnitDisplay.createDefaultUnitTextMap();\r\n_NumberUnitDisplay.DEFAULT_UNIT_FORMATTER = (out, unit) => {\r\n  var _a;\r\n  const text = (_a = _NumberUnitDisplay.DEFAULT_UNIT_TEXT_MAP[unit.family]) == null ? void 0 : _a[unit.name];\r\n  if (text) {\r\n    out[0] = text[0];\r\n    out[1] = text[1];\r\n  }\r\n};\r\n_NumberUnitDisplay.unitTextCache = [\"\", \"\"];\r\nlet NumberUnitDisplay = _NumberUnitDisplay;\r\nclass ProgressComponent extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.fullCompletionSub = Subject.create(false);\r\n  }\r\n  _updateProgress(progressRatio) {\r\n    this.updateProgress(progressRatio);\r\n    this.fullCompletionSub.set(progressRatio === 1);\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    if (typeof this.props.progressRatio === \"number\") {\r\n      this._updateProgress(this.props.progressRatio);\r\n    } else {\r\n      this.progressRatioSubscription = this.props.progressRatio.sub(this._updateProgress.bind(this), true);\r\n    }\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.progressRatioSubscription) == null ? void 0 : _a.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass CircularProgress extends ProgressComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.circularProgressRef = FSComponent.createRef();\r\n    this.lowerSliceRef = FSComponent.createRef();\r\n    this.higherSliceRef = FSComponent.createRef();\r\n    this.sliceClassToggleSub = Subject.create(false);\r\n    this.sliceClassToggleNotSub = this.sliceClassToggleSub.map(SubscribableMapFunctions.not());\r\n    this.circularProgressStyle = ObjectSubject.create({\r\n      \"--circular-progress-rotation-value-left\": \"0\",\r\n      \"--circular-progress-rotation-value-right\": \"0\"\r\n    });\r\n    this.circularProgressPrimaryBackgroundClass = \"circular-progress-primary-background\";\r\n    this.circularProgressSecondaryBackgroundClass = \"circular-progress-secondary-background\";\r\n    this.circularProgressSliceClasses = {\r\n      \"circular-progress-slice\": true,\r\n      [this.circularProgressSecondaryBackgroundClass]: this.sliceClassToggleSub,\r\n      [this.circularProgressPrimaryBackgroundClass]: this.sliceClassToggleNotSub\r\n    };\r\n  }\r\n  updateProgressByHalf(progressRatio, overHalf) {\r\n    if (overHalf) {\r\n      this.circularProgressStyle.set(\"--circular-progress-rotation-value-left\", `${progressRatio}turn`);\r\n      this.circularProgressStyle.set(\"--circular-progress-rotation-value-right\", \"0\");\r\n    } else {\r\n      this.circularProgressStyle.set(\"--circular-progress-rotation-value-left\", \"0\");\r\n      this.circularProgressStyle.set(\"--circular-progress-rotation-value-right\", `${progressRatio}turn`);\r\n    }\r\n    this.sliceClassToggleSub.set(overHalf);\r\n  }\r\n  updateProgress(progressRatio) {\r\n    this.updateProgressByHalf(progressRatio, progressRatio > 0.5);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        class: { \"circular-progress-container\": true, \"full-completion\": this.fullCompletionSub },\r\n        ref: this.gamepadUiComponentRef\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"circular-progress-circle-container\" }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"circular-progress-circle outer\" }), /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"circular-progress-circle inner\" })),\r\n      /* @__PURE__ */ FSComponent.buildComponent(\r\n        \"div\",\r\n        {\r\n          class: {\r\n            \"circular-progress\": true,\r\n            [this.circularProgressPrimaryBackgroundClass]: this.sliceClassToggleSub,\r\n            [this.circularProgressSecondaryBackgroundClass]: this.sliceClassToggleNotSub\r\n          },\r\n          ref: this.circularProgressRef,\r\n          style: this.circularProgressStyle\r\n        },\r\n        /* @__PURE__ */ FSComponent.buildComponent(\r\n          \"div\",\r\n          {\r\n            class: __spreadProps(__spreadValues({}, this.circularProgressSliceClasses), {\r\n              left: true\r\n            }),\r\n            ref: this.higherSliceRef\r\n          }\r\n        ),\r\n        /* @__PURE__ */ FSComponent.buildComponent(\r\n          \"div\",\r\n          {\r\n            class: __spreadProps(__spreadValues({}, this.circularProgressSliceClasses), {\r\n              right: true\r\n            }),\r\n            ref: this.lowerSliceRef\r\n          }\r\n        ),\r\n        this.props.iconPath && /* @__PURE__ */ FSComponent.buildComponent(\r\n          IconElement,\r\n          {\r\n            class: {\r\n              \"full-completion-icon\": true,\r\n              hide: this.fullCompletionSub.map(SubscribableMapFunctions.not())\r\n            },\r\n            url: this.props.iconPath\r\n          }\r\n        )\r\n      )\r\n    );\r\n  }\r\n}\r\nclass ProgressBar extends ProgressComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.circularProgressStyle = ObjectSubject.create({\r\n      \"--progress-bar-width-percentage\": \"0%\"\r\n    });\r\n  }\r\n  updateProgress(progressRatio) {\r\n    let progressPercentage = progressRatio * 100;\r\n    if (progressPercentage > 100) progressPercentage = 100;\r\n    else if (progressPercentage < 0) progressPercentage = 0;\r\n    this.circularProgressStyle.set(\"--progress-bar-width-percentage\", `${progressPercentage}%`);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        class: { \"progress-bar-container\": true, \"full-completion\": this.fullCompletionSub },\r\n        ref: this.gamepadUiComponentRef\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"progress-bar\", style: this.circularProgressStyle })\r\n    );\r\n  }\r\n}\r\nclass SearchBar extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a, _b, _c;\r\n    super(...arguments);\r\n    this.resultItems = ArraySubject.create([]);\r\n    this.onInputSearchSub = Subject.create(\"\");\r\n    this.textBoxRef = (_a = this.props.textBoxRef) != null ? _a : FSComponent.createRef();\r\n    this.searchBarListRef = (_b = this.props.searchBarListRef) != null ? _b : FSComponent.createRef();\r\n    this.isSearchBarFocus = Subject.create(false);\r\n    this.placeholder = (_c = this.props.placeholder) != null ? _c : \"@fs-base-efb,TT:EFB.COMMON.SEARCH_PLACEHOLDER\";\r\n    this.DEBOUNCE_DURATION = 0;\r\n    this.subs = [];\r\n    this.currentSearchId = 0;\r\n    this.onDelete = () => {\r\n    };\r\n    this.prefix = Subject.create(SubscribableUtils.toSubscribable(this.props.prefix || \"\", true).get());\r\n    this.suffix = Subject.create(SubscribableUtils.toSubscribable(this.props.suffix || \"\", true).get());\r\n  }\r\n  tryRenderItem(data) {\r\n    return this.props.renderItem ? this.props.renderItem(data) : this.renderItem(data);\r\n  }\r\n  /* Must be implemented by children classes */\r\n  renderItem(_data) {\r\n    throw new Error(\"Missing renderItem props\");\r\n  }\r\n  tryUpdateResultItems(input) {\r\n    return this.props.updateResultItems ? this.props.updateResultItems(input) : this.updateResultItems(input);\r\n  }\r\n  /* Must be implemented by children classes */\r\n  updateResultItems(_input) {\r\n    throw new Error(\"Missing updateResultItems props\");\r\n  }\r\n  async onSearchUpdated(input) {\r\n    this.currentSearchId++;\r\n    const searchId = this.currentSearchId;\r\n    const values = await this.tryUpdateResultItems(input);\r\n    if (searchId !== this.currentSearchId) return;\r\n    this.resultItems.set(values);\r\n  }\r\n  onResultItemsUpdated() {\r\n    this.onInputSearchSub.notify();\r\n  }\r\n  render() {\r\n    var _a, _b;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"search-bar\", ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(\r\n      TextBox,\r\n      {\r\n        model: this.onInputSearchSub,\r\n        ref: this.textBoxRef,\r\n        placeholder: this.placeholder,\r\n        disabled: this.props.disabled,\r\n        hidePlaceholderOnFocus: this.props.hidePlaceholderOnFocus,\r\n        focusOnInit: this.props.focusOnInit,\r\n        onFocusIn: () => {\r\n          var _a2, _b2;\r\n          Wait.awaitFrames(1).catch().then(() => this.isSearchBarFocus.set(true));\r\n          (_b2 = (_a2 = this.props).onFocusIn) == null ? void 0 : _b2.call(_a2);\r\n        },\r\n        onFocusOut: () => {\r\n          var _a2, _b2;\r\n          Wait.awaitFrames(1).catch().then(() => this.isSearchBarFocus.set(false));\r\n          (_b2 = (_a2 = this.props).onFocusOut) == null ? void 0 : _b2.call(_a2);\r\n          if (this.props.emptySearchOnFocusOut || !this.onInputSearchSub.get().trim()) {\r\n            this.textBoxRef.instance.inputRef.instance.clearInput();\r\n          }\r\n        },\r\n        onInput: this.props.onInput,\r\n        debounceDuration: (_a = this.props.debounceDuration) != null ? _a : this.DEBOUNCE_DURATION,\r\n        onKeyPress: this.props.onKeyPress,\r\n        charFilter: this.props.charFilter,\r\n        onDelete: this.onDelete,\r\n        focusOnClear: this.props.focusOnClear,\r\n        showDeleteIcon: (_b = this.props.showDeleteIcon) != null ? _b : true,\r\n        customDeleteIcon: this.props.customDeleteIcon,\r\n        prefix: this.prefix,\r\n        suffix: this.suffix\r\n      }\r\n    ), /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"search-bar-list-container\", ref: this.searchBarListRef }, /* @__PURE__ */ FSComponent.buildComponent(\r\n      List,\r\n      {\r\n        data: this.resultItems,\r\n        isListVisible: this.isSearchBarFocus,\r\n        isScrollable: true,\r\n        class: \"search-bar-list\",\r\n        renderItem: this.tryRenderItem.bind(this)\r\n      }\r\n    )));\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    if (this.props.emptySearchOnInit) {\r\n      this.onSearchUpdated(\"\");\r\n    }\r\n    this.subs.push(\r\n      this.onInputSearchSub.sub((value2) => {\r\n        this.onSearchUpdated(value2);\r\n      })\r\n    );\r\n    if (this.props.onListDisplayed !== void 0) {\r\n      this.subs.push(\r\n        this.isSearchBarFocus.sub((focus) => {\r\n          var _a, _b;\r\n          if (focus) {\r\n            (_b = (_a = this.props).onListDisplayed) == null ? void 0 : _b.call(_a);\r\n          }\r\n        })\r\n      );\r\n    }\r\n  }\r\n  destroy() {\r\n    this.subs.forEach((s) => s.destroy());\r\n    super.destroy();\r\n  }\r\n}\r\nconst _FacilitySearchUtils = class _FacilitySearchUtils {\r\n  constructor(bus) {\r\n    this.facilityLoader = null;\r\n    this.position = new GeoPoint(0, 0);\r\n    bus.getSubscriber().on(\"gps-position\").handle((pos) => {\r\n      this.position.set(pos.lat, pos.long);\r\n    });\r\n    this.facilityLoader = new FacilityLoader(FacilityRepository.getRepository(bus));\r\n  }\r\n  static getSearchUtils(bus) {\r\n    var _a;\r\n    return (_a = _FacilitySearchUtils.INSTANCE) != null ? _a : _FacilitySearchUtils.INSTANCE = new _FacilitySearchUtils(bus);\r\n  }\r\n  orderByIdentsAndDistance(a, b) {\r\n    const aIdent = a.icaoStruct.ident.trim();\r\n    const bIdent = b.icaoStruct.ident.trim();\r\n    if (aIdent === bIdent) {\r\n      const aDist = this.position.distance(a.lat, a.lon);\r\n      const bDist = this.position.distance(b.lat, b.lon);\r\n      return aDist - bDist;\r\n    } else {\r\n      return aIdent.localeCompare(bIdent);\r\n    }\r\n  }\r\n  /**\r\n   * Loads facilities based on an ident to search for, a search type and whether to exclude terminal facilities\r\n   * @param ident The ident to search for\r\n   * @param facilitySearchType The search type. Defaults to {@link FacilitySearchType.All}\r\n   * @param excludeTerminalFacilities Whether to exclude terminal facilities. Defaults to `true`.\r\n   * @returns a readonly array of facilities\r\n   */\r\n  async loadFacilities(ident, facilitySearchType = FacilitySearchType.All, excludeTerminalFacilities = true) {\r\n    if (this.facilityLoader === null) {\r\n      return Promise.resolve([]);\r\n    }\r\n    const icaos = await this.facilityLoader.searchByIdent(facilitySearchType, ident, 15);\r\n    let facilities = await Promise.all(\r\n      icaos.map((icao) => {\r\n        if (this.facilityLoader === null) {\r\n          return;\r\n        }\r\n        return this.facilityLoader.getFacility(ICAO.getFacilityTypeFromStringV1(icao), icao);\r\n      })\r\n    );\r\n    facilities.sort((a, b) => this.orderByIdentsAndDistance(a, b));\r\n    excludeTerminalFacilities && (facilities = facilities.filter((fac) => fac.icaoStruct.airport === \"\"));\r\n    return facilities;\r\n  }\r\n};\r\n_FacilitySearchUtils.INSTANCE = null;\r\nlet FacilitySearchUtils = _FacilitySearchUtils;\r\nclass FacilityResultItem extends GamepadUiComponent {\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.gamepadUiComponentRef.instance.onmousedown = (ev) => {\r\n      ev.preventDefault();\r\n      if (this.props.callback === void 0) {\r\n        return;\r\n      }\r\n      this.props.callback(this.props.facility);\r\n    };\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: `facility-result-item`, ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"icon-container\" }, /* @__PURE__ */ FSComponent.buildComponent(\"icon-element\", { \"icon-url\": getFacilityIconPath(ICAO.getFacilityType(this.props.facility.icao)) })), /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"icao\" }, ICAO.getIdent(this.props.facility.icao), this.props.separator), /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"facility-name\" }, Utils.Translate(this.props.facility.name).padEnd(5, \"...\")));\r\n  }\r\n}\r\nconst _SearchFacilityHistoryManager = class _SearchFacilityHistoryManager {\r\n  constructor() {\r\n    this.MAX_ITEMS_STORED = 5;\r\n    this.storedICAOs = ArraySubject.create();\r\n    this.loadICAOsFromStorage();\r\n  }\r\n  /**\r\n   * Retrieves all the stored recent searches\r\n   */\r\n  loadICAOsFromStorage() {\r\n    let arrayICAOs = [];\r\n    const stringICAOs = DataStore.get(_SearchFacilityHistoryManager.DATASTORE_KEY);\r\n    if (stringICAOs === void 0 || typeof stringICAOs !== \"string\") {\r\n      this.storedICAOs.set(arrayICAOs);\r\n      return;\r\n    }\r\n    try {\r\n      arrayICAOs = JSON.parse(stringICAOs);\r\n    } catch (e) {\r\n      console.error(\"JSON failed, impossible to parse : \", stringICAOs);\r\n    }\r\n    this.storedICAOs.set(arrayICAOs);\r\n  }\r\n  saveICAOsToStorage() {\r\n    const stringICAOs = JSON.stringify(this.storedICAOs.getArray());\r\n    DataStore.set(_SearchFacilityHistoryManager.DATASTORE_KEY, stringICAOs);\r\n  }\r\n  mostRecentSearch(icao) {\r\n    const foundIndex = this.storedICAOs.getArray().findIndex((storedIcao) => storedIcao === icao);\r\n    if (foundIndex !== -1) {\r\n      this.storedICAOs.removeAt(foundIndex);\r\n    }\r\n    this.storedICAOs.insert(icao, 0);\r\n    while (this.storedICAOs.length > this.MAX_ITEMS_STORED) {\r\n      this.storedICAOs.removeAt(this.MAX_ITEMS_STORED);\r\n    }\r\n    this.saveICAOsToStorage();\r\n  }\r\n  /**\r\n   * Retrieve the search facility history as an array\r\n   * @param input the input of the search\r\n   * @param max_items the maximum number of items returned\r\n   * @returns the recent searches as an array of icaos\r\n   */\r\n  getStoredICAOs(input, max_items = this.MAX_ITEMS_STORED) {\r\n    this.loadICAOsFromStorage();\r\n    return this.storedICAOs.getArray().filter((icao) => ICAO.getIdent(icao).startsWith(input.toUpperCase())).slice(0, max_items);\r\n  }\r\n};\r\n_SearchFacilityHistoryManager.DATASTORE_KEY = \"efb.search-bar-history\";\r\nlet SearchFacilityHistoryManager = _SearchFacilityHistoryManager;\r\nclass SearchFacility extends SearchBar {\r\n  constructor(props) {\r\n    super(props);\r\n    this.facilityLoader = new FacilityLoader(FacilityRepository.getRepository(this.props.bus));\r\n    this.internalSelectedFacilitySub = Subject.create(null);\r\n    this.selectedFacilitySub = this.props.selectedFacilitySub || this.internalSelectedFacilitySub;\r\n    this.selectedFacility = null;\r\n    this.recentSearchesICAO = ArraySubject.create();\r\n    this.historyManager = new SearchFacilityHistoryManager();\r\n    this.DEBOUNCE_DURATION = 300;\r\n    this.ppos = new GeoPoint(0, 0);\r\n    this.hideCustoms = MappedSubject.create(\r\n      ([focus, input]) => !focus || input.length !== 0,\r\n      this.isSearchBarFocus,\r\n      this.onInputSearchSub\r\n    );\r\n    this.customItemSelectRef = FSComponent.createRef();\r\n    this.customItemPositionRef = FSComponent.createRef();\r\n    this.onDelete = () => {\r\n      var _a, _b;\r\n      (_b = (_a = this.props).onDelete) == null ? void 0 : _b.call(_a);\r\n      this.prefix.set(\"\");\r\n    };\r\n    props.bus.getSubscriber().on(\"gps-position\").atFrequency(1).handle((pos) => this.ppos.set(pos.lat, pos.long));\r\n  }\r\n  renderItem(data) {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(FacilityResultItem, { facility: data, separator: \", \", callback: this.itemCallback.bind(this) });\r\n  }\r\n  itemCallback(data) {\r\n    this.selectedFacility = data;\r\n    if (this.props.onFacilitySelectionFormatter) {\r\n      this.onInputSearchSub.set(this.props.onFacilitySelectionFormatter(data));\r\n    }\r\n    this.updateIcon(data);\r\n    this.props.onFacilityClick(data);\r\n    if (ICAO.getFacilityType(data.icao) !== FacilityType.USR) {\r\n      this.historyManager.mostRecentSearch(data.icao);\r\n    }\r\n    this.textBoxRef.instance.inputRef.instance.blur();\r\n  }\r\n  updateIcon(fac) {\r\n    this.prefix.set(/* @__PURE__ */ FSComponent.buildComponent(IconElement, { url: getFacilityIconPath(ICAO.getFacilityType(fac.icao)) }));\r\n  }\r\n  async updateResultItems(input) {\r\n    var _a;\r\n    const searchInput = input.trim();\r\n    const facilities = [];\r\n    const recentSearchs = (await this.updateRecentSearches(searchInput)).filter((e) => {\r\n      if (e === null) {\r\n        return false;\r\n      }\r\n      switch (this.props.facilitySearchType) {\r\n        case FacilitySearchType.Airport:\r\n          return ICAO.getFacilityType(e.icao) === FacilityType.Airport;\r\n        case FacilitySearchType.Intersection:\r\n          return ICAO.getFacilityType(e.icao) === FacilityType.Intersection;\r\n        case FacilitySearchType.Vor:\r\n          return ICAO.getFacilityType(e.icao) === FacilityType.VOR;\r\n        case FacilitySearchType.Ndb:\r\n          return ICAO.getFacilityType(e.icao) === FacilityType.NDB;\r\n        case FacilitySearchType.User:\r\n          return ICAO.getFacilityType(e.icao) === FacilityType.USR;\r\n        case FacilitySearchType.Visual:\r\n          return ICAO.getFacilityType(e.icao) === FacilityType.VIS;\r\n        case FacilitySearchType.AllExceptVisual:\r\n          return ICAO.getFacilityType(e.icao) !== FacilityType.VIS;\r\n        case FacilitySearchType.Boundary:\r\n        case FacilitySearchType.All:\r\n        default:\r\n          return true;\r\n      }\r\n    });\r\n    facilities.push(...recentSearchs);\r\n    if (searchInput.length > 0) {\r\n      facilities.push(\r\n        ...await FacilitySearchUtils.getSearchUtils(this.props.bus).loadFacilities(\r\n          searchInput,\r\n          this.props.facilitySearchType,\r\n          (_a = this.props.excludeTerminalFacilities) != null ? _a : true\r\n        )\r\n      );\r\n    }\r\n    return unique(facilities);\r\n  }\r\n  async updateRecentSearches(input) {\r\n    const facilitiesPromises = this.historyManager.getStoredICAOs(input, this.props.maxHistoryItems).map((icao) => {\r\n      return this.facilityLoader.getFacility(ICAO.getFacilityType(icao), icao).catch(() => {\r\n        return null;\r\n      });\r\n    });\r\n    return Promise.all(facilitiesPromises);\r\n  }\r\n  resetInput() {\r\n    var _a, _b;\r\n    if (this.selectedFacilitySub.get() !== null) {\r\n      this.onInputSearchSub.set(\"\");\r\n      (_b = (_a = this.props).onResetInput) == null ? void 0 : _b.call(_a);\r\n      this.internalSelectedFacilitySub.set(null);\r\n      this.prefix.set(\"\");\r\n    }\r\n  }\r\n  restoreInput() {\r\n    const inputHasBeenCleared = !this.onInputSearchSub.get();\r\n    if (this.selectedFacility && inputHasBeenCleared) {\r\n      this.itemCallback(this.selectedFacility);\r\n    }\r\n  }\r\n  onAfterRender(node) {\r\n    var _a;\r\n    super.onAfterRender(node);\r\n    this.selectedFacilitySubscription = (_a = this.props.selectedFacilitySub) == null ? void 0 : _a.sub((facility) => {\r\n      var _a2, _b;\r\n      const localFacility = this.selectedFacilitySub.get();\r\n      this.selectedFacility = facility;\r\n      if (facility) {\r\n        this.updateIcon(facility);\r\n      }\r\n      if ((facility == null ? void 0 : facility.icao) !== (localFacility == null ? void 0 : localFacility.icao) || this.props.selectedFacilitySub === this.selectedFacilitySub) {\r\n        this.onInputSearchSub.set(\r\n          facility ? ((_b = (_a2 = this.props).onFacilitySelectionFormatter) == null ? void 0 : _b.call(_a2, facility)) || facility.icaoStruct.ident : \"\"\r\n        );\r\n      }\r\n    }, true);\r\n    this.subs.push(\r\n      this.isSearchBarFocus.sub((focus) => {\r\n        var _a2, _b;\r\n        (_b = (_a2 = this.props).onTextBoxFocused) == null ? void 0 : _b.call(_a2, focus);\r\n        if (focus) {\r\n          this.onSearchUpdated(this.onInputSearchSub.get());\r\n        }\r\n      })\r\n    );\r\n    if (this.props.positionSelectable) {\r\n      FSComponent.render(\r\n        /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: { \"search-facility-custom-items\": true, hide: this.hideCustoms } }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"facility-result-item\", ref: this.customItemPositionRef }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"icon-container\" }, /* @__PURE__ */ FSComponent.buildComponent(\r\n          \"icon-element\",\r\n          {\r\n            \"icon-url\": `coui://html_ui/efb_ui/efb_os/Assets/icons/facilities/Challenges.svg`\r\n          }\r\n        )), /* @__PURE__ */ FSComponent.buildComponent(\r\n          TT,\r\n          {\r\n            key: \"@fs-base-efb-app-navigation-map,TT:EFB.NAVIGATION_MAP.YOUR_POSITION\",\r\n            format: \"ucfirst\"\r\n          }\r\n        ))),\r\n        this.searchBarListRef.instance,\r\n        0\r\n      );\r\n      this.customItemPositionRef.instance.onmousedown = () => {\r\n        this.itemCallback(\r\n          createCustomFacility(FacilityRepository.getRepository(this.props.bus), this.ppos.lat, this.ppos.lon)\r\n        );\r\n      };\r\n    }\r\n    this.onSearchUpdated(\"\");\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.selectedFacilitySubscription) == null ? void 0 : _a.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass Slider extends GamepadUiComponent {\r\n  constructor(props) {\r\n    var _a, _b, _c, _d, _e, _f, _g;\r\n    super(props);\r\n    this.max = SubscribableUtils.toSubscribable((_a = this.props.max) != null ? _a : 100, true);\r\n    this.min = SubscribableUtils.toSubscribable((_b = this.props.min) != null ? _b : 0, true);\r\n    this.isButtonDisabled = SubscribableUtils.toSubscribable((_c = this.props.disabled) != null ? _c : false, true);\r\n    this.isButtonSelected = Subject.create(false);\r\n    this.precision = MappedSubject.create(\r\n      ([step, min, _max]) => this.convertValueToPercent(step + min),\r\n      SubscribableUtils.toSubscribable((_d = this.props.step) != null ? _d : 0, true),\r\n      this.min,\r\n      this.max\r\n    );\r\n    this.isButtonHoverable = MappedSubject.create(\r\n      ([isHoverable, isDisabled, isSelected]) => {\r\n        return isHoverable && !isDisabled && !isSelected;\r\n      },\r\n      SubscribableUtils.toSubscribable((_e = this.props.hoverable) != null ? _e : true, true),\r\n      this.isButtonDisabled,\r\n      this.isButtonSelected\r\n    );\r\n    this.verticalSlider = (_f = this.props.vertical) != null ? _f : false;\r\n    this.allowWheel = (_g = this.props.allowWheel) != null ? _g : false;\r\n    this.sliderBarRef = FSComponent.createRef();\r\n    this.sliderBarRect = new DOMRect();\r\n    this.allowMovement = false;\r\n    this.mousePos = 0;\r\n    this.subs = [];\r\n    this.onGlobalMouseUp = this._onGlobalMouseUp.bind(this);\r\n    this.onGlobalMouseMove = this._onGlobalMouseMove.bind(this);\r\n    if (SubscribableUtils.isMutableSubscribable(props.value)) {\r\n      this.value = props.value;\r\n    } else if (SubscribableUtils.isSubscribable(props.value)) {\r\n      this.value = Subject.create(props.value.get());\r\n      this.subscribableValueSubscription = props.value.sub((value2) => this.value.set(value2));\r\n    } else {\r\n      this.value = Subject.create(props.value);\r\n    }\r\n    this.valuePercent = Subject.create(this.convertValueToPercent(this.value.get()));\r\n    this.completionRatio = this.valuePercent.map((ratio) => `${ratio.toString()}%`);\r\n  }\r\n  convertValueToPercent(val) {\r\n    return Utils.Clamp(Math.abs((val - this.min.get()) / (this.max.get() - this.min.get())) * 100, 0, 100);\r\n  }\r\n  onMouseDown() {\r\n    var _a, _b;\r\n    if (this.disabled.get()) {\r\n      return;\r\n    }\r\n    (_b = (_a = this.props).onFocusIn) == null ? void 0 : _b.call(_a);\r\n    this.isButtonSelected.set(true);\r\n    this.allowMovement = true;\r\n    this.sliderBarRect = this.gamepadUiComponentRef.instance.getBoundingClientRect();\r\n    document.addEventListener(\"mouseup\", this.onGlobalMouseUp);\r\n    document.addEventListener(\"mouseleave\", this.onGlobalMouseUp);\r\n    document.addEventListener(\"mousemove\", this.onGlobalMouseMove);\r\n  }\r\n  onMouseWheel(e) {\r\n    e.preventDefault();\r\n    const precision = this.precision.get() || 1;\r\n    const scrollDirection = this.verticalSlider ? -1 : 1;\r\n    const step = precision * (e.deltaY < 1 ? -1 : 1) * scrollDirection;\r\n    this.valuePercent.set(Utils.Clamp(this.valuePercent.get() + step, 0, 100));\r\n  }\r\n  _onGlobalMouseUp() {\r\n    var _a, _b;\r\n    this.allowMovement = false;\r\n    (_b = (_a = this.props).onFocusOut) == null ? void 0 : _b.call(_a);\r\n    this.isButtonSelected.set(false);\r\n    document.removeEventListener(\"mouseup\", this.onGlobalMouseUp);\r\n    document.removeEventListener(\"mouseleave\", this.onGlobalMouseUp);\r\n    document.removeEventListener(\"mousemove\", this.onGlobalMouseMove);\r\n  }\r\n  _onGlobalMouseMove(e) {\r\n    const clientPos = this.verticalSlider ? e.clientY : e.clientX;\r\n    if (!this.allowMovement || clientPos === this.mousePos) {\r\n      return;\r\n    }\r\n    this.mousePos = clientPos;\r\n    let sliderStart = this.sliderBarRect.left;\r\n    let sliderEnd = this.sliderBarRect.right;\r\n    let sliderSize = this.sliderBarRect.width;\r\n    let startRatio = 0;\r\n    if (this.verticalSlider) {\r\n      sliderStart = this.sliderBarRect.top;\r\n      sliderEnd = this.sliderBarRect.bottom;\r\n      sliderSize = this.sliderBarRect.height;\r\n      startRatio = 100;\r\n    }\r\n    if (clientPos < sliderStart) {\r\n      this.valuePercent.set(startRatio);\r\n      return;\r\n    }\r\n    if (clientPos > sliderEnd) {\r\n      this.valuePercent.set(100 - startRatio);\r\n      return;\r\n    }\r\n    const mousePosOnSlider = Utils.Clamp(\r\n      Math.abs(startRatio - (clientPos - sliderStart) / sliderSize * 100),\r\n      0,\r\n      100\r\n    );\r\n    let sliderPos = mousePosOnSlider;\r\n    const precision = this.precision.get();\r\n    if (precision !== 0) {\r\n      const quotient = Math.trunc((mousePosOnSlider + precision / 2) / precision);\r\n      sliderPos = Utils.Clamp(quotient * precision, 0, 100);\r\n    }\r\n    this.valuePercent.set(sliderPos);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        class: {\r\n          slider: true,\r\n          reverse: this.min > this.max,\r\n          vertical: this.verticalSlider,\r\n          hoverable: this.isButtonHoverable,\r\n          selected: this.isButtonSelected\r\n        },\r\n        style: { \"--ratio-value\": this.completionRatio },\r\n        ref: this.gamepadUiComponentRef\r\n      },\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"disabled-layer\" }),\r\n      /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"slider-bar\", ref: this.sliderBarRef }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"slider-rail\" }), /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"slider-track\" }), /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"slider-button\" }))\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    Coherent.on(\"mouseReleaseOutsideView\", this.onGlobalMouseUp);\r\n    this.sliderBarRef.instance.onmousedown = this.onMouseDown.bind(this);\r\n    if (this.allowWheel) {\r\n      this.sliderBarRef.instance.onwheel = this.onMouseWheel.bind(this);\r\n    }\r\n    this.subs.push(\r\n      this.valuePercent.sub(\r\n        (val) => this.value.set(val * (this.max.get() - this.min.get()) / 100 + this.min.get())\r\n      ),\r\n      this.value.sub((value2) => {\r\n        var _a, _b;\r\n        (_b = (_a = this.props).onValueChange) == null ? void 0 : _b.call(_a, value2);\r\n        this.valuePercent.set(this.convertValueToPercent(value2));\r\n      })\r\n    );\r\n  }\r\n  destroy() {\r\n    this.isButtonHoverable.destroy();\r\n    this.subs.forEach((sub) => sub.destroy());\r\n    super.destroy();\r\n  }\r\n}\r\nclass Switch extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.turnOnDirection = (_a = this.props.turnOnDirection) != null ? _a : \"right\";\r\n    this.checked = SubscribableUtils.isMutableSubscribable(this.props.checked) ? this.props.checked : Subject.create(!!this.props.checked);\r\n    this.turnOnDirectionSub = this.turnOnDirection === \"right\" ? this.checked : this.checked.map(SubscribableMapFunctions.not());\r\n    this.sliderRef = FSComponent.createRef();\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.gamepadUiComponentRef.instance.onclick = () => {\r\n      if (SubscribableUtils.toSubscribable(this.props.disabled, true).get() === true) {\r\n        return;\r\n      }\r\n      this.checked.set(!this.checked.get());\r\n    };\r\n    this.checked.sub((checked) => {\r\n      if (this.props.callback) this.props.callback(checked);\r\n    });\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: { \"switch-container\": true, checked: this.checked }, ref: this.gamepadUiComponentRef }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: { slider: true, \"slider--right\": this.turnOnDirectionSub }, ref: this.sliderRef }, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"disabled-layer\" })));\r\n  }\r\n}\r\nclass Tag extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.closeButtonRef = FSComponent.createRef();\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    if (this.props.iconPath && this.props.onButtonClick) {\r\n      this.closeButtonRef.instance.addEventListener(\"click\", this.props.onButtonClick);\r\n    }\r\n  }\r\n  destroy() {\r\n    if (this.props.iconPath && this.props.onButtonClick) {\r\n      this.closeButtonRef.instance.removeEventListener(\"click\", this.props.onButtonClick);\r\n    }\r\n    super.destroy();\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.gamepadUiComponentRef, class: \"tag-container\" }, /* @__PURE__ */ FSComponent.buildComponent(\"span\", { class: \"title light-text\" }, this.props.title), this.props.iconPath && /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"tag-button\", ref: this.closeButtonRef }, /* @__PURE__ */ FSComponent.buildComponent(\"icon-element\", { class: \"tag-button-icon\", \"icon-url\": this.props.iconPath })));\r\n  }\r\n}\r\nclass TextArea extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a, _b;\r\n    super(...arguments);\r\n    this.uuid = UUID.GenerateUuid();\r\n    this.textAreaRef = this.gamepadUiComponentRef;\r\n    this.model = this.props.model || Subject.create(SubscribableUtils.toSubscribable(this.props.value || \"\", true).get());\r\n    this.dispatchFocusOutEvent = this._dispatchFocusOutEvent.bind(this);\r\n    this.setValueFromOS = this._setValueFromOS.bind(this);\r\n    this._onKeyPress = this.onKeyPress.bind(this);\r\n    this._onInput = this.onInput.bind(this);\r\n    this.reloadLocalisation = this._reloadLocalisation.bind(this);\r\n    this._isFocused = Subject.create(false);\r\n    this.isFocused = this._isFocused;\r\n    this.placeholderKey = SubscribableUtils.toSubscribable((_a = this.props.placeholder) != null ? _a : \"\", true);\r\n    this.placeholderShown = Subject.create(true);\r\n    this.placeholderTranslation = Subject.create(this.placeholderKey.get());\r\n    this.hidePlaceholderOnFocus = (_b = this.props.hidePlaceholderOnFocus) != null ? _b : false;\r\n    this.subs = [];\r\n  }\r\n  _reloadLocalisation() {\r\n    this.placeholderTranslation.notify();\r\n  }\r\n  onKeyPress(event) {\r\n    var _a, _b;\r\n    const keyCode = event.keyCode || event.which;\r\n    (_b = (_a = this.props).onKeyPress) == null ? void 0 : _b.call(_a, event);\r\n    if (event.defaultPrevented) {\r\n      return;\r\n    }\r\n    if (this.props.charFilter && !this.props.charFilter(String.fromCharCode(keyCode))) {\r\n      event.preventDefault();\r\n      return;\r\n    }\r\n  }\r\n  onInput() {\r\n    const value2 = this.textAreaRef.instance.value;\r\n    if (value2 === this.model.get()) {\r\n      return;\r\n    }\r\n    this.model.set(value2);\r\n  }\r\n  onInputUpdated(value2) {\r\n    var _a, _b;\r\n    this.textAreaRef.instance.value = value2;\r\n    (_b = (_a = this.props).onInput) == null ? void 0 : _b.call(_a, this.textAreaRef.instance);\r\n    if (!this.hidePlaceholderOnFocus && value2.length === 0) {\r\n      this.placeholderShown.set(true);\r\n    }\r\n  }\r\n  onFocusIn() {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onFocusIn) == null ? void 0 : _b.call(_a);\r\n    if (this.hidePlaceholderOnFocus && this.textAreaRef.instance.value.length === 0) {\r\n      this.placeholderShown.set(false);\r\n    }\r\n  }\r\n  onFocusOut() {\r\n    var _a, _b;\r\n    (_b = (_a = this.props).onFocusOut) == null ? void 0 : _b.call(_a);\r\n    if (this.hidePlaceholderOnFocus && this.textAreaRef.instance.value.length === 0) {\r\n      this.placeholderShown.set(true);\r\n    }\r\n  }\r\n  focus() {\r\n    this.textAreaRef.instance.focus();\r\n  }\r\n  blur() {\r\n    this.textAreaRef.instance.blur();\r\n  }\r\n  value() {\r\n    return this.model.get();\r\n  }\r\n  clearInput() {\r\n    this.model.set(\"\");\r\n  }\r\n  _dispatchFocusOutEvent() {\r\n    this.textAreaRef.instance.blur();\r\n  }\r\n  _setValueFromOS(text) {\r\n    this.textAreaRef.instance.value = text;\r\n    this.textAreaRef.instance.dispatchEvent(new InputEvent(\"change\"));\r\n    this.textAreaRef.instance.dispatchEvent(new InputEvent(\"input\"));\r\n    this.textAreaRef.instance.dispatchEvent(new InputEvent(\"focusout\"));\r\n    this.textAreaRef.instance.blur();\r\n  }\r\n  render() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"textarea\",\r\n      {\r\n        id: this.uuid,\r\n        class: \"textarea\",\r\n        ref: this.textAreaRef,\r\n        placeholder: MappedSubject.create(\r\n          ([placeholderShown, placeholderKey]) => {\r\n            return placeholderShown ? Utils.Translate(placeholderKey) : \"\";\r\n          },\r\n          this.placeholderShown,\r\n          this.placeholderKey\r\n        ),\r\n        disabled: this.props.disabled,\r\n        value: SubscribableUtils.toSubscribable(this.props.model || this.props.value || \"\", true).get(),\r\n        rows: (_a = this.props.rows) != null ? _a : 4\r\n      }\r\n    );\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.subs.push(\r\n      this.model.sub((value2) => {\r\n        this.onInputUpdated(value2);\r\n      }, true),\r\n      this.placeholderKey.sub((key) => {\r\n        this.placeholderTranslation.set(key);\r\n      }, true)\r\n    );\r\n    this.textAreaRef.instance.addEventListener(\"focus\", () => {\r\n      if (this._isFocused.get()) {\r\n        return;\r\n      }\r\n      this._isFocused.set(true);\r\n      Coherent.trigger(\"FOCUS_INPUT_FIELD\", this.uuid, \"\", \"\", \"\", false);\r\n      Coherent.on(\"mousePressOutsideView\", this.dispatchFocusOutEvent);\r\n      Coherent.on(\"SetInputTextFromOS\", this.setValueFromOS);\r\n      this.onFocusIn();\r\n    });\r\n    this.textAreaRef.instance.addEventListener(\"focusout\", () => {\r\n      if (!this._isFocused.get()) {\r\n        return;\r\n      }\r\n      this._isFocused.set(false);\r\n      Coherent.trigger(\"UNFOCUS_INPUT_FIELD\", this.uuid);\r\n      Coherent.off(\"mousePressOutsideView\", this.dispatchFocusOutEvent);\r\n      Coherent.off(\"SetInputTextFromOS\", this.setValueFromOS);\r\n      this.onFocusOut();\r\n    });\r\n    this.textAreaRef.instance.addEventListener(\"input\", this._onInput);\r\n    this.textAreaRef.instance.addEventListener(\"keypress\", this._onKeyPress);\r\n    Coherent.on(\"RELOAD_LOCALISATION\", this.reloadLocalisation);\r\n    if (this.props.focusOnInit) {\r\n      this.focus();\r\n    }\r\n  }\r\n  destroy() {\r\n    this.subs.forEach((s) => s.destroy());\r\n    if (this._isFocused.get()) {\r\n      Coherent.trigger(\"UNFOCUS_INPUT_FIELD\", this.uuid);\r\n      Coherent.off(\"mousePressOutsideView\", this.dispatchFocusOutEvent);\r\n    }\r\n    this.textAreaRef.instance.removeEventListener(\"keypress\", this._onKeyPress);\r\n    this.textAreaRef.instance.removeEventListener(\"input\", this._onInput);\r\n    Coherent.off(\"RELOAD_LOCALISATION\", this.reloadLocalisation);\r\n    super.destroy();\r\n  }\r\n}\r\nclass Timer extends DisplayComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.displayedTime = this.props.displayedTimeFormatter ? this.props.stopwatch.timerSeconds.map(this.props.displayedTimeFormatter) : this.props.stopwatch.timerSeconds.map((timeSeconds) => {\r\n      const date = /* @__PURE__ */ new Date(0);\r\n      date.setSeconds(timeSeconds);\r\n      return `${date.toISOString().substring(11, 19)}`;\r\n    });\r\n    this.showDotIndicator = SubscribableUtils.toSubscribable(\r\n      (_a = this.props.showDotIndicator) != null ? _a : false,\r\n      true\r\n    );\r\n    this.hideDotIndicator = this.showDotIndicator.map(SubscribableMapFunctions.not());\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"timer\" }, /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        class: {\r\n          dot: true,\r\n          hide: this.hideDotIndicator\r\n        }\r\n      }\r\n    ), /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"timer-text\" }, this.displayedTime));\r\n  }\r\n  destroy() {\r\n    this.displayedTime.destroy();\r\n    this.hideDotIndicator.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nclass Tooltip extends GamepadUiComponent {\r\n  constructor() {\r\n    var _a;\r\n    super(...arguments);\r\n    this.forceHide = (_a = this.props.condition) != null ? _a : false;\r\n  }\r\n  render() {\r\n    var _a;\r\n    const position = (_a = this.props.position) != null ? _a : \"bottom\";\r\n    const content = value(this.props.content);\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: \"tooltip-component\", ref: this.gamepadUiComponentRef }, this.props.children, /* @__PURE__ */ FSComponent.buildComponent(\"div\", { class: { tooltip: true, forceHide: this.forceHide, [position]: true } }, !SubscribableUtils.isSubscribable(content) && typeof content !== \"string\" && isVNode(content) ? content : /* @__PURE__ */ FSComponent.buildComponent(TT, { class: \"tooltip-description\", key: content, format: \"ucfirst\" }), /* @__PURE__ */ FSComponent.buildComponent(\"svg\", { class: \"pointer-svg\" }, /* @__PURE__ */ FSComponent.buildComponent(\"path\", { d: \"M 0 9 l10 -8 l10 8\", fill: \"rgb(15, 20, 27)\", stroke: \"rgb(63, 67, 73)\", \"stroke-width\": \"2\" }))));\r\n  }\r\n}\r\nlet uid = 0;\r\nclass Container {\r\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n  constructor() {\r\n    this._uid = uid++;\r\n    this._registeredAppsPromises = [];\r\n    this._installedApps = ArraySubject.create();\r\n  }\r\n  /**\r\n   * Static singleton instance of Efb container\r\n   * @internal\r\n   */\r\n  static get instance() {\r\n    return window.EFB_API = Container._instance = window.EFB_API || Container._instance || new Container();\r\n  }\r\n  /** @internal */\r\n  apps() {\r\n    return this._installedApps;\r\n  }\r\n  /** @internal */\r\n  allAppsLoaded() {\r\n    return this._registeredAppsPromises.length === this._installedApps.length;\r\n  }\r\n  /**\r\n   * Method used by the OS to share the bus to apps\r\n   * @internal\r\n   */\r\n  setBus(bus) {\r\n    this.bus = bus;\r\n    return this;\r\n  }\r\n  /**\r\n   * Method used by the OS to share the units settings manager to the apps\r\n   * @internal\r\n   */\r\n  setUnitsSettingManager(unitsSettingManager) {\r\n    this.unitsSettingManager = unitsSettingManager;\r\n    return this;\r\n  }\r\n  /**\r\n   * Method used by the OS to share the settings manager to the apps\r\n   * @internal\r\n   */\r\n  setEfbSettingManager(efbSettingsManager) {\r\n    this.efbSettingsManager = efbSettingsManager;\r\n    return this;\r\n  }\r\n  setOnboardingManager(onboardingManager) {\r\n    this.onboardingManager = onboardingManager;\r\n    return this;\r\n  }\r\n  /**\r\n   * Method used by the OS to share the notification manager to the apps\r\n   * @internal\r\n   */\r\n  setNotificationManager(notificationManager) {\r\n    this.notificationManager = notificationManager;\r\n    return this;\r\n  }\r\n  /**\r\n   * Load stylesheet\r\n   * @param uri\r\n   * @returns Promise which is resolved when stylesheet is loaded or rejected if an error occur.\r\n   */\r\n  async loadCss(uri) {\r\n    if (document.querySelector(`link[href*=\"${uri}\"]`)) {\r\n      return Promise.reject(`${uri} already loaded.`);\r\n    }\r\n    const linkTag = document.createElement(\"link\");\r\n    linkTag.rel = \"stylesheet\";\r\n    linkTag.href = uri;\r\n    document.head.append(linkTag);\r\n    return new Promise((resolve, reject) => {\r\n      linkTag.onload = () => resolve();\r\n      linkTag.onerror = reject;\r\n    });\r\n  }\r\n  /**\r\n   * Load script file\r\n   * @param uri\r\n   * @returns Promise which is resolved when script is loaded or rejected if an error occur.\r\n   */\r\n  async loadJs(uri) {\r\n    if (document.querySelector(`script[src*=\"${uri}\"]`)) {\r\n      return Promise.reject(`${uri} already loaded.`);\r\n    }\r\n    const scriptTag = document.createElement(\"script\");\r\n    scriptTag.type = \"text/javascript\";\r\n    scriptTag.src = uri;\r\n    document.head.append(scriptTag);\r\n    return new Promise((resolve, reject) => {\r\n      scriptTag.onload = () => resolve();\r\n      scriptTag.onerror = reject;\r\n    });\r\n  }\r\n  /**\r\n   * Register an app in EFB\r\n   * @template T - App registration options\r\n   * @param app The app you wan't to register\r\n   * @param options Options you'r app might need when installing\r\n   * @returns EFB instance\r\n   * @throws Throw an error if App install went wrong.\r\n   */\r\n  use(app, ...options) {\r\n    var _a;\r\n    try {\r\n      if (!this.bus) {\r\n        throw new Error(`Bus has not been initialized yet.`);\r\n      }\r\n      const appInstance = app instanceof App ? app : new app();\r\n      const installProps = {\r\n        bus: this.bus,\r\n        unitsSettingManager: this.unitsSettingManager,\r\n        efbSettingsManager: this.efbSettingsManager,\r\n        notificationManager: this.notificationManager,\r\n        onboardingManager: this.onboardingManager,\r\n        options: Object.keys(options).filter((key) => key !== \"isCoreApp\").reduce((acc, key) => {\r\n          return Object.assign(acc, options[key]);\r\n        }, {})\r\n      };\r\n      const appInstaller = appInstance._install.apply(appInstance, [installProps]);\r\n      const name = appInstance.internalName;\r\n      if (/\\s/.test(name)) {\r\n        throw new Error(`The App name can't have any whitespace character. \"${name}\"`);\r\n      }\r\n      if (!Object.prototype.hasOwnProperty.call(installProps.options, \"isCoreApp\")) {\r\n        this._registeredAppsPromises.push(\r\n          appInstaller.then(() => {\r\n            this._installedApps.insert(appInstance);\r\n          })\r\n        );\r\n      }\r\n    } catch (e) {\r\n      (_a = document.currentScript) == null ? void 0 : _a.remove();\r\n      console.error(`App can't be installed`, e);\r\n      throw e;\r\n    }\r\n    return this;\r\n  }\r\n}\r\nconst Efb = Container.instance;\r\nclass NotificationManager {\r\n  constructor(bus) {\r\n    this.bus = bus;\r\n    this.allowNotification = true;\r\n    this.isNotificationAppOpen = false;\r\n    this.pendingNotifications = [];\r\n    this._shownNotifications = ArraySubject.create([]);\r\n    this.shownNotifications = this._shownNotifications;\r\n    this._storedNotifications = ArraySubject.create([]);\r\n    this.storedNotifications = this._storedNotifications;\r\n    this._unseenNotificationsCount = Subject.create(0);\r\n    this.unseenNotificationsCount = this._unseenNotificationsCount;\r\n    this.maxShownItems = Subject.create(1);\r\n    this.timeBetweenNotifsMs = 500;\r\n    this.subs = [];\r\n    this.subs.push(\r\n      this._shownNotifications.sub(this.onShownNotifsUpdate.bind(this)),\r\n      this._storedNotifications.sub(this.onStoredNotifsUpdate.bind(this))\r\n    );\r\n  }\r\n  static getManager(bus) {\r\n    var _a;\r\n    return (_a = NotificationManager.INSTANCE) != null ? _a : NotificationManager.INSTANCE = new NotificationManager(bus);\r\n  }\r\n  /**\r\n   * internaly called by efb os\r\n   * @internal\r\n   */\r\n  update() {\r\n    if (!this.allowNotification) {\r\n      return;\r\n    }\r\n    if (this._shownNotifications.length >= this.maxShownItems.get() || this.pendingNotifications.length === 0) {\r\n      return;\r\n    }\r\n    const notifToShow = this.pendingNotifications.shift();\r\n    if (!notifToShow) {\r\n      return;\r\n    }\r\n    this._shownNotifications.insert(notifToShow);\r\n  }\r\n  onShownNotifsUpdate(_index, eventType, notif) {\r\n    if (eventType !== SubscribableArrayEventType.Added || notif === void 0) {\r\n      return;\r\n    }\r\n    const notifs = Array.isArray(notif) ? notif : [notif];\r\n    notifs.forEach((notifToDelete) => {\r\n      const notifDelay = notifToDelete.delayMs;\r\n      setTimeout(() => {\r\n        notifToDelete.hide.set(true);\r\n      }, notifDelay);\r\n      setTimeout(() => {\r\n        this._shownNotifications.removeItem(notifToDelete);\r\n      }, notifToDelete.delayMs + this.timeBetweenNotifsMs);\r\n    });\r\n  }\r\n  onStoredNotifsUpdate(_i, _t, _n, arr) {\r\n    var _a;\r\n    this._unseenNotificationsCount.set(\r\n      (_a = arr == null ? void 0 : arr.reduce((accumulator, notif) => accumulator + (notif.viewed.get() ? 0 : 1), 0)) != null ? _a : 0\r\n    );\r\n  }\r\n  /**\r\n   * Adds a notification to the stack\r\n   * @param notif the notification to add, could be a TemporaryNotification or a PermanentNotification\r\n   */\r\n  addNotification(notif) {\r\n    notif.createdAt = /* @__PURE__ */ new Date();\r\n    if (isNotificationPermanent(notif)) {\r\n      this._storedNotifications.insert(notif);\r\n      if (this.isNotificationAppOpen) {\r\n        return;\r\n      }\r\n    }\r\n    this.pendingNotifications.push(notif);\r\n  }\r\n  /**\r\n   * Removes a permanent notification from the notification menu\r\n   * @param notif the notification to remove\r\n   */\r\n  deletePermanentNotification(notif) {\r\n    this._storedNotifications.removeItem(notif);\r\n  }\r\n  /* Removes all permanent notifications from the notification menu */\r\n  clearNotifications() {\r\n    this._storedNotifications.clear();\r\n  }\r\n  onNotificationAppOpen() {\r\n    this.isNotificationAppOpen = true;\r\n    this.pendingNotifications = this.pendingNotifications.filter(\r\n      (notif) => !isNotificationPermanent(notif)\r\n    );\r\n    this._shownNotifications.getArray().forEach((notif) => {\r\n      if (isNotificationPermanent(notif)) {\r\n        this._shownNotifications.removeItem(notif);\r\n      }\r\n    });\r\n  }\r\n  onNotificationAppClosed() {\r\n    this.isNotificationAppOpen = false;\r\n    for (let i = 0; i < this._storedNotifications.length; i++) {\r\n      this._storedNotifications.get(i).viewed.set(true);\r\n    }\r\n    this._unseenNotificationsCount.set(0);\r\n  }\r\n}\r\nconst _OnboardingManager = class _OnboardingManager {\r\n  constructor() {\r\n    this.isStarted = false;\r\n    this.stepIndex = 0;\r\n    this.steps = [];\r\n  }\r\n  static getManager() {\r\n    var _a;\r\n    return (_a = _OnboardingManager.INSTANCE) != null ? _a : _OnboardingManager.INSTANCE = new _OnboardingManager();\r\n  }\r\n  bindContainer(containerRef) {\r\n    _OnboardingManager.getManager().containerRef = containerRef;\r\n  }\r\n  start(onboarding) {\r\n    const onboardingManager = _OnboardingManager.getManager();\r\n    onboardingManager.steps = onboarding.steps.map((step) => {\r\n      return __spreadProps(__spreadValues({}, step), { actions: [...step.actions] });\r\n    });\r\n    if (!onboardingManager.containerRef) {\r\n      console.warn(\"Onboarding container not bound\");\r\n      return;\r\n    }\r\n    if (!onboardingManager.steps.length) {\r\n      console.warn(\"No onboarding steps provided\");\r\n      return;\r\n    }\r\n    if (onboardingManager.isStarted) {\r\n      console.warn(\"Onboarding already started\");\r\n      return;\r\n    }\r\n    onboardingManager.stepIndex = 0;\r\n    onboardingManager.isStarted = true;\r\n    onboardingManager.onFinish = onboarding.onFinish;\r\n    onboardingManager.steps[onboardingManager.stepIndex].actions.unshift(\r\n      {\r\n        key: \"@fs-base-efb,TT:EFB.COMMON.QUICK_TOUR_AROUND\",\r\n        callback: () => {\r\n          onboardingManager.next();\r\n        }\r\n      },\r\n      {\r\n        key: \"@fs-base-efb,TT:EFB.COMMON.SKIP\",\r\n        callback: () => {\r\n          onboardingManager.stop();\r\n        }\r\n      }\r\n    );\r\n    onboardingManager.containerRef.instance.show();\r\n    onboardingManager.containerRef.instance.setStep(onboardingManager.steps[onboardingManager.stepIndex]);\r\n    onboardingManager.stepIndex++;\r\n    return;\r\n  }\r\n  next() {\r\n    var _a;\r\n    const onboardingManager = _OnboardingManager.getManager();\r\n    if (!onboardingManager.isStarted) {\r\n      console.warn(\"Onboarding not started. You should call start method first\");\r\n      return;\r\n    }\r\n    if (onboardingManager.stepIndex >= onboardingManager.steps.length) {\r\n      onboardingManager.stop();\r\n      return;\r\n    }\r\n    onboardingManager.steps[onboardingManager.stepIndex].actions.unshift({\r\n      key: \"@fs-base-efb,TT:EFB.COMMON.NEXT\",\r\n      callback: () => {\r\n        onboardingManager.next();\r\n      }\r\n    });\r\n    (_a = onboardingManager.containerRef) == null ? void 0 : _a.instance.setStep(onboardingManager.steps[onboardingManager.stepIndex]);\r\n    onboardingManager.stepIndex++;\r\n    return;\r\n  }\r\n  stop() {\r\n    var _a, _b;\r\n    const onboardingManager = _OnboardingManager.getManager();\r\n    onboardingManager.isStarted = false;\r\n    onboardingManager.steps = [];\r\n    (_a = onboardingManager.containerRef) == null ? void 0 : _a.instance.hide();\r\n    (_b = onboardingManager.onFinish) == null ? void 0 : _b.call(onboardingManager);\r\n  }\r\n};\r\n_OnboardingManager.INSTANCE = void 0;\r\nlet OnboardingManager = _OnboardingManager;\r\nvar UnitsNavAngleSettingMode = /* @__PURE__ */ ((UnitsNavAngleSettingMode2) => {\r\n  UnitsNavAngleSettingMode2[\"Magnetic\"] = \"magnetic\";\r\n  UnitsNavAngleSettingMode2[\"True\"] = \"true\";\r\n  return UnitsNavAngleSettingMode2;\r\n})(UnitsNavAngleSettingMode || {});\r\nvar UnitsSpeedSettingMode = /* @__PURE__ */ ((UnitsSpeedSettingMode2) => {\r\n  UnitsSpeedSettingMode2[\"Nautical\"] = \"KTS\";\r\n  UnitsSpeedSettingMode2[\"Metric\"] = \"KPH\";\r\n  return UnitsSpeedSettingMode2;\r\n})(UnitsSpeedSettingMode || {});\r\nvar UnitsDistanceSettingMode = /* @__PURE__ */ ((UnitsDistanceSettingMode2) => {\r\n  UnitsDistanceSettingMode2[\"Nautical\"] = \"NM\";\r\n  UnitsDistanceSettingMode2[\"Metric\"] = \"KM\";\r\n  return UnitsDistanceSettingMode2;\r\n})(UnitsDistanceSettingMode || {});\r\nvar UnitsSmallDistanceSettingMode = /* @__PURE__ */ ((UnitsSmallDistanceSettingMode2) => {\r\n  UnitsSmallDistanceSettingMode2[\"Feet\"] = \"FT\";\r\n  UnitsSmallDistanceSettingMode2[\"Meters\"] = \"M\";\r\n  return UnitsSmallDistanceSettingMode2;\r\n})(UnitsSmallDistanceSettingMode || {});\r\nvar UnitsAltitudeSettingMode = /* @__PURE__ */ ((UnitsAltitudeSettingMode2) => {\r\n  UnitsAltitudeSettingMode2[\"Feet\"] = \"FT\";\r\n  UnitsAltitudeSettingMode2[\"Meters\"] = \"M\";\r\n  return UnitsAltitudeSettingMode2;\r\n})(UnitsAltitudeSettingMode || {});\r\nvar UnitsWeightSettingMode = /* @__PURE__ */ ((UnitsWeightSettingMode2) => {\r\n  UnitsWeightSettingMode2[\"Pounds\"] = \"LBS\";\r\n  UnitsWeightSettingMode2[\"Kilograms\"] = \"KG\";\r\n  return UnitsWeightSettingMode2;\r\n})(UnitsWeightSettingMode || {});\r\nvar UnitsVolumeSettingMode = /* @__PURE__ */ ((UnitsVolumeSettingMode2) => {\r\n  UnitsVolumeSettingMode2[\"Gallons\"] = \"GAL US\";\r\n  UnitsVolumeSettingMode2[\"Liters\"] = \"L\";\r\n  return UnitsVolumeSettingMode2;\r\n})(UnitsVolumeSettingMode || {});\r\nvar UnitsTemperatureSettingMode = /* @__PURE__ */ ((UnitsTemperatureSettingMode2) => {\r\n  UnitsTemperatureSettingMode2[\"Fahrenheit\"] = \"\u00B0F\";\r\n  UnitsTemperatureSettingMode2[\"Celsius\"] = \"\u00B0C\";\r\n  return UnitsTemperatureSettingMode2;\r\n})(UnitsTemperatureSettingMode || {});\r\nvar UnitsTimeSettingMode = /* @__PURE__ */ ((UnitsTimeSettingMode2) => {\r\n  UnitsTimeSettingMode2[\"Local12\"] = \"local-12\";\r\n  UnitsTimeSettingMode2[\"Local24\"] = \"local-24\";\r\n  return UnitsTimeSettingMode2;\r\n})(UnitsTimeSettingMode || {});\r\nconst _UnitsSettingsManager = class _UnitsSettingsManager extends DefaultUserSettingManager {\r\n  constructor(bus, settingsDefs) {\r\n    super(bus, settingsDefs, true);\r\n    this.navAngleUnitsSub = Subject.create(_UnitsSettingsManager.MAGNETIC_BEARING);\r\n    this.navAngleUnits = this.navAngleUnitsSub;\r\n    this.timeUnitsSub = Subject.create(\r\n      \"local-12\"\r\n      /* Local12 */\r\n    );\r\n    this._timeUnits = this.timeUnitsSub;\r\n    this.areSubscribablesInit = false;\r\n    this.areSubscribablesInit = true;\r\n    for (const entry of this.settings.values()) {\r\n      this.updateUnitsSubjects(entry.setting.definition.name, entry.setting.value);\r\n    }\r\n  }\r\n  onSettingValueChanged(entry, value2) {\r\n    if (this.areSubscribablesInit) {\r\n      this.updateUnitsSubjects(entry.setting.definition.name, value2);\r\n    }\r\n    super.onSettingValueChanged(entry, value2);\r\n  }\r\n  /**\r\n   * Checks if the values loaded from the datastorage correspond to the settings types.\r\n   */\r\n  checkLoadedValues() {\r\n    checkUserSetting(this.getSetting(\"unitsNavAngle\"), UnitsNavAngleSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsSpeed\"), UnitsSpeedSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsDistance\"), UnitsDistanceSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsAltitude\"), UnitsAltitudeSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsSmallDistance\"), UnitsSmallDistanceSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsWeight\"), UnitsWeightSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsVolume\"), UnitsVolumeSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsTemperature\"), UnitsTemperatureSettingMode);\r\n    checkUserSetting(this.getSetting(\"unitsTime\"), UnitsTimeSettingMode);\r\n  }\r\n  updateUnitsSubjects(settingName, value2) {\r\n    switch (settingName) {\r\n      case \"unitsNavAngle\":\r\n        this.navAngleUnitsSub.set(\r\n          value2 === \"true\" ? _UnitsSettingsManager.TRUE_BEARING : _UnitsSettingsManager.MAGNETIC_BEARING\r\n        );\r\n        break;\r\n      case \"unitsTime\":\r\n        this.timeUnitsSub.set(value2);\r\n        break;\r\n      case \"unitsDistance\":\r\n        this.getSetting(\"unitsSmallDistance\").set(\r\n          value2 === \"NM\" ? \"FT\" : \"M\"\r\n          /* Meters */\r\n        );\r\n    }\r\n  }\r\n  /**\r\n   * Gets a unit type subscribable from a unit setting name\r\n   * @param settingName the name of the unit setting\r\n   * @returns a Subscribable containing the unit type. If the value in the dataStorage is unvalid, it returns the default unitType\r\n   */\r\n  getSettingUnitType(settingName) {\r\n    const setting = this.getSetting(settingName);\r\n    return setting.map(\r\n      (settingValue) => {\r\n        var _a;\r\n        return (_a = UnitTypesMap[settingValue]) != null ? _a : UnitTypesMap[setting.definition.defaultValue];\r\n      }\r\n    );\r\n  }\r\n};\r\n_UnitsSettingsManager.TRUE_BEARING = BasicNavAngleUnit.create(false);\r\n_UnitsSettingsManager.MAGNETIC_BEARING = BasicNavAngleUnit.create(true);\r\nlet UnitsSettingsManager = _UnitsSettingsManager;\r\nconst UnitTypesMap = {\r\n  /** Mapped speed unit types */\r\n  KTS: UnitType.KNOT,\r\n  KPH: UnitType.KPH,\r\n  /** Mapped distance unit type */\r\n  NM: UnitType.NMILE,\r\n  KM: UnitType.KILOMETER,\r\n  /** Mapped altitude unit type */\r\n  FT: UnitType.FOOT,\r\n  M: UnitType.METER,\r\n  /** Mapped weight unit type */\r\n  LBS: UnitType.POUND,\r\n  KG: UnitType.KILOGRAM,\r\n  /** Mapped volume unit type */\r\n  \"GAL US\": UnitType.GALLON,\r\n  L: UnitType.LITER,\r\n  /** Mapped temperature unit type */\r\n  \"\u00B0C\": UnitType.CELSIUS,\r\n  \"\u00B0F\": UnitType.FAHRENHEIT\r\n};\r\nclass UnitsSettings {\r\n  /**\r\n   * Retrieves a manager for display units settings.\r\n   * @param bus The event bus.\r\n   * @returns a manager for display units settings.\r\n   */\r\n  static getManager(bus) {\r\n    var _a;\r\n    return (_a = UnitsSettings.INSTANCE) != null ? _a : UnitsSettings.INSTANCE = new UnitsSettingsManager(bus, [\r\n      {\r\n        name: \"unitsNavAngle\",\r\n        defaultValue: UnitsNavAngleSettingMode.Magnetic\r\n      },\r\n      {\r\n        name: \"unitsSpeed\",\r\n        defaultValue: UnitsSpeedSettingMode.Nautical\r\n      },\r\n      {\r\n        name: \"unitsDistance\",\r\n        defaultValue: UnitsDistanceSettingMode.Nautical\r\n      },\r\n      {\r\n        name: \"unitsSmallDistance\",\r\n        defaultValue: UnitsSmallDistanceSettingMode.Feet\r\n      },\r\n      {\r\n        name: \"unitsAltitude\",\r\n        defaultValue: UnitsAltitudeSettingMode.Feet\r\n      },\r\n      {\r\n        name: \"unitsWeight\",\r\n        defaultValue: UnitsWeightSettingMode.Pounds\r\n      },\r\n      {\r\n        name: \"unitsVolume\",\r\n        defaultValue: UnitsVolumeSettingMode.Gallons\r\n      },\r\n      {\r\n        name: \"unitsTemperature\",\r\n        defaultValue: UnitsTemperatureSettingMode.Celsius\r\n      },\r\n      {\r\n        name: \"unitsTime\",\r\n        defaultValue: UnitsTimeSettingMode.Local12\r\n      }\r\n    ]);\r\n  }\r\n}\r\nvar EfbMode = /* @__PURE__ */ ((EfbMode2) => {\r\n  EfbMode2[EfbMode2[\"2D\"] = 0] = \"2D\";\r\n  EfbMode2[EfbMode2[\"3D\"] = 1] = \"3D\";\r\n  return EfbMode2;\r\n})(EfbMode || {});\r\nvar EfbSizeSettingMode = /* @__PURE__ */ ((EfbSizeSettingMode2) => {\r\n  EfbSizeSettingMode2[EfbSizeSettingMode2[\"Small\"] = 0] = \"Small\";\r\n  EfbSizeSettingMode2[EfbSizeSettingMode2[\"Medium\"] = 1] = \"Medium\";\r\n  EfbSizeSettingMode2[EfbSizeSettingMode2[\"Large\"] = 2] = \"Large\";\r\n  return EfbSizeSettingMode2;\r\n})(EfbSizeSettingMode || {});\r\nvar OrientationSettingMode = /* @__PURE__ */ ((OrientationSettingMode2) => {\r\n  OrientationSettingMode2[OrientationSettingMode2[\"Vertical\"] = 0] = \"Vertical\";\r\n  OrientationSettingMode2[OrientationSettingMode2[\"Horizontal\"] = 1] = \"Horizontal\";\r\n  return OrientationSettingMode2;\r\n})(OrientationSettingMode || {});\r\nclass EfbSettingsManager extends DefaultUserSettingManager {\r\n  constructor(bus, settingsDefs) {\r\n    super(bus, settingsDefs);\r\n    let stringToArray = [];\r\n    try {\r\n      stringToArray = JSON.parse(this.getSetting(\"favoriteApps\").get());\r\n    } catch (error) {\r\n      console.error(\"JSON failed, impossible to parse : \", this.getSetting(\"favoriteApps\").get());\r\n      stringToArray = [\"AtlasApp\", \"AircraftApp\", \"PilotBookApp\", \"SettingsApp\"];\r\n    }\r\n    this.favoriteApps = stringToArray;\r\n  }\r\n  get favoriteAppsArray() {\r\n    return this.favoriteApps;\r\n  }\r\n  /**\r\n   * Checks if the values loaded from the datastorage correspond to the settings types.\r\n   */\r\n  checkLoadedValues() {\r\n    checkUserSetting(this.getSetting(\"efbSize\"), EfbSizeSettingMode);\r\n    checkUserSetting(this.getSetting(\"orientationMode\"), OrientationSettingMode);\r\n  }\r\n  /**\r\n   * Add an app to the favorites\r\n   * @param app The app to add\r\n   * @returns the EFB settings manager\r\n   */\r\n  addAppToFavorites(app) {\r\n    this.favoriteApps.push(app.internalName);\r\n    this.onFavoriteAppsUpdated();\r\n    return this;\r\n  }\r\n  /**\r\n   * Remove an app from the favorites\r\n   * @param app The app to remove\r\n   * @returns the EFB settings manager\r\n   */\r\n  removeAppFromFavorites(app) {\r\n    const index2 = this.favoriteApps.indexOf(app.internalName);\r\n    if (index2 !== -1) {\r\n      this.favoriteApps.splice(index2, 1);\r\n    }\r\n    this.onFavoriteAppsUpdated();\r\n    return this;\r\n  }\r\n  /**\r\n   * Update the favoriteSetting and the apps array in the EFB instance in order to rerender when the favorite apps change\r\n   */\r\n  onFavoriteAppsUpdated() {\r\n    const stringSetting = JSON.stringify(this.favoriteApps);\r\n    this.getSetting(\"favoriteApps\").set(stringSetting);\r\n    Efb.apps().getArray().forEach((app) => {\r\n      app.favoriteIndex = this.favoriteApps.indexOf(app.internalName);\r\n    });\r\n    this.bus.pub(\"favs-update\", \"\");\r\n  }\r\n  updateFavoriteAppsArray(value2) {\r\n    let arraySetting = [];\r\n    try {\r\n      arraySetting = JSON.parse(value2);\r\n    } catch (error) {\r\n      console.error(\"JSON failed, impossible to parse : \", value2);\r\n      arraySetting = [\"AtlasApp\", \"AircraftApp\", \"PilotBookApp\", \"SettingsApp\"];\r\n    }\r\n    this.favoriteApps = arraySetting;\r\n  }\r\n  onSettingValueChanged(entry, value2) {\r\n    super.onSettingValueChanged(entry, value2);\r\n    const settingName = entry.setting.definition.name;\r\n    switch (settingName) {\r\n      case \"efbSize\":\r\n        if (typeof value2 === \"string\") {\r\n          value2 = EfbSizeSettingMode[value2.toString()];\r\n        }\r\n        Coherent.call(\"SET_SIZE\", value2);\r\n        break;\r\n      case \"orientationMode\":\r\n        if (typeof value2 === \"string\") {\r\n          value2 = OrientationSettingMode[value2.toString()];\r\n        }\r\n        Coherent.call(\"SET_ORIENTATION\", value2);\r\n        break;\r\n      case \"isBrightnessAuto\":\r\n        if (typeof value2 !== \"boolean\") {\r\n          break;\r\n        }\r\n        if (value2 === true) {\r\n          this.getSetting(\"manualBrightnessPercentage\").set(\r\n            this.getSetting(\"autoBrightnessPercentage\").get()\r\n          );\r\n        }\r\n        Coherent.call(\"SET_IS_AUTO_BRIGHTNESS\", this.getSetting(\"isBrightnessAuto\").get());\r\n        break;\r\n      case \"manualBrightnessPercentage\":\r\n        if (this.getSetting(\"isBrightnessAuto\").get()) {\r\n          break;\r\n        }\r\n        if (typeof value2 !== \"number\") {\r\n          break;\r\n        }\r\n        Coherent.call(\"SET_MANUAL_BRIGHTNESS\", value2 / 100);\r\n        break;\r\n      case \"favoriteApps\":\r\n        this.updateFavoriteAppsArray(value2.toString());\r\n        break;\r\n    }\r\n  }\r\n}\r\nclass EfbSettings {\r\n  constructor() {\r\n  }\r\n  static getManager(bus) {\r\n    var _a;\r\n    return (_a = EfbSettings.INSTANCE) != null ? _a : EfbSettings.INSTANCE = new EfbSettingsManager(bus, [\r\n      {\r\n        name: \"mode\",\r\n        defaultValue: 0\r\n        /* 2D */\r\n      },\r\n      {\r\n        name: \"efbSize\",\r\n        defaultValue: 0\r\n        /* Small */\r\n      },\r\n      {\r\n        name: \"orientationMode\",\r\n        defaultValue: 0\r\n        /* Vertical */\r\n      },\r\n      {\r\n        name: \"isBrightnessAuto\",\r\n        defaultValue: true\r\n      },\r\n      {\r\n        name: \"autoBrightnessPercentage\",\r\n        defaultValue: 50\r\n      },\r\n      {\r\n        name: \"manualBrightnessPercentage\",\r\n        defaultValue: 50\r\n      },\r\n      {\r\n        name: \"favoriteApps\",\r\n        defaultValue: '[\"AtlasApp\",\"AircraftApp\",\"PilotBookApp\",\"SettingsApp\"]'\r\n      },\r\n      {\r\n        name: \"defaultApp\",\r\n        defaultValue: \"AtlasApp\"\r\n      }\r\n    ]);\r\n  }\r\n}\r\nclass EfbSettingsSaveManager extends UserSettingSaveManager {\r\n  constructor(bus) {\r\n    const settings = [\r\n      ...EfbSettings.getManager(bus).getAllSettings(),\r\n      ...UnitsSettings.getManager(bus).getAllSettings()\r\n    ];\r\n    super(settings, bus);\r\n    this.bus = bus;\r\n    this.prefix = \"efb-2024-11-07.\";\r\n    this.settings = [];\r\n    this.settings.push(...settings);\r\n  }\r\n  load(key) {\r\n    super.load(`${this.prefix}${key}`);\r\n    UnitsSettings.getManager(this.bus).checkLoadedValues();\r\n    EfbSettings.getManager(this.bus).checkLoadedValues();\r\n    this.save(key);\r\n  }\r\n  save(key) {\r\n    super.save(`${this.prefix}${key}`);\r\n  }\r\n  startAutoSave(key) {\r\n    super.startAutoSave(`${this.prefix}${key}`);\r\n  }\r\n  stopAutoSave(key) {\r\n    super.stopAutoSave(`${this.prefix}${key}`);\r\n  }\r\n  pruneOldPrefixes() {\r\n    const storage = GetDataStorage().searchData(\"efb\");\r\n    for (const entry of storage) {\r\n      if (entry.key.indexOf(`.${this.prefix}`) === -1) {\r\n        GetDataStorage().deleteData(entry.key);\r\n      }\r\n    }\r\n  }\r\n}\r\nclass ViewStackContainer extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.rootRef = FSComponent.createRef();\r\n  }\r\n  renderView(view) {\r\n    FSComponent.render(view, this.rootRef.instance);\r\n  }\r\n  render() {\r\n    var _a;\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      \"div\",\r\n      {\r\n        ref: this.rootRef,\r\n        class: mergeClassProp(\"view-stack\", this.props.class),\r\n        id: (_a = this.props.id) != null ? _a : \"\"\r\n      }\r\n    );\r\n  }\r\n}\r\nclass ViewWrapper extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.rootRef = FSComponent.createRef();\r\n    this.classList = SetSubject.create([\"view\", \"hidden\", this.props.viewName]);\r\n    this.subs = [];\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.subs.push(\r\n      this.props.isActive.sub((isActive) => {\r\n        if (isActive) {\r\n          this.classList.delete(\"hidden\");\r\n        } else {\r\n          this.classList.add(\"hidden\");\r\n        }\r\n      })\r\n    );\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.rootRef, class: this.classList }, this.props.children);\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    const root = this.rootRef.getOrDefault();\r\n    if (root !== null) {\r\n      (_a = root.parentNode) == null ? void 0 : _a.removeChild(root);\r\n    }\r\n    this.subs.forEach((x) => x.destroy());\r\n    super.destroy();\r\n  }\r\n}\r\nclass ViewService {\r\n  constructor(viewKey, appViewService) {\r\n    this.registeredViews = MapSubject.create();\r\n    this.hasInitialized = false;\r\n    this.activeViewEntry = Subject.create(null);\r\n    if (viewKey && appViewService) {\r\n      appViewService.on(\"pause\", viewKey, () => {\r\n        var _a;\r\n        const activeViewEntry = this.activeViewEntry.get();\r\n        if ((activeViewEntry == null ? void 0 : activeViewEntry.isActive.get()) === true) {\r\n          activeViewEntry.isActive.set(false);\r\n          (_a = activeViewEntry.ref) == null ? void 0 : _a.onPause();\r\n        }\r\n      }).on(\"resume\", viewKey, () => {\r\n        var _a;\r\n        const activeViewEntry = this.activeViewEntry.get();\r\n        if ((activeViewEntry == null ? void 0 : activeViewEntry.isActive.get()) === false) {\r\n          activeViewEntry.isActive.set(true);\r\n          (_a = activeViewEntry.ref) == null ? void 0 : _a.onResume();\r\n        }\r\n      });\r\n    }\r\n  }\r\n  getRegisteredViews() {\r\n    return this.registeredViews;\r\n  }\r\n  getViewEntry(key) {\r\n    const viewEntry = this.registeredViews.get(key);\r\n    if (viewEntry === void 0) {\r\n      throw new Error(`View \"${key}\" doesn't exists`);\r\n    }\r\n    return viewEntry;\r\n  }\r\n  registerView(key, vNodeFactory) {\r\n    if (this.registeredViews.has(key)) {\r\n      throw new Error(`View \"${key}\" is already used`);\r\n    }\r\n    const isActive = Subject.create(false);\r\n    const isDisabled = Subject.create(false);\r\n    const isTabVisible = Subject.create(true);\r\n    const isInit = false;\r\n    const viewEntry = {\r\n      key,\r\n      render: vNodeFactory,\r\n      vNode: null,\r\n      containerRef: FSComponent.createRef(),\r\n      ref: null,\r\n      isActive,\r\n      isDisabled,\r\n      isTabVisible,\r\n      isInit\r\n    };\r\n    this.initViewEntry(viewEntry);\r\n    this.registeredViews.set(key, viewEntry);\r\n    return viewEntry;\r\n  }\r\n  onContainerRendered(viewRef) {\r\n    this.viewRef = viewRef;\r\n  }\r\n  initViewEntry(entry) {\r\n    var _a;\r\n    if (entry.isInit) {\r\n      return;\r\n    }\r\n    entry.isInit = true;\r\n    entry.vNode = entry.render();\r\n    entry.ref = entry.vNode.instance;\r\n    (_a = this.viewRef) == null ? void 0 : _a.renderView(\r\n      /* @__PURE__ */ FSComponent.buildComponent(ViewWrapper, { viewName: entry.key, isActive: entry.isActive, ref: entry.containerRef }, entry.vNode)\r\n    );\r\n  }\r\n  initialize(key) {\r\n    var _a;\r\n    if (this.hasInitialized) {\r\n      return;\r\n    }\r\n    this.hasInitialized = true;\r\n    if (key) {\r\n      const initViewEntry = this.getViewEntry(key);\r\n      (_a = initViewEntry.ref) == null ? void 0 : _a.onOpen();\r\n      initViewEntry.isActive.set(true);\r\n      this.activeViewEntry.set(initViewEntry);\r\n    }\r\n  }\r\n  openPage(key) {\r\n    var _a, _b;\r\n    const activeViewEntry = this.activeViewEntry.get();\r\n    if ((activeViewEntry == null ? void 0 : activeViewEntry.key) === key) {\r\n      return activeViewEntry;\r\n    }\r\n    activeViewEntry == null ? void 0 : activeViewEntry.isActive.set(false);\r\n    (_a = activeViewEntry == null ? void 0 : activeViewEntry.ref) == null ? void 0 : _a.onPause();\r\n    const newViewEntry = this.getViewEntry(key);\r\n    newViewEntry.isActive.set(true);\r\n    (_b = newViewEntry.ref) == null ? void 0 : _b.onResume();\r\n    this.activeViewEntry.set(newViewEntry);\r\n    return newViewEntry;\r\n  }\r\n  onUpdate(time) {\r\n    var _a, _b;\r\n    (_b = (_a = this.activeViewEntry.get()) == null ? void 0 : _a.ref) == null ? void 0 : _b.onUpdate(time);\r\n  }\r\n}\r\nclass ViewServiceContainer extends DisplayComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.stackContainerRef = FSComponent.createRef();\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.props.viewService.onContainerRendered(this.stackContainerRef.instance);\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(ViewStackContainer, { ref: this.stackContainerRef, class: this.props.class, id: this.props.id });\r\n  }\r\n}\r\nclass ViewServiceMenu extends GamepadUiComponent {\r\n  constructor() {\r\n    super(...arguments);\r\n    this.tabs = [];\r\n  }\r\n  tabRender(tab) {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\r\n      TabSelector,\r\n      {\r\n        ref: tab.tabRef,\r\n        tabName: tab.view.ref.tabName,\r\n        callback: () => {\r\n          this.props.viewService.openPage(tab.view.key);\r\n        },\r\n        active: tab.view.isActive,\r\n        disabled: tab.view.isDisabled,\r\n        hidden: tab.view.isTabVisible.map(SubscribableMapFunctions.not())\r\n      }\r\n    );\r\n  }\r\n  render() {\r\n    return /* @__PURE__ */ FSComponent.buildComponent(\"div\", { ref: this.gamepadUiComponentRef, class: mergeClassProp(\"tabs\", this.props.class) });\r\n  }\r\n  onAfterRender(node) {\r\n    super.onAfterRender(node);\r\n    this.viewsSub = this.props.viewService.getRegisteredViews().sub((key, type, view) => {\r\n      switch (type) {\r\n        case SubscribableMapEventType.Added:\r\n          {\r\n            if (view === void 0 || !(view.ref instanceof UiView) || !view.ref.tabName) {\r\n              return;\r\n            }\r\n            const tab = {\r\n              key,\r\n              tabRef: FSComponent.createRef(),\r\n              view\r\n            };\r\n            FSComponent.render(this.tabRender(tab), this.gamepadUiComponentRef.instance);\r\n            this.tabs.push(tab);\r\n          }\r\n          break;\r\n        case SubscribableMapEventType.Removed:\r\n          {\r\n            const index2 = this.tabs.findIndex((el) => el.key === key);\r\n            if (index2 === -1) {\r\n              return;\r\n            }\r\n            const removed = this.tabs.splice(index2, 1)[0];\r\n            removed.tabRef.instance.destroy();\r\n            const child = this.gamepadUiComponentRef.instance.childNodes.item(index2);\r\n            this.gamepadUiComponentRef.instance.removeChild(child);\r\n          }\r\n          break;\r\n      }\r\n    }, true);\r\n  }\r\n  destroy() {\r\n    var _a;\r\n    (_a = this.viewsSub) == null ? void 0 : _a.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\nexport {\r\n  AbstractAccordion,\r\n  AbstractButton,\r\n  AirportSize,\r\n  App,\r\n  AppBootMode,\r\n  AppContainer,\r\n  AppSuspendMode,\r\n  AppView,\r\n  AppViewService,\r\n  BearingDisplay,\r\n  Button,\r\n  CircularProgress,\r\n  ClassicButton,\r\n  Container,\r\n  DateDisplay,\r\n  DropdownButton,\r\n  Efb,\r\n  EfbMode,\r\n  EfbSettings,\r\n  EfbSettingsManager,\r\n  EfbSettingsSaveManager,\r\n  EfbSizeSettingMode,\r\n  ElementAccordion,\r\n  FlightPhaseManager,\r\n  FlightPhaseState,\r\n  GameMode,\r\n  GameModeManager,\r\n  GamepadEvents,\r\n  GamepadInputManager,\r\n  GamepadUiComponent,\r\n  GamepadUiParser,\r\n  GamepadUiView,\r\n  GhostListItem,\r\n  IconButton,\r\n  IconElement,\r\n  Incremental,\r\n  InputsListener,\r\n  LargeAirportThresholdFt,\r\n  List,\r\n  MapSubject,\r\n  Marquee,\r\n  MediumAirportThresholdFt,\r\n  MultipleButtons,\r\n  NotificationManager,\r\n  NumberUnitDisplay,\r\n  OnboardingManager,\r\n  OrientationSettingMode,\r\n  PagingList,\r\n  ProgressBar,\r\n  ProgressComponent,\r\n  RunwaySelector,\r\n  ScrollBar,\r\n  SearchBar,\r\n  SearchFacility,\r\n  SelectableButton2 as SelectableButton,\r\n  Slider,\r\n  Stopwatch,\r\n  StopwatchState,\r\n  StringAccordion,\r\n  SubscribableMapEventType,\r\n  Switch,\r\n  TT,\r\n  TTButton,\r\n  TabSelector,\r\n  Tag,\r\n  TextArea,\r\n  TextBox,\r\n  Timer,\r\n  Tooltip,\r\n  TypedButton,\r\n  UiView,\r\n  UnitBox,\r\n  UnitFormatter,\r\n  UnitsAltitudeSettingMode,\r\n  UnitsBox,\r\n  UnitsDistanceSettingMode,\r\n  UnitsNavAngleSettingMode,\r\n  UnitsSettings,\r\n  UnitsSettingsManager,\r\n  UnitsSmallDistanceSettingMode,\r\n  UnitsSpeedSettingMode,\r\n  UnitsTemperatureSettingMode,\r\n  UnitsTimeSettingMode,\r\n  UnitsVolumeSettingMode,\r\n  UnitsWeightSettingMode,\r\n  ViewBootMode,\r\n  ViewService,\r\n  ViewServiceContainer,\r\n  ViewServiceMenu,\r\n  ViewSuspendMode,\r\n  ViewWrapper,\r\n  basicFormatter,\r\n  checkUserSetting,\r\n  createCustomFacility,\r\n  createPermanentNotif,\r\n  createPermanentNotification,\r\n  createTemporaryNotif,\r\n  createTemporaryNotification,\r\n  dayKeys,\r\n  elementOffset,\r\n  extractChunks,\r\n  formatDay,\r\n  getAirportSize,\r\n  getCurrentRunwayName,\r\n  getFacilityIconPath,\r\n  getFacilityName,\r\n  getICAOIdent,\r\n  getLatLonStr,\r\n  getRunwayName,\r\n  getStartOfWeek,\r\n  getWeeksInMonth,\r\n  groupBy,\r\n  isAirportFacility,\r\n  isConstructor,\r\n  isFunction,\r\n  isIApp,\r\n  isNotifPermanent,\r\n  isNotificationPermanent,\r\n  isPromise,\r\n  isSelectedAirportFacility,\r\n  isVNode,\r\n  loadFileAsBlob,\r\n  measure,\r\n  mergeClassProp,\r\n  monthKeys,\r\n  monthShortKeys,\r\n  offsetMousePosition,\r\n  random,\r\n  readMetadata,\r\n  textDecode,\r\n  toArray,\r\n  toClassProp,\r\n  toPromise,\r\n  toString,\r\n  unique,\r\n  value,\r\n  where\r\n};\r\n", "import {\r\n\tApp,\r\n\tAppBootMode,\r\n\tAppInstallProps,\r\n\tAppSuspendMode,\r\n\tAppView,\r\n\tAppViewProps,\r\n\tEfb,\r\n\tRequiredProps,\r\n\tTVNode,\r\n} from '@efb/efb-api'\r\nimport { FSComponent, VNode } from '@microsoft/msfs-sdk'\r\nimport { SamplePage } from './Components/SamplePage'\r\nimport { SamplePopup } from './Components/SamplePopup'\r\n\r\nimport './TemplateApp.scss'\r\n\r\n/**\r\n * BASE_URL is a global var defined in build.js\r\n * It points to the dist folder of the app when builded.\r\n * Mainly used to load assets (icons, fonts, etc)\r\n */\r\ndeclare const BASE_URL: string\r\n\r\nclass TemplateAppView extends AppView<RequiredProps<AppViewProps, 'bus'>> {\r\n\t/**\r\n\t * Optional property\r\n\t * Default view key to show if using AppViewService\r\n\t */\r\n\tprotected defaultView = 'SamplePage1'\r\n\r\n\t/**\r\n\t * Optional method\r\n\t * Views (page or popup) to register if using AppViewService\r\n\t * Default behavior : nothing\r\n\t */\r\n\tprotected registerViews(): void {\r\n\t\tthis.appViewService.registerPage('SamplePage1', () => (\r\n\t\t\t<SamplePage\r\n\t\t\t\tappViewService={this.appViewService}\r\n\t\t\t\tcolor=\"#7f8fa6\"\r\n\t\t\t\ttitle=\"Page 1\"\r\n\t\t\t/>\r\n\t\t))\r\n\t\tthis.appViewService.registerPage('SamplePage2', () => (\r\n\t\t\t<SamplePage\r\n\t\t\t\tappViewService={this.appViewService}\r\n\t\t\t\tcolor=\"#353b48\"\r\n\t\t\t\ttitle=\"Page 2\"\r\n\t\t\t/>\r\n\t\t))\r\n\r\n\t\tthis.appViewService.registerPopup('SamplePopup', () => (\r\n\t\t\t<SamplePopup appViewService={this.appViewService} />\r\n\t\t))\r\n\t}\r\n\r\n\t/**\r\n\t * Optional method\r\n\t * Method called when AppView is open after it's creation\r\n\t * Default behavior : nothing\r\n\t */\r\n\tpublic onOpen(): void {\r\n\t\t//\r\n\t}\r\n\r\n\t/**\r\n\t * Optional method\r\n\t * Method called when AppView is closed\r\n\t * Default behavior : nothing\r\n\t */\r\n\tpublic onClose(): void {\r\n\t\t//\r\n\t}\r\n\r\n\t/**\r\n\t * Optional method\r\n\t * Method called when AppView is resumed (equivalent of onOpen but happen every time we go back to this app)\r\n\t * Default behavior : nothing\r\n\t */\r\n\tpublic onResume(): void {\r\n\t\t//\r\n\t}\r\n\r\n\t/**\r\n\t * Optional method\r\n\t * Method called when AppView is paused (equivalent of onClose but happen every time we switch to another app)\r\n\t * Default behavior : nothing\r\n\t */\r\n\tpublic onPause(): void {\r\n\t\t//\r\n\t}\r\n\r\n\t/**\r\n\t * Optional method\r\n\t * Default behavior is rendering AppContainer which works with AppViewService\r\n\t * We usually surround it with <div class=\"template-app\">{super.render}</div>\r\n\t * Can render anything (JSX, Component) so it doesn't require to use AppViewService and/or AppContainer\r\n\t * @returns VNode\r\n\t */\r\n\tpublic render(): VNode {\r\n\t\treturn <div class=\"template-app\">{super.render()}</div>\r\n\t}\r\n}\r\n\r\nclass TemplateApp extends App {\r\n\t/**\r\n\t * Required getter for friendly app-name.\r\n\t * Used by the EFB as App's name shown to the user.\r\n\t * @returns string\r\n\t */\r\n\tpublic get name(): string {\r\n\t\treturn 'Stream Chat'\r\n\t}\r\n\r\n\t/**\r\n\t * Required getter for app's icon url.\r\n\t * Used by the EFB as App's icon shown to the user.\r\n\t * @returns string\r\n\t */\r\n\tpublic get icon(): string {\r\n\t\treturn `${BASE_URL}/Assets/app-icon.svg`\r\n\t}\r\n\r\n\t/**\r\n\t * Optional attribute\r\n\t * Allow to choose BootMode between COLD / WARM / HOT\r\n\t * Default behavior : AppBootMode.COLD\r\n\t *\r\n\t * COLD : No dom preloaded in memory\r\n\t * WARM : App -> AppView are loaded but not rendered into DOM\r\n\t * HOT : App -> AppView -> Pages are rendered and injected into DOM\r\n\t */\r\n\tpublic BootMode = AppBootMode.COLD\r\n\r\n\t/**\r\n\t * Optional attribute\r\n\t * Allow to choose SuspendMode between SLEEP / TERMINATE\r\n\t * Default behavior : AppSuspendMode.SLEEP\r\n\t *\r\n\t * SLEEP : Default behavior, does nothing, only hiding and sleeping the app if switching to another one\r\n\t * TERMINATE : Hiding the app, then killing it by removing it from DOM (BootMode is checked on next frame to reload it and/or to inject it, see BootMode)\r\n\t */\r\n\tpublic SuspendMode = AppSuspendMode.SLEEP\r\n\r\n\t/**\r\n\t * Optional method\r\n\t * Allow to resolve some dependencies, install external data, check an api key, etc...\r\n\t * @param _props props used when app has been setted up.\r\n\t * @returns Promise<void>\r\n\t */\r\n\tpublic async install(_props: AppInstallProps): Promise<void> {\r\n\t\tEfb.loadCss(`${BASE_URL}/TemplateApp.css`)\r\n\t\treturn Promise.resolve()\r\n\t}\r\n\r\n\t/**\r\n\t * Optional method\r\n\t * Allows to specify an array of compatible ATC MODELS.\r\n\t * Your app will be visible but greyed out if the aircraft is not compatible.\r\n\t * if undefined or method not implemented, the app will be visible for all aircrafts.\r\n\t * @returns string[] | undefined\r\n\t */\r\n\tpublic get compatibleAircraftModels(): string[] | undefined {\r\n\t\treturn undefined\r\n\t}\r\n\r\n\t/*\r\n\t * @returns {AppView} created above\r\n\t */\r\n\tpublic render(): TVNode<TemplateAppView> {\r\n\t\treturn <TemplateAppView bus={this.bus} />\r\n\t}\r\n}\r\n\r\n/**\r\n * App definition to be injected into EFB\r\n */\r\nEfb.use(TemplateApp)\r\n", "import {\r\n\tGamepadUiView,\r\n\tRequiredProps,\r\n\tTextArea, // TODO find a new component from the efb api, this one is for a large text entry area\r\n\tTTButton,\r\n\tTVNode,\r\n\tUiViewProps,\r\n} from '@efb/efb-api'\r\nimport { FSComponent } from '@microsoft/msfs-sdk'\r\nimport { TwitchChatService } from '../Components/TwitchChatService'\r\nimport './SamplePage.scss'\r\n\r\ninterface SamplePageProps extends RequiredProps<UiViewProps, 'appViewService'> {\r\n\t/** The page title */\r\n\ttitle: string\r\n\r\n\t/** The page background color */\r\n\tcolor: string\r\n}\r\n\r\ninterface SamplePageState {\r\n\tchatMessages: string[]\r\n\tstreamerInput: string\r\n}\r\n\r\nexport class SamplePage extends GamepadUiView<HTMLDivElement, SamplePageProps> {\r\n\tpublic readonly tabName = SamplePage.name\r\n\tprivate chatService: TwitchChatService\r\n\tstate: SamplePageState\r\n\r\n\tsetState(state: Partial<SamplePageState>) {\r\n\t\tthis.state = { ...this.state, ...state }\r\n\t}\r\n\tprivate chatInterval: NodeJS.Timeout | undefined\r\n\r\n\tconstructor(props: SamplePageProps) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tchatMessages: [],\r\n\t\t\tstreamerInput: '',\r\n\t\t}\r\n\r\n\t\tthis.chatService = new TwitchChatService(\r\n\t\t\t'LarryGopnik', // Your Twitch username\r\n\t\t\t'mst3k' // The default channel to join\r\n\t\t)\r\n\r\n\t\tthis.updateChatMessages = this.updateChatMessages.bind(this)\r\n\t\tthis.handleSwitchStream = this.handleSwitchStream.bind(this)\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconsole.log('SamplePage componentDidMount')\r\n\t\tthis.updateChatMessages() // Call it once initially\r\n\t\tthis.chatInterval = setInterval(this.updateChatMessages, 1000) // Update chat messages every second\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tconsole.log('SamplePage componentWillUnmount')\r\n\t\tif (this.chatInterval) {\r\n\t\t\tclearInterval(this.chatInterval)\r\n\t\t}\r\n\t}\r\n\r\n\tupdateChatMessages() {\r\n\t\tconst messages = this.chatService.getChatMessages()\r\n\t\tconsole.log('Updating chat messages:', messages)\r\n\t\tthis.setState({ chatMessages: messages })\r\n\t}\r\n\r\n\thandleSwitchStream() {\r\n\t\tconst { streamerInput } = this.state\r\n\t\tconsole.log('Switching stream to:', streamerInput)\r\n\t\tif (streamerInput) {\r\n\t\t\tthis.chatService\r\n\t\t\t\t.changeStreamer(streamerInput)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.updateChatMessages() // Update chat messages after switching stream\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconsole.error('Failed to switch stream:', error)\r\n\t\t\t\t})\r\n\t\t} else {\r\n\t\t\tconsole.log('Streamer input is empty')\r\n\t\t}\r\n\t}\r\n\r\n\trender(): TVNode<HTMLDivElement> {\r\n\t\t// TODO figure out why this isn't rendering on app inside MSFS 2024\r\n\t\tconst { chatMessages, streamerInput } = this.state\r\n\t\tconsole.log('Rendering SamplePage with chat messages:', chatMessages)\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={this.gamepadUiViewRef}\r\n\t\t\t\tclass=\"sample-page\"\r\n\t\t\t\tstyle={`--color: ${this.props.color}`}\r\n\t\t\t>\r\n\t\t\t\t<div class=\"header\">\r\n\t\t\t\t\t<h2>{this.props.title}</h2>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"content\">\r\n\t\t\t\t\t<div class=\"switch-stream\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tvalue={streamerInput}\r\n\t\t\t\t\t\t\tonChange={(\r\n\t\t\t\t\t\t\t\te: React.ChangeEvent<HTMLInputElement>\r\n\t\t\t\t\t\t\t) =>\r\n\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\tstreamerInput: e.target.value,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplaceholder={this.chatService.getChannel()}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TTButton\r\n\t\t\t\t\t\t\tkey=\"Switch Stream\"\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\tcallback={this.handleSwitchStream}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<TextArea\r\n\t\t\t\t\t\tclass=\"text-box\"\r\n\t\t\t\t\t\tvalue={chatMessages.join('\\n')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div class=\"chat-input\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Type your message...\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<TTButton\r\n\t\t\t\t\t\t\tkey=\"Chat\"\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\tcallback={() => {\r\n\t\t\t\t\t\t\t\tconst inputElement =\r\n\t\t\t\t\t\t\t\t\tdocument.querySelector(\r\n\t\t\t\t\t\t\t\t\t\t'.chat-input input'\r\n\t\t\t\t\t\t\t\t\t) as HTMLInputElement\r\n\t\t\t\t\t\t\t\tconst message = inputElement.value\r\n\t\t\t\t\t\t\t\tif (message) {\r\n\t\t\t\t\t\t\t\t\tthis.chatService.sendMessage(\r\n\t\t\t\t\t\t\t\t\t\tmessage\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\tinputElement.value = '' // Clear the input field after sending\r\n\t\t\t\t\t\t\t\t\tthis.updateChatMessages() // Update chat messages after sending\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n", "export class TwitchChatService {\r\n\tprivate socket!: WebSocket\r\n\tprivate chatMessages: string[] = []\r\n\tprivate username: string\r\n\tprivate token: string\r\n\tprivate channel: string\r\n\tprivate reconnectInterval: number = 5000 // 5 seconds\r\n\r\n\tconstructor(username: string, channel: string) {\r\n\t\tthis.username = username\r\n\t\tthis.token = process.env.TWITCH_OAUTH_TOKEN || ''\r\n\t\tthis.channel = channel\r\n\t\tthis.connect()\r\n\t}\r\n\r\n\tprivate connect() {\r\n\t\tconsole.log('Connecting to Twitch chat...')\r\n\t\tthis.socket = new WebSocket('wss://irc-ws.chat.twitch.tv:443')\r\n\r\n\t\tthis.socket.onopen = () => {\r\n\t\t\tconsole.log('WebSocket connection opened')\r\n\t\t\tthis.socket.send(`PASS oauth:${this.token}`)\r\n\t\t\tthis.socket.send(`NICK ${this.username}`)\r\n\t\t\tthis.socket.send(`JOIN #${this.channel}`)\r\n\t\t}\r\n\r\n\t\tthis.socket.onmessage = (event) => {\r\n\t\t\tconst message = event.data\r\n\t\t\tconsole.log('Received message:', message)\r\n\t\t\tif (message.includes('PRIVMSG')) {\r\n\t\t\t\tconst chatMessage = this.parseMessage(message)\r\n\t\t\t\tif (chatMessage) {\r\n\t\t\t\t\tthis.chatMessages.push(chatMessage)\r\n\t\t\t\t\tconsole.log('Parsed chat message:', chatMessage)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.socket.onerror = (error) => {\r\n\t\t\tconsole.error('WebSocket error:', error)\r\n\t\t\tthis.reconnect()\r\n\t\t}\r\n\r\n\t\tthis.socket.onclose = () => {\r\n\t\t\tconsole.log('WebSocket connection closed')\r\n\t\t\tthis.reconnect()\r\n\t\t}\r\n\t}\r\n\r\n\tprivate reconnect() {\r\n\t\tconsole.log(\r\n\t\t\t`Reconnecting in ${this.reconnectInterval / 1000} seconds...`\r\n\t\t)\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.connect()\r\n\t\t}, this.reconnectInterval)\r\n\t}\r\n\r\n\tprivate parseMessage(message: string): string | null {\r\n\t\tconst match = message.match(\r\n\t\t\t/:(.*)!.*@.*\\.tmi\\.twitch\\.tv PRIVMSG #.* :(.*)/\r\n\t\t)\r\n\t\treturn match ? `${match[1]}: ${match[2]}` : null\r\n\t}\r\n\r\n\tpublic getChatMessages(): string[] {\r\n\t\treturn this.chatMessages\r\n\t}\r\n\r\n\tpublic changeStreamer(streamer: string): Promise<void> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (this.socket && this.socket.readyState === WebSocket.OPEN) {\r\n\t\t\t\tconsole.log(`Leaving channel: ${this.channel}`)\r\n\t\t\t\tthis.socket.send(`PART #${this.channel}`)\r\n\t\t\t\tthis.channel = streamer\r\n\t\t\t\tthis.socket.send(`JOIN #${this.channel}`)\r\n\t\t\t\tthis.chatMessages = []\r\n\t\t\t\tresolve()\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error(\r\n\t\t\t\t\t'WebSocket is not open. Cannot change streamer.'\r\n\t\t\t\t)\r\n\t\t\t\treject(new Error('WebSocket is not open.'))\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tpublic getChannel(): string {\r\n\t\treturn this.channel\r\n\t}\r\n\r\n\tpublic sendMessage(message: string) {\r\n\t\tif (this.socket && this.socket.readyState === WebSocket.OPEN) {\r\n\t\t\tthis.socket.send(`PRIVMSG #${this.channel} :${message}`)\r\n\t\t\tconsole.log('Sent message:', message)\r\n\t\t} else {\r\n\t\t\tconsole.error('WebSocket is not open. Cannot send message.')\r\n\t\t}\r\n\t}\r\n}\r\n", "import { TTButton, GamepadUiView, RequiredProps, TVNode, UiViewProps } from \"@efb/efb-api\";\r\nimport { FSComponent } from \"@microsoft/msfs-sdk\";\r\nimport \"./SamplePopup.scss\";\r\n\r\nexport class SamplePopup extends GamepadUiView<HTMLDivElement, RequiredProps<UiViewProps, \"appViewService\">> {\r\n  public readonly tabName = SamplePopup.name;\r\n\r\n  public render(): TVNode<HTMLDivElement> {\r\n    return (\r\n      <div ref={this.gamepadUiViewRef} class=\"sample-popup\">\r\n        <TTButton\r\n          key=\"CLOSE\"\r\n          type=\"primary\"\r\n          callback={(): void => {\r\n            this.props.appViewService.goBack();\r\n          }}\r\n        />\r\n        <div class=\"content\">\r\n          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed nec diam euismod, aliquam mi nec\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": ["__defProp", "__getOwnPropSymbols", "__hasOwnProp", "__propIsEnum", "__defNormalProp", "__spreadValues", "_a", "__spreadValues", "_a", "_a", "_a", "_a", "_a2", "_a", "_a", "__defProp2", "__getOwnPropDesc", "_a", "__spreadValues", "_a", "_a", "_a", "_a", "_a", "_a", "_a", "_a", "_a", "_a", "_a", "__spreadValues", "_a", "import_msfs_sdk", "import_msfs_sdk", "import_msfs_sdk"]
}
